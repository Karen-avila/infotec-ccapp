<div ng-controller="NewLoanAccAppController" class="content-container">
    <ul class="breadcrumb">
        <li ng-show="groupName">
            <a href="#!/viewgroup/{{groupId}}">
                <strong>{{groupName}}</strong>
            </a>
        </li>
        <li ng-show="clientName">
            <a href="#!/viewclient/{{clientId}}">
                <strong>{{clientName}}</strong>
            </a>
        </li>
        <li class="active">{{'label.anchor.loanapplication' | translate}}</li>
    </ul>
    <md-content flex="nogrow" style="margin: 40px auto">
        <md-card>
            <md-steppers md-dynamic-height md-disable-tabs-behavior="true" md-stretch-steppers="always" md-selected="selectedStep">
                <md-step label="{{'label.heading.details' | translate}}">
                    <md-step-body>
                        <form name="Details" novalidate="" class="form-inline">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr>
                                <table style="border-spacing: 10px; border-collapse: separate; width: 100%;">
                                    <tr>
                                        <td class="width25">
                                            <label>{{'label.input.product' | translate }}
                                                <span class="required">*</span>:&nbsp;
                                            </label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.product' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <md-select id="productId" ng-model="formData.productId" 
                                                placeholder="{{'label.selectloanproduct' | translate}}"
                                                ng-change="loanProductChange(formData.productId)" required>
                                                <md-option ng-repeat="product in products" ng-value="product.id">
                                                        {{product.shortName}} {{product.name}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                        <td class="width25">
                                            <label ng-show="formData.productId">{{'label.input.loanofficer' | translate }}:&nbsp;
                                            </label>
                                            <i ng-show="formData.productId" class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loanofficer' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <md-select ng-show="formData.productId" id="loanOfficerId" ng-model="formData.loanOfficerId"
                                                ng-change="loandetails.loanOfficerName = formValue(loanaccountinfo.loanOfficerOptions,formData.loanOfficerId,'id','displayName')"
                                                placeholder="{{'label.selectloanofficer' | translate}}">
                                                <md-option ng-repeat="loanOfficer in loanaccountinfo.loanOfficerOptions | orderBy:'displayName':reverse" 
                                                    ng-value="loanOfficer.id">
                                                    {{loanOfficer.displayName}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                    </tr>
                                    <tr ng-show="formData.productId">
                                        <td class="width25">
                                            <label>{{'label.input.loanpurpose' | translate }}:&nbsp;</label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loanpurpose' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <md-select id="loanPurposeId" ng-model="formData.loanPurposeId"
                                                ng-change="loandetails.loanPurposeName = formValue(loanaccountinfo.loanPurposeOptions,formData.loanPurposeId,'id','name')"
                                                placeholder="{{'label.selectpurpose' | translate}}">
                                                <md-option ng-repeat="loanPurpose in loanaccountinfo.loanPurposeOptions | orderBy:'name'" ng-value="loanPurpose.id">
                                                        {{loanPurpose.name}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenField.fundId == true">
                                            <label>{{'label.input.fund' | translate }}:&nbsp;</label>
                                        </td>
                                        <td class="paddedbottom20 " ng-hide="loanAccount.isHiddenField.fundId == true">
                                            <md-select id="fundId" ng-model="formData.fundId"
                                                ng-change="loandetails.fundName = formValue(loanaccountinfo.fundOptions,formData.fundId,'id','name')"
                                                placeholder="{{'label.selectfund' | translate}}">
                                                <md-option ng-repeat="fund in loanaccountinfo.fundOptions" ng-value="fund.id">
                                                        {{fund.name}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                    </tr>
                                    <tr ng-show="formData.productId">
                                        <td class="width25">
                                            <label>{{'label.input.submittedon' | translate }}
                                                <span class="required">*</span>:&nbsp;
                                            </label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.submittedon' | translate}}"></i>
                                        </td>
                                        <td class="paddedbottom20 ">
                                            <md-datepicker id="submittedOnDate" ng-model="date.first" 
                                                md-placeholder="{{'label.selecttodate' | translate}}"
                                                md-min-date="'2000-01-01'" md-max-date="restrictDate">
                                            </md-datepicker>
                                        </td>
                                        <td class="width25">
                                            <label
                                                title="{{'label.input.expecteddisbursementon' | translate }}">{{'label.input.disbursementon' | translate }}
                                                <span class="required">*</span>:&nbsp;
                                            </label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.disbursementon' | translate}}"></i>
                                        </td>
                                        <td class="paddedbottom20 ">
                                            <md-datepicker id="expectedDisbursementDate" ng-model="date.second" 
                                                md-placeholder="{{'label.selecttodate' | translate}}"
                                                md-min-date="date.first" md-max-date="'2030-06-22'" required>
                                            </md-datepicker>
                                        </td>
                                    </tr>
                                    <tr ng-show="formData.productId">
                                        <td class="width25">
                                            <label>{{'label.input.externalid' | translate }}</label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.externalid' | translate}}"></i>
                                        </td>
                                        <td class="paddedbottom20 ">
                                            <input type="text" id="externalId" name="externalId" ng-model="formData.externalId"
                                                class="form-control" />
                                        </td>
                                    </tr>
                                </table>
                                <div ng-hide="loanaccountinfo.calendarOptions == undefined">
                                    <hr ng-show="loanaccountinfo" />
                                </div>
                                <label ng-show="loanaccountinfo.calendarOptions">
                                    <i class="fa fa-calendar "></i>&nbsp;
                                    <strong>{{'label.heading.meetingdetails' | translate }}</strong>
                                </label>
                                <table ng-show="loanaccountinfo.calendarOptions" class="width100">
                                    <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                                        <td class="width25">
                                            <label>{{'label.heading.startdate' | translate }}:</label>
                                        </td>
                                        <td class="width25">{{calendar.startDate | DateFormat}}</td>
                                        <td class="width25">
                                            <label>{{'label.heading.repeatson' | translate }}:</label>
                                        </td>
                                        <td class="width25">{{calendar.humanReadable}}</td>
                                    </tr>
                                    <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                                        <td align="right" colspan="2">
                                            <md-checkbox ng-model="formData.syncRepaymentsWithMeeting" ng-change="syncRepaymentsWithMeetingchange()">
                                                {{'label.input.syncrepaymentswithmeeting' | translate }}
                                            </md-checkbox>
                                        </td>
                                        <td align="center" colspan="2">
                                            <md-checkbox ng-model="formData.syncDisbursementWithMeeting" ng-change="syncDisbursementWithMeetingchange()">
                                                {{'label.input.syncdisbursementdatewithmeeting' | translate }}
                                            </md-checkbox>
                                        </td>
                                    </tr>
                                </table>
                                <div
                                    ng-hide="loanAccount.isHiddenField.linkAccountId == true && loanAccount.isHiddenField.createStandingInstruction == true">
                                    <h3 ng-show="loanaccountinfo">{{'label.heading.savingsLinkage' | translate}}</h3>
                                    <hr ng-show="loanaccountinfo">
                                </div>
                                <table ng-show="loanaccountinfo && !previewRepayment" class="width100">
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.linkAccountId == true">
                                            <label>{{'label.input.linksavings' | translate }}:</label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.linkAccountId == true">
                                            <md-select id="linkAccountId" ng-model="formData.linkAccountId"
                                                ng-change="loandetails.linkAccountName = formValue(loanaccountinfo.accountLinkingOptions,formData.linkAccountId,'id','productName')"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="savingaccount in loanaccountinfo.accountLinkingOptions" ng-value="savingaccount.id">
                                                    {{savingaccount.accountNo}} {{savingaccount.productName}}
                                                </md-option>
                                            </md-select>
                                        </td>
                                        <td colspan="2"
                                            ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true" >
                                            <md-checkbox ng-model="formData.createStandingInstructionAtDisbursement">
                                                {{'label.input.createStandingInstruction' | translate }}
                                            </md-checkbox>
                                        </td>
                                    </tr>
                                </table>
                                <hr>
                            </fieldset>
                            <md-step-actions layout="row">
                                <div flex layout="row" layout-align="end top">
                                    <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                        {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                    </md-button>
                                </div>
                            </md-step-actions>                            
                        </form>
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.terms' | translate}}" ng-disabled="disabled">
                    <md-step-body>
                        <form name="Terms" class="form-inline">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr>
                                <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class="width100">
                                    <tr>
                                        <td class="width25">
                                            <label>{{'label.input.principal' | translate }}&nbsp;
                                                <span class="required">*</span></label>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <div class="col-md-6">
                                                <md-slider flex="95" class="md-primary" aria-label="inMultiplesOf" md-discrete ng-model="formData.principal" 
                                                    step="{{loanaccountinfo.currency.inMultiplesOf}}" 
                                                    min="{{loanaccountinfo.product.minPrincipal}}" 
                                                    max="{{loanaccountinfo.product.maxPrincipal}}" id="principal-slider">
                                                </md-slider>
                                            </div>
                                            <div class="col-md-6 left">
                                                <label>{{loanaccountinfo.currency.displaySymbol}} {{formData.principal | FormatNumber}}</label>
                                            </div>    
                                        </td>
                                        <td class="width25">
                                            <label>{{'label.input.loanterm' | translate }}&nbsp;
                                                <span class="required">*</span>:</label>
                                        </td>
                                        <td class="width25">
                                            <div class="col-md-6">
                                                <input id="loanTermFrequency" class="form-control" name="loanterm" type="number"
                                                    ng-model="formData.loanTermFrequency" required  />
                                            </div>
                                            <div class="col-md-6">
                                                <md-select ng-disabled="loanAccount.isReadOnlyField.loanTermFrequencyType == true"
                                                    id="loanTermFrequencyType" ng-model="formData.loanTermFrequencyType"
                                                    ng-change="loandetails.loanTermFrequencyValue = formValue(loanaccountinfo.termFrequencyTypeOptions,formData.loanTermFrequencyType)"
                                                    placeholder="{{'label.menu.selectone' | translate}}">
                                                    <md-option ng-repeat="termFrequencyType in loanaccountinfo.termFrequencyTypeOptions" ng-value="termFrequencyType.id">
                                                        {{termFrequencyType.value | translate}}
                                                    </md-option>
                                                </md-select>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.numberOfRepayments == true" class="width25">
                                            <label>{{'label.input.numofrepayments' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20" ng-hide="loanAccount.isHiddenField.numberOfRepayments == true">
                                            <div class="col-md-6">                                            
                                                <input id="numberOfRepayments" class="form-control" name="numofrepayments" type="number"
                                                    ng-model="formData.numberOfRepayments" required >
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.repaymentEvery == true" class="width25">
                                            <label>{{'label.input.repaidevery' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.repaymentEvery == true">
                                            <div class="col-md-6">
                                                <input id="repaymentEvery" class="form-control" type="number" name="repaidevery"
                                                    ng-model="formData.repaymentEvery"
                                                    ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery"
                                                    required  />
                                            </div>
                                            <div class="col-md-6">
                                                <md-select id="repaymentFrequencyType" ng-model="formData.repaymentFrequencyType"
                                                ng-change="loandetails.repaymentFrequencyValue = formValue(loanaccountinfo.termFrequencyTypeOptions,formData.repaymentFrequencyType)"
                                                ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                    <md-option ng-repeat="repaymentFrequencyType in loanaccountinfo.termFrequencyTypeOptions" ng-value="repaymentFrequencyType.id">
                                                        {{repaymentFrequencyType.value | translate}}
                                                    </md-option>                                                
                                                </md-select>
                                            </div>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <div class="col-md-1">
                                                <span ng-show="formData.repaymentFrequencyType == 2">{{'label.heading.on' | translate}}</span>
                                            </div>
                                            <div class="col-md-6">
                                            <md-select id="repaymentFrequencyNthDayType" ng-model="formData.repaymentFrequencyNthDayType"
                                                ng-change="loandetails.repaymentFrequencyNthDayValue = formValue(loanaccountinfo.repaymentFrequencyNthDayTypeOptions,formData.repaymentFrequencyNthDayType)"
                                                ng-show="formData.repaymentFrequencyType == 2" placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="repaymentFrequencyNthDayType in loanaccountinfo.repaymentFrequencyNthDayTypeOptions" ng-value="repaymentFrequencyNthDayType.id">
                                                    {{repaymentFrequencyNthDayType.value | translate}}
                                                </md-option> 
                                            </md-select>
                                            </div>
                                            <div class="col-md-5">
                                            <md-select id="repaymentFrequencyDayOfWeekType" ng-model="formData.repaymentFrequencyDayOfWeekType"
                                                ng-change="loandetails.repaymentFrequencyDayOfWeekValue = formValue(loanaccountinfo.repaymentFrequencyDaysOfWeekTypeOptions,formData.repaymentFrequencyDayOfWeekType)"
                                                ng-show="formData.repaymentFrequencyType == 2" placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="repaymentFrequencyDayOfWeekType in loanaccountinfo.repaymentFrequencyDaysOfWeekTypeOptions" ng-value="repaymentFrequencyDayOfWeekType.id">
                                                    {{repaymentFrequencyDayOfWeekType.value | translate}}
                                                </md-option> 
                                            </md-select>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.repaymentsStartingFromDate == true" class="width25">
                                            <label>{{'label.input.firstrepaymenton' | translate }}</label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.firstrepaymenton' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.repaymentsStartingFromDate == true">
                                            <md-datepicker id="repaymentsStartingFromDate" ng-model="date.fourth" 
                                                md-placeholder="{{'label.selecttodate' | translate}}"
                                                md-min-date="minDate" md-max-date="'2030-06-22'" required>
                                            </md-datepicker>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenField.interestChargedFromDate == true" class="width25">
                                            <label class="control-label">{{'label.input.interestchargedfrom' | translate }}:
                                            </label>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.interestchargedfrom' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.interestChargedFromDate == true">
                                            <md-datepicker id="interestChargedFromDate" ng-model="date.third" 
                                                md-placeholder="{{'label.selecttodate' | translate}}"
                                                md-min-date="minDate" md-max-date="'2030-06-22'" required>
                                            </md-datepicker>
                                        </td>
                                    </tr>
                                    <tr ng-show="!loanaccountinfo.isLoanProductLinkedToFloatingRate">
                                        <td class="width25">
                                            <label>{{'label.input.nominalinterestrate' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25">
                                            <div class="col-md-6">
                                            <input id="interestRatePerPeriod" class="form-control" type="number"
                                                name="nominalinterestrate"
                                                ng-model="formData.interestRatePerPeriod" />
                                            </div>
                                            <div class="col-md-6 left"> 
                                                % {{loanaccountinfo.interestRateFrequencyType.value | translate}}
                                            </div>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenField.interestType == true" class="width25">
                                            <label>{{'label.input.interestmethod' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20" ng-hide="loanAccount.isHiddenField.interestType == true">
                                            <div class="col-md-12">
                                                <md-select id="interestType" ng-model="formData.interestType"
                                                    ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                                                    ng-change="loandetails.interestValue = formValue(loanaccountinfo.interestTypeOptions,formData.interestType)"
                                                    placeholder="{{'label.menu.selectone' | translate}}">
                                                    <md-option ng-repeat="interestType in loanaccountinfo.interestTypeOptions" ng-value="interestType.id">
                                                        {{interestType.value | translate}}
                                                    </md-option>  
                                                </md-select>
                                            </div>
                                        </td>
                                    </tr>

                                    <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                                        <td class="width25">
                                            <label>{{'label.heading.floatinginterestratedifferential' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <div class="col-md-6">
                                                <input id="interestratedifferential" class="form-control" type="number"
                                                    name="interestratedifferential" ng-model="formData.interestRateDifferential" />
                                            </div>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenField.interestType == true" class="width25">
                                            <label>{{'label.input.interestmethod' | translate }}</label>
                                        </td>
                                        <td class="right paddedbottom20" ng-hide="loanAccount.isHiddenField.interestType == true" class="width25">
                                            <md-select id="interestType1" ng-model="formData.interestType"
                                                ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="interestType in loanaccountinfo.interestTypeOptions" ng-value="interestType.id">
                                                    {{interestType.value | translate}}
                                                </md-option>  
                                            </md-select>
                                            <md-checkbox id="isfloatingrate" ng-model="formData.isFloatingInterestRate">
                                                {{'label.input.isfloatingrate' | translate }}
                                            </md-checkbox>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.amortizationType == true" class="width25">
                                            <label>{{'label.input.amortization' | translate }}&nbsp;
                                                <span class="required">*</span>:</label>
                                        </td>
                                        <td class="width25 paddedbottom20" ng-hide="loanAccount.isHiddenField.amortizationType == true">
                                            <md-select id="amortizationType" ng-model="formData.amortizationType"
                                                ng-change="loandetails.amortizationValue = formValue(loanaccountinfo.amortizationTypeOptions,formData.amortizationType)"
                                                ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.amortizationType"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="amortizationType in loanaccountinfo.amortizationTypeOptions" ng-value="amortizationType.id">
                                                    {{amortizationType.value | translate}}
                                                </md-option>  
                                            </md-select>
                                        </td>
                                        <td class="width50 left" colspan="2">
                                            <md-checkbox id="isEqualAmortization" ng-model="formData.isEqualAmortization">
                                                {{'label.input.isequalamortization' | translate }}
                                            </md-checkbox>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.interestCalculationPeriodType == true" class="width25">
                                            <label>{{'label.input.interestcalculationperiod' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.interestCalculationPeriodType == true">
                                            <md-select id="interestCalculationPeriodType" ng-model="formData.interestCalculationPeriodType"
                                                ng-change="loandetails.interestCalculationPeriodValue = formValue(loanaccountinfo.interestCalculationPeriodTypeOptions,formData.interestCalculationPeriodType)"
                                                ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="interestCalculationPeriodType in loanaccountinfo.interestCalculationPeriodTypeOptions" ng-value="interestCalculationPeriodType.id">
                                                    {{interestCalculationPeriodType.value | translate}}
                                                </md-option> 
                                            </md-select>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenField.interestCalculationPeriodType == true || formData.interestCalculationPeriodType == 0"
                                            colspan="2">
                                            <md-checkbox id="allowPartialPeriodInterestCalcualtion" ng-model="formData.allowPartialPeriodInterestCalcualtion"
                                            ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType">
                                                {{'label.input.allowpartialperiodinterestcalcualtion' | translate }}
                                            </md-checkbox>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.inArrearsTolerance == true" class="width25">
                                            <label>{{'label.input.arearstolerance' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20" ng-hide="loanAccount.isHiddenField.inArrearsTolerance == true">
                                            <div class="col-md-6">
                                                <input id="inArrearsTolerance" type="number"
                                                    ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.inArrearsTolerance"
                                                    ng-model="formData.inArrearsTolerance" class="form-control"/>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-hide="loanAccount.isHiddenField.transactionProcessingStrategyId == true" class="width25">
                                            <label>{{'label.input.repaymentstrategy' | translate }}&nbsp;
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenField.transactionProcessingStrategyId == true">
                                            <md-select id="transactionProcessingStrategyId" ng-model="formData.transactionProcessingStrategyId"
                                                ng-change="loandetails.transactionProcessingStrategyValue = formValue(loanaccountinfo.transactionProcessingStrategyOptions,formData.transactionProcessingStrategyId,'id','name')"
                                                ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.transactionProcessingStrategyId"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="transactionProcessingStrategy in loanaccountinfo.transactionProcessingStrategyOptions" ng-value="transactionProcessingStrategy.id">
                                                    {{transactionProcessingStrategy.name | translate}}
                                                </md-option> 
                                            </md-select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="width25">
                                            <label
                                                ng-hide="loanAccount.isHiddenField.graceOnPrincipalPayment == true">{{'label.input.onprincipalpayment' | translate}}</label>
                                        </td>
                                        <td class="width25">
                                            <div class="col-md-6">
                                                <input ng-hide="loanAccount.isHiddenField.graceOnPrincipalPayment == true"
                                                    id="graceOnPrincipalPayment" type="number" class="form-control"
                                                    ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnPrincipalAndInterestPayment"
                                                    ng-model="formData.graceOnPrincipalPayment" />
                                            </div>
                                        </td>
                                        <td class="width25">
                                            <label
                                                ng-hide="loanAccount.isHiddenField.graceOnInterestPayment == true">{{'label.input.oninterestpayment' | translate}}</label>
                                        </td>
                                        <td class="width25">
                                            <div class="col-md-6">
                                                <input ng-hide="loanAccount.isHiddenField.graceOnInterestPayment == true"
                                                    id="graceOnInterestPayment" type="number" class="form-control"
                                                    ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnInterestPayment"
                                                    ng-model="formData.graceOnInterestPayment" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-ng-show="loanaccountinfo.canDefineInstallmentAmount">
                                        <td colspan=2>
                                            <label>{{'label.input.fixedemiamount' | translate }}:</label>&nbsp;
                                            <input id="fixedEmiAmount" type="number" ng-model="formData.fixedEmiAmount"
                                                class="form-control"  />
                                        </td>
                                    </tr>
                                    <tr ng-show="loanaccountinfo.canUseForTopup">
                                        <td colspan="2">
                                            <md-checkbox id="isTopup" ng-model="formData.isTopup">
                                                {{'label.heading.isTopup' | translate }}
                                            </md-checkbox>
                                        </td>
                                        <td ng-show="formData.isTopup == true">
                                            <label>{{'label.input.loanIdToClose' | translate }}
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20" ng-show="formData.isTopup == true">
                                            <md-select id="loanIdToClose" ng-model="formData.loanIdToClose"
                                                ng-change="loandetails.loanAccountToClose= formValue(loanaccountinfo.clientActiveLoanOptions,formData.loanIdToClose,'id','accountNo')"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="loanSummary in loanaccountinfo.clientActiveLoanOptions" ng-value="loanSummary.id">
                                                    {{loanSummary.accountNo | translate}}
                                                </md-option> 
                                            </md-select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <hr>
                                        </td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                        <td>
                                            <label>{{'label.input.daysinyears' | translate }}</label>
                                            <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.days' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <label>{{ loanaccountinfo.daysInYearType.value | translate }}</label>
                                        </td>
                                        <td>
                                            <label>{{'label.input.daysinmonth' | translate }}</label>
                                            <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.days' | translate}}"></i>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <label>{{ loanaccountinfo.daysInMonthType.value | translate }}</label>
                                        </td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                        <td>
                                            <label class="control-label">{{'label.input.recalculateinterest' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20">
                                            <label
                                                class="control-label">{{ loanaccountinfo.isInterestRecalculationEnabled | translate }}
                                            </label>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{'label.input.interest.recalculation.reschdule.strategy' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.rescheduleStrategyType.value | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.interest.recalculation.compounding.method' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.value | translate }}
                                            </label>
                                        </td>

                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.frequency.for.recalculte.outstanding.principal' | translate }}
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 3 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay != null">
                                                {{'label.heading.on.day' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay == null &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay != null">{{'label.heading.on' | translate}} 
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay.value | translate }}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate }}
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyInterval | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled  && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0">
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label class="control-label">{{'label.input.frequency.for.compounding' | translate }}
                                                <span class="required">*</span>
                                            </label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 3 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay != null">
                                                {{'label.heading.on.day' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay == null &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value | translate }}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.frequenc.interval.for.compounding' | translate }}</label>
                                        </td>
                                        <td class="width25 paddedbottom20"
                                            ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyInterval | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                </table>

                                <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                                    <div ng-show="multiDisburseLoan">
                                        <hr />
                                        <label>
                                            <strong>{{'label.heading.tranchedetails' | translate }}</strong>
                                        </label>
                                        <table class="width100">
                                            <tr>
                                                <td class="width25">
                                                    <label>{{'label.input.outstandingloanbalance' | translate}}:
                                                    </label>
                                                </td>
                                                <td class="width25 paddedbottom20">
                                                    <input id="maxOutstandingLoanBalance" type="number"
                                                        ng-model="formData.maxOutstandingLoanBalance" class="form-control"
                                                         />&nbsp;
                                                    <a title="{{'label.button.addtranch' | translate }}" ng-click="addTranches()">
                                                        <i class="fa fa-plus "></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                        <table class="width100" ng-show="formData.disbursementData.length>0">
                                            <thead>
                                                <tr class="graybg">
                                                    <th>{{'label.input.expecteddisbursementon' | translate}}</th>
                                                    <th>{{'label.input.principal' | translate}}</th>
                                                    <th>&nbsp;</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="disbursementDetail in formData.disbursementData">
                                                    <td>
                                                        <md-datepicker id="disbursementDetail[{{$index}}].expectedDisbursementDate" 
                                                            ng-model="disbursementDetail.expectedDisbursementDate" 
                                                            md-placeholder="{{'label.input.expecteddisbursementon' | translate}}"
                                                            md-min-date="minDate" md-max-date="'2030-06-22'" required>
                                                        </md-datepicker>
                                                    </td>
                                                    <td>
                                                        <input id="{{disbursementDetail[$index].principal}}"
                                                            class="input-sm form-control"  type="number"
                                                            ng-model="disbursementDetail.principal"
                                                            placeholder="{{'label.input.principal' | translate}}">
                                                    </td>
                                                    <td>
                                                        <a ng-click="deleteTranches($index)">
                                                            <i class="fa fa-times-circle fa-2x"></i>
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <hr>
                            </fieldset>
                            <md-divider></md-divider>
                            <md-step-actions layout="row">
                                <div flex layout="row" layout-align="end top">
                                    <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                        <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                    </md-button>
                                    <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                        {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                    </md-button>
                                </div>
                            </md-step-actions>  
                        </form>
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.charges' | translate}}" ng-disabled="disabled">
                    <md-step-body>
                        <form name="Charges" class="form-horizontal form-extra">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr>
                                <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                                    <div class="form-group">
                                        <div class="col-md-3">
                                            <md-select ng-model="chargeFormData.chargeId"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="charge in loanaccountinfo.chargeOptions|filter:loanaccountinfo.currency.code:strict" ng-value="charge.id">
                                                    {{charge.name | translate}} {{charge.currency.displaySymbol}}
                                                </md-option> 
                                            </md-select>
                                        </div>
                                        <div class="col-md-1">
                                            <a class="btn btn-sm btn-primary" ng-click="addCharge()">
                                                <i class="fa fa-plus "></i>&nbsp;{{'label.button.add' | translate}}</a>
                                        </div>
                                    </div>
                                    <table class="table width100" ng-show="charges.length>0">
                                        <tr class="graybg">
                                            <th>{{'label.heading.name' | translate}}</th>
                                            <th>{{'label.heading.type' | translate}}</th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th>{{'label.heading.collectedon' | translate}}</th>
                                            <th>{{'label.heading.date' | translate}}</th>
                                            <th>{{'label.heading.actions' | translate}}</th>
                                        </tr>
                                        <tr ng-repeat="charge in charges">
                                            <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                            <td>{{charge.chargeCalculationType.value}}</td>
                                            <td>
                                                <input id="{{charges[$index].amount}}" class="form-control" type="number"
                                                    ng-model="charge.amount" placeholder="{{'label.input.amount' | translate}}"
                                                    >
                                            </td>
                                            <td>{{charge.chargeTimeType.value}}</td>
                                            <td>
                                                <md-datepicker id="charges[{{$index}}].duedate" ng-model="charge.dueDate" 
                                                    md-placeholder="{{'label.input.duedate' | translate}}"
                                                    md-min-date="minDate" md-max-date="'2030-06-22'">
                                                </md-datepicker>
                                            </td>
                                            <td>
                                                <a ng-click="deleteCharge($index)">
                                                    <i class="fa fa-times-circle fa-2x"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </table>
                                    <div ng-show="loanaccountinfo.overdueCharges.length>0">
                                        <label>
                                            <strong>{{'label.heading.overduepenalitycharge' | translate }}</strong>
                                        </label>
                                        <table class="width100">
                                            <tr class="graybg">
                                                <th>{{'label.heading.name' | translate}}</th>
                                                <th>{{'label.heading.type' | translate}}</th>
                                                <th>{{'label.heading.amount' | translate}}</th>
                                                <th>{{'label.heading.collectedon' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="charge in loanaccountinfo.overdueCharges">
                                                <td>{{charge.name}}, {{charge.currency.displaySymbol}}</td>
                                                <td>{{charge.chargeCalculationType.value | translate }}</td>
                                                <td>{{charge.amount | FormatNumber}}</td>
                                                <td>{{charge.chargeTimeType.value}}</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <br>
                                    <div class="form-group" ng-hide="loanAccount.isHiddenSection.collateralSection == true">
                                        <table class="table width100">
                                            <tr>
                                                <td>
                                                    <label class="control-label col-md-2">
                                                        <strong>{{'label.heading.collaterals' | translate }}</strong>
                                                </td>
                                                <td>
                                                    <md-select ng-model="collateralFormData.collateralIdTemplate"
                                                        placeholder="{{'label.menu.selectone' | translate}}">
                                                        <md-option ng-repeat="collateralTemplate in collateralOptions" ng-value="collateralTemplate.name">
                                                            {{collateralTemplate.name | translate}}
                                                        </md-option> 
                                                    </md-select>
                                                </td>
                                                <td>
                                                    <input class="form-control" type="text"
                                                    ng-model="collateralFormData.collateralValueTemplate"
                                                    placeholder="{{'label.input.value' | translate}}" >                                    
                                                </td>
                                                <td>
                                                    <input type="text" ng-model="collateralFormData.collateralDescriptionTemplate"
                                                    placeholder="{{'label.input.description' | translate}}"
                                                    class="form-control col-md-2">                                    
                                                </td>
                                                <td>
                                                    <a class="btn btn-sm btn-primary" ng-click="addCollateral()" class="col-md-1">&nbsp;
                                                        <i class="fa fa-plus "></i>&nbsp;{{'label.button.add' | translate}}</a>    
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <br>
                                    <div ng-hide="loanAccount.isHiddenSection.collateralSection == true">
                                        <table class="width100" ng-show="collaterals.length>0">
                                            <tr class="graybg">
                                                <th>{{'label.heading.type' | translate}}</th>
                                                <th>{{'label.heading.value' | translate}}</th>
                                                <th>{{'label.heading.description' | translate}}</th>
                                                <th>{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="collateral in collaterals">
                                                <td>
                                                    <input type="text" class="input-sm form-control" ng-model="collateral.name"
                                                        readonly>
                                                </td>
                                                <td>
                                                    <input id="{{collaterals[$index].value}}" type="number" class="form-control"
                                                        ng-model="collateral.value">
                                                </td>
                                                <td>
                                                    <input id="{{collaterals[$index].description}}" type="text"
                                                        ng-model="collateral.description"
                                                        placeholder="{{'label.input.description' | translate}}"
                                                        class="form-control" />
                                                </td>
                                                <td>
                                                    <a ng-click="deleteCollateral($index)">
                                                        <i class="fa fa-times-circle fa-2x"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <br>
                                <md-divider></md-divider>
                                <div ng-show="loanaccountinfo">
                                    <md-button md-no-ink class="md-primary" ng-hide="previewRepayment"
                                        ng-click="previewRepayments()"> {{'label.anchor.repaymentinfo' | translate}}  <i
                                            class="fa fa-arrow-right"></i></md-button>
                                    <md-button md-no-ink class="md-primary" ng-show="previewRepayment"
                                        ng-click="previewRepayment=!previewRepayment"><i
                                        class="fa fa-arrow-left"></i>  {{'label.anchor.backtoloaninfo' | translate}}</md-button>
                                </div>

                                <div>
                                    <table class="table width100" ng-show="previewRepayment">
                                        <thead>
                                            <th colspan="3" scope="col"></th>
                                            <th colspan="3" scope="col">{{'label.heading.loanamountandbalance' | translate}}</th>
                                            <th colspan="2" scope="col">{{'label.heading.totalcostofloan' | translate}}</th>
                                            <th colspan="2" scope="col"></th>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>#</td>
                                                <td>{{'label.heading.days' | translate}}</td>
                                                <td>{{'label.heading.date' | translate}}</td>
                                                <td>{{'label.heading.disbursement' | translate}}</td>
                                                <td>{{'label.heading.principaldue' | translate}}</td>
                                                <td>{{'label.heading.principalbalance' | translate}}</td>
                                                <td>{{'label.heading.interestdue' | translate}}</td>
                                                <td>{{'label.heading.fees' | translate}}</td>
                                                <td>{{'label.heading.penalty' | translate}}</td>
                                                <td>{{'label.heading.due' | translate}}</td>
                                            </tr>
                                            <tr ng-repeat="period in repaymentscheduleinfo.periods">
                                                <td>{{period.period}}</td>
                                                <td>{{period.daysInPeriod}}</td>
                                                <td>{{period.dueDate | DateFormat}}</td>
                                                <td>{{period.principalDisbursed | FormatNumber}}</td>
                                                <td>{{period.principalDue| FormatNumber}}</td>
                                                <td>{{period.principalLoanBalanceOutstanding| FormatNumber}}</td>
                                                <td>{{period.interestDue| FormatNumber}}</td>
                                                <td>{{period.feeChargesDue| FormatNumber}}</td>
                                                <td>{{period.penaltyChargesDue| FormatNumber}}</td>
                                                <td>{{period.totalDueForPeriod| FormatNumber}}</td>
                                            </tr>
                                        <tfoot class="ui-widget-header">
                                            <tr>
                                                <td colspan="2">{{'label.heading.total' | translate}}</td>
                                                <td>{{repaymentscheduleinfo.loanTermInDays}}</td>
                                                <td>{{repaymentscheduleinfo.totalPrincipalDisbursed| FormatNumber}}</td>
                                                <td>{{repaymentscheduleinfo.totalPrincipalExpected| FormatNumber}}</td>
                                                <td></td>
                                                <td>{{repaymentscheduleinfo.totalInterestCharged| FormatNumber}}</td>
                                                <td>{{repaymentscheduleinfo.totalFeeChargesCharged| FormatNumber}}</td>
                                                <td>{{repaymentscheduleinfo.totalPenaltyChargesCharged| FormatNumber}}</td>
                                                <td>{{repaymentscheduleinfo.totalRepaymentExpected| FormatNumber}}</td>
                                            </tr>
                                        </tfoot>
                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>
                            <md-divider></md-divider>
                            <md-step-actions layout="row">
                                <div flex layout="row" layout-align="end top">
                                    <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                        <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                    </md-button>
                                    <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                        {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                    </md-button>
                                </div>
                            </md-step-actions>  
                        </form>
                    </md-step-body>
                </md-step>
                <md-step ng-repeat="datatable in datatables" id="{{'datatable_' + datatable.id}}" label="{{datatable.registeredTableName | translate}}" ng-disabled="disabled">
                    <md-step-body>
                        <form name="Datatables" class="form-horizontal form-extra">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr />
                                <div class="form-group" ng-repeat="columnHeader in datatable.columnHeaderData">
                                    <label class="control-label col-md-3">{{ columnHeader.columnName | prettifyDataTableColumn }}
                                        <span ng-show="!columnHeader.isColumnNullable" class="required">*</span>
                                    </label>

                                    <div class="col-md-3">
                                        <input ng-show="fieldType(columnHeader.columnDisplayType) == 'TEXT'" type="text"
                                            ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                            class="form-control" />
                                        <md-datepicker   
                                            ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                            ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'" 
                                            md-placeholder="{{'label.selecttodate' | translate}}">
                                        </md-datepicker>
                                        <div ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'" class="form-inline">
                                            <div class="form-group">
                                                <md-datepicker   
                                                    ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date"
                                                    md-placeholder="{{'label.selecttodate' | translate}}">
                                                </md-datepicker>
                                            </div>
                                            <div class="form-group">
                                                <input type="time" placeholder="HH:MM:SS"
                                                    ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div ng-show="fieldType(columnHeader.columnDisplayType) == 'BOOLEAN'">
                                            <label class="radio-inline">
                                                <input type="radio"
                                                    ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                                    value="true" /> {{'label.input.true' | translate}}
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio"
                                                    ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                                    value="false" /> {{'label.input.false' | translate}}
                                            </label>
                                        </div>
                                        <span data-ng-switch on="columnHeader.columnDisplayType">
                                            <md-select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
                                                data-ng-switch-when="CODELOOKUP"
                                                ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="columnValue in columnHeader.columnValues" ng-value="columnValue.id">
                                                    {{columnValue.value | translate}}
                                                </md-option>
                                            </md-select>
                                            <md-select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
                                                data-ng-switch-when="CODEVALUE"
                                                ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                                placeholder="{{'label.menu.selectone' | translate}}">
                                                <md-option ng-repeat="columnValue in columnHeader.columnValues" ng-value="columnValue.value">
                                                    {{columnValue.value | translate}}
                                                </md-option>
                                            </md-select>
                                        </span>
                                    </div>
                                </div>
                            </fieldset>
                            <md-divider></md-divider>
                            <md-step-actions layout="row">
                                <div flex layout="row" layout-align="end top">
                                    <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                        <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                    </md-button>
                                    <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                        {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                    </md-button>
                                </div>
                            </md-step-actions>  
                        </form>
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.preview' | translate}}" ng-if="!disabled">
                    <md-step-body>
                        <form name="review" class="form-horizontal form-extra">
                            <fieldset>
                                <api-validate></api-validate>
                                <table width="100%">
                                    <tr class="bottomborder">
                                        <td colspan="7">
                                            <strong>{{'label.heading.details' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td colspan="6">{{'label.input.product' | translate}}</td>
                                        <td>{{loandetails.productName}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6" ng-show="formData.productId">
                                            {{'label.input.loanofficer' | translate }}:&nbsp;
                                        </td>
                                        <td>{{loandetails.loanOfficerName}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.loanpurpose' | translate }}:&nbsp</td>
                                        <td>{{loandetails.loanPurposeName}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6" ng-hide="loanAccount.isHiddenField.fundId == true">
                                            {{'label.input.fund' | translate }}:</td>
                                        <td>{{loandetails.fundName}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.submittedon' | translate }}</td>
                                        <td>{{date.first | DateFormat}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.disbursementon' | translate }}</td>&nbsp;
                                        <td>{{date.second | DateFormat}} </td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.externalid' | translate }}</td>
                                        <td class="width25">{{loandetails.externalId}}</td>
                                    </tr>
                                    <tr class="bottomborder toppadding">
                                        <td colspan="7">
                                            <strong>{{'label.heading.terms' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td colspan="6">{{'label.input.principal' | translate }}</td>
                                        <td>{{loanaccountinfo.currency.DisplaySymbol}} {{loandetails.principal | FormatNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.loanterm' | translate }}</td>
                                        <td>{{loandetails.loanTermFrequency | translate }} {{loandetails.loanTermFrequencyValue | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.numberOfRepayments">
                                        <td colspan="6">
                                            {{'label.input.numofrepayments' | translate }}&nbsp;
                                        </td>
                                        <td>{{loandetails.numberOfRepayments}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.repaymentEvery">
                                        <td colspan="6">{{'label.input.repaidevery' | translate }}</td>
                                        <td>{{loandetails.repaymentEvery}} {{loandetails.repaymentFrequencyValue | translate }}
                                            {{loandetails.repaymentFrequencyNthDayValue | translate }}
                                            {{loandetails.repaymentFrequencyDayOfWeekValue | translate }}
                                        </td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.repaymentsStartingFromDate">
                                        <td colspan="6">{{'label.input.firstrepaymenton' | translate }}</td>
                                        <td>{{date.fourth | DateFormat }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.interestChargedFromDate">
                                        <td colspan="6">{{'label.input.interestchargedfrom' | translate}}
                                        <td>{{date.third | DateFormat}}</td>
                                    </tr>
                                    <tr ng-show="!loanaccountinfo.isLoanProductLinkedToFloatingRate">
                                        <td colspan="6">{{'label.input.nominalinterestrate' | translate }}</td>
                                        <td>{{loandetails.interestRatePerPeriod | translate }}&nbsp;&nbsp;{{loanaccountinfo.interestRateFrequencyType.value | translate }}
                                        </td>
                                    </tr>
                                    <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                                        <td colspan="6">{{'label.heading.floatinginterestratedifferential' | translate }}</td>
                                        <td>{{formData.interestRateDifferential | FormatNumber}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.interestType">
                                        <td colspan="6">{{'label.input.interestmethod' | translate }}</td>
                                        <td>{{loandetails.interestValue | translate }}</td>
                                    </tr>
                                    <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                                        <td colspan="6">{{'label.input.isfloatingrate' | translate}}</td>
                                        <td>{{loandetails.isFloatingInterestRate | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.interestType">
                                        <td colspan="6">{{'label.input.isequalamortization' | translate }}</td>
                                        <td>{{loandetails.isEqualAmortization | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.amortizationType">
                                        <td colspan="6">{{'label.input.amortization' | translate }}&nbsp;</td>
                                        <td>{{loandetails.amortizationValue | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.interestCalculationPeriodType">
                                        <td colspan="6">{{'label.input.interestcalculationperiod' | translate }}&nbsp;</td>
                                        <td>{{loandetails.interestCalculationPeriodValue | translate }}</td>
                                    </tr>
                                    <tr
                                        ng-hide="loanAccount.isHiddenField.interestCalculationPeriodType || formData.interestCalculationPeriodType == 0">
                                        <td colspan="6">{{'label.input.allowpartialperiodinterestcalcualtion' | translate }}&nbsp;
                                        </td>
                                        <td>{{loandetails.allowPartialPeriodInterestCalcualtion | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.inArrearsTolerance">
                                        <td colspan="6">{{'label.input.arearstolerance' | translate }}</td>
                                        <td>{{loandetails.inArrearsTolerance}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.graceOnInterestCharged">
                                        <td colspan="6">{{'label.input.interestfreeperiod' | translate }}</td>
                                        <td>{{loandetails.graceOnInterestCharged}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.transactionProcessingStrategyId">
                                        <td colspan="6">{{'label.input.repaymentstrategy' | translate }}&nbsp;</td>
                                        <td>{{loandetails.transactionProcessingStrategyValue | translate }}</td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td colspan="6">{{'label.input.onprincipalpayment' | translate}}</td>
                                        <td>{{formData.graceOnPrincipalPayment}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.graceOnInterestPayment">
                                        <td colspan="6">{{'label.input.oninterestpayment' | translate}}</td>
                                        <td>{{formData.graceOnInterestPayment}}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenField.graceOnArrearsAgeing">
                                        <td colspan="6">{{'label.input.onduedate' | translate}}</td>
                                        <td>{{formData.graceOnArrearsAgeing}}</td>
                                    </tr>
                                    <tr data-ng-show="loanaccountinfo.canDefineInstallmentAmount">
                                        <td colspan="6">{{'label.input.fixedemiamount' | translate }}:</td>
                                        <td>{{formData.fixedEmiAmount | FormatNumber }}</td>
                                    </tr>
                                    <tr ng-show="loanaccountinfo.canUseForTopup">
                                        <td colspan="6">{{'label.heading.isTopup' | translate }}</td>
                                        <td>{{formData.isTopup | translate }}</td>
                                    </tr>
                                    <tr ng-show="formData.isTopup">
                                        <td colspan="6">{{'label.input.loanIdToClose' | translate}}</td>
                                        <td>{{loandetails.loanAccountToClose | translate }}</td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenSection.interestRecalculationSection">
                                        <td colspan="6">{{'label.input.recalculateinterest' | translate }}</td>
                                        <td>{{ loanaccountinfo.isInterestRecalculationEnabled | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.daysinyears' | translate }}</td>
                                        <td colspan="3">{{ loanaccountinfo.daysInYearType.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">{{'label.input.daysinmonth' | translate }}</td>
                                        <td colspan="3">{{ loanaccountinfo.daysInMonthType.value | translate}}</td>
                                    </tr>
                                    <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                                        <td colspan="6" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{'label.input.interest.recalculation.reschdule.strategy' | translate }}
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{ loanaccountinfo.interestRecalculationData.rescheduleStrategyType.value | translate }}
                                        </td>
                                    </tr>
                                    <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                                        <td colspan="6" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{'label.input.interest.recalculation.compounding.method'| translate }}
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{ loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.value | translate }}
                                        </td>
                                    </tr>
                                    <tr ng-hide="loanAccount.isHiddenSection.interestRecalculationSection">
                                        <td colspan="6">
                                            {{'label.input.frequency.for.recalculte.outstanding.principal' |translate }}</td>
                                        <td>
                                            {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.value | translate }}</label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 3 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay != null">
                                                {{'label.heading.on.day' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay == null &&
                                                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay.value | translate }}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                                        <td colspan="6" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate}}
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyInterval | translate }}
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled  && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0">
                                        <td colspan="6" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.frequency.for.compounding' | translate }}</label>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.value | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 3 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay != null">
                                                {{'label.heading.on.day' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay | translate }}
                                            </label>
                                            <label
                                                data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay == null &&
                                                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">
                                                {{'label.heading.on' | translate}}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value | translate }}
                                                {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value | translate }}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                                        <td colspan="6" ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label
                                                class="control-label">{{'label.input.frequenc.interval.for.compounding' | translate }}</label>
                                        </td>
                                        <td ng-hide="loanAccount.isHiddenSection.interestRecalculationSection == true">
                                            <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyInterval | translate }}</label>
                                        </td>
                                    </tr>
                                    <tr class="bottomborder toppadding">
                                        <td colspan="7">
                                            <strong>{{'label.heading.tranchedetails' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="graybg toppadding">
                                        <th colspan="4">{{'label.input.expecteddisbursementon' | translate}}</th>
                                        <th colspan="3">{{'label.input.principal' | translate}}</th>
                                    </tr>
                                    <tr class="toppadding" ng-repeat="disbursementDetail in formData.disbursementData">
                                        <td colspan="4">{{disbursementDetail.expectedDisbursementDate | DateFormat}}</td>
                                        <td colspan="3">{{disbursementDetail.principal}}</td>
                                    </tr>
                                    <tr class="bottomborder toppadding">
                                        <td colspan="7">
                                            <strong>{{'label.heading.charges' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="graybg" ng-show="charges.length > 0">
                                        <th colspan="2">{{'label.heading.name' | translate}}</th>
                                        <th>{{'label.heading.type' | translate}}</th>
                                        <th colspan="2">{{'label.heading.amount' | translate}}</th>
                                        <th>{{'label.heading.collectedon' | translate}}</th>
                                        <th>{{'label.heading.date' | translate}}</th>
                                    </tr>
                                    <tr ng-repeat="charge in charges" ng-show="charges.length>0">
                                        <td colspan="2">{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                        <td>{{charge.chargeCalculationType.value | translate }}</td>
                                        <td colspan="2">{{charge.amount}}</td>
                                        <td>{{charge.chargeTimeType.value | translate }}</td>
                                        <td>{{charge.dueDate | DateFormat}}</td>
                                    </tr>
                                    <tr class="graybg" ng-show="loanaccountinfo.overdueCharges.length>0">
                                        <th colspan="2">{{'label.heading.name' | translate}}</th>
                                        <th>{{'label.heading.type' | translate}}</th>
                                        <th colspan="2">{{'label.heading.amount' | translate}}</th>
                                        <th colspan="2">{{'label.heading.collectedon' | translate}}</th>
                                    </tr>
                                    <tr ng-repeat="charge in loanaccountinfo.overdueCharges">
                                        <td colspan="2">{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                        <td>{{charge.chargeCalculationType.value | translate }}</td>
                                        <td colspan="2">{{charge.amount | FormatNumber}}</td>
                                        <td>{{charge.chargeTimeType.value | translate }}</td>
                                    </tr>
                                </table>
                                <br>
                                <table width="100%" ng-repeat="datatable in datatables">
                                    <tr class="bottomborder toppadding">
                                        <td colspan="7">
                                            <strong>{{datatable.registeredTableName}}</strong>
                                        </td>
                                    </tr>
                                    <tr ng-repeat="columnHeader in datatable.columnHeaderData">
                                        <td colspan="6">{{ columnHeader.columnName | prettifyDataTableColumn }}</td>
                                        <td
                                            ng-hide="fieldType(columnHeader.columnDisplayType) == 'DATETIME' || fieldType(columnHeader.columnDisplayType) == 'DATE'">
                                            {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]}}
                                        </td>
                                        <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'">
                                            {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date | DateFormat}}
                                            {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time }}
                                        </td>
                                        <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'">
                                            {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName] | DateFormat}}
                                        </td>
                                    </tr>
                                </table>
                                <md-step-actions layout="row">
                                    <div flex layout="row" layout-align="center top">
                                        <md-button id="cancel" type="reset" class="md-raised"
                                            ng-click="cancel()">{{'label.button.cancel' | translate}}</md-button>
                                        <md-button id="save" class="md-raised md-primary" ng-click="submit()" 
                                            has-permission='CREATE_SAVINGSACCOUNT'>{{'label.button.save' | translate }}
                                        </md-button>
                                    </div>
                                </md-step-actions>  
                            </fieldset>
                            <md-divider></md-divider>
                            <md-step-actions layout="row">
                                <div flex layout="row" layout-align="begin top">
                                    <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                        <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                    </md-button>
                                </div>
                            </md-step-actions>  
                        </form>
                    </md-step-body>
                </md-step>
            </md-steppers>
        </md-card>
    </md-content>
</div>