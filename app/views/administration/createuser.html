<div class="content-container">
	<ul class="breadcrumb">
		<li><a href="#!/users">{{'label.anchor.users' | translate}}</a></li>
		<li class="active">{{'label.anchor.createuser' | translate}}</li>
	</ul>
	<form name="createuserform" novalidate="" class="card form-horizontal well" ng-controller="CreateUserController"
		ng-submit="submit()">
		<api-validate></api-validate>
		<fieldset>
			<legend>{{'label.heading.createuser' | translate}}</legend>
			<div class="form-group">
				<label class="control-label col-sm-3" for="username">{{'label.input.username' | translate}}<span
						class="required">*</span></label>

				<div class="col-sm-3">
					<input type="text" id="username" name="username" ng-model="formData.username" class="form-control"
						required late-Validate />
					<form-validate valattributeform="createuserform" valattribute="username" />
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-3" for="firstname">{{'label.input.firstname' | translate}}<span
						class="required">*</span></label>

				<div class="col-sm-3">
					<input type="text" id="firstname" name="firstname" ng-model="formData.firstname"
						class="form-control uppercase" required ng-pattern="/(^[A-z])[A-z.'-]*/" late-Validate />
				</div>
				<div class="col-sm-3">
					<span ng-show="createuserform.firstname.$invalid && createuserform.firstname.$dirty">
						<small class="error required" ng-show="createuserform.firstname.$error.pattern">
							{{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
						</small>
					</span>
					<form-validate valattributeform="createuserform" valattribute="firstname" />
				</div>
			</div>
			
			<div class="form-group">
				<label class="control-label col-sm-3" for="lastname">{{'label.input.lastname' | translate}}<span
						class="required">*</span></label>

				<div class="col-sm-3">
					<input type="text" id="lastname" name="lastname" ng-model="formData.lastname" class="form-control uppercase"
						required ng-pattern="/(^[A-z])[A-z.'-]*/" late-Validate />

					<span ng-show="createuserform.lastname.$invalid && createuserform.lastname.$dirty">
						<small class="error required" ng-show="createuserform.lastname.$error.pattern">
							{{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
						</small>
					</span>
					<form-validate valattributeform="createuserform" valattribute="lastname" />
				</div>

				<label class="control-label col-sm-3" for="surname">{{'label.input.surname' | translate}}</label>

				<div class="col-sm-3">
					<input type="text" id="surname" name="surname" ng-model="formData.surname" class="form-control uppercase"
						ng-pattern="/(^[A-z])[A-z.'-]*/" />
					<form-validate valattributeform="createuserform" valattribute="surname" />
				</div>
			</div>

			<div class="form-group">
				<label class="control-label col-sm-3" for="phone">{{'label.input.mobilenumber' | translate}}<span
						class="required">*</span></label>
				<div class="col-sm-3">
					<input type="text" id="phone" name="phone" required ng-model="formData.phone"
						ng-pattern="\d{15}" class="form-control" maxlength="15" />
				</div>
			</div>

			<div data-ng-switch on="formData.sendPasswordToEmail">
				<div data-ng-switch-when="true">
					<div class="form-group">
						<label class="control-label col-sm-3" for="email">{{'label.input.email' | translate}}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="email" id="email" name="email" class="form-control" ng-model="formData.email"
								required late-Validate />
							<form-validate valattributeform="createuserform" valattribute="email" />
						</div>
					</div>
				</div>
				<div data-ng-switch-when="false">
					<div class="form-group" data-ng-show="!formData.sendPasswordToEmail">
						<label class="control-label col-sm-3" for="email1">{{'label.input.email' | translate}}</label>

						<div class="col-sm-3">
							<input type="email" id="email1" name="email1" class="form-control"
								ng-model="formData.email" />
						</div>
					</div>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-3"></div>
				<div class="col-sm-3">
					<md-checkbox ng-model="formData.sendPasswordToEmail">
						{{'label.input.autogeneratepassword' | translate }}
					</md-checkbox>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-3"></div>
				<div class="col-sm-6">
					<md-checkbox ng-model="formData.passwordNeverExpires">
						{{'label.input.overridepasswordexpiry' | translate}}
						<i class="fa fa-question-circle"
							uib-tooltip="{{'label.tooltip.overridepasswordexpiry' | translate}}"
							tooltip-append-to-body="true">
						</i>
					</md-checkbox>
				</div>
			</div>
			<div data-ng-switch on="formData.sendPasswordToEmail">
				<div data-ng-switch-when="false">
					<div class="form-group">
						<label class="control-label col-sm-3" for="password">{{'label.input.password' | translate}}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="password" id="password" name="password" ng-model="formData.password"
								class="form-control" required late-Validate>
							<form-validate valattributeform="createuserform" valattribute="password" />
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-sm-3"
							for="repeatPassword">{{'label.input.repeatpassword' | translate}}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="password" id="repeatPassword" name="repeatPassword" class="form-control"
								ng-model="formData.repeatPassword" required late-Validate>
							<form-validate valattributeform="createuserform" valattribute="repeatPassword" />
						</div>
					</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-3">{{'label.input.office' | translate}}<span
						class="required">*</span></label>

				<div class="col-sm-3">
					<md-select id="officeId" ng-model="formData.officeId" name="officeId" data-ng-change="getOfficeStaff()"
						required placeholder="{{'label.selectone' | translate}}">
						<md-option ng-repeat="office in offices" ng-value="office.id">
						   {{office.name}}
						</md-option>
					</md-select>
				</div>
				<form-validate valattributeform="createuserform" valattribute="officeId" />

				<label class="control-label col-sm-3">{{'label.input.staff' | translate}}</label>
				<div class="col-sm-3">
					<md-select id="staffId" ng-model="formData.staffId" 
						placeholder="{{'label.selectone' | translate}}">
						<md-option ng-repeat="staff in staffs" ng-value="staff.id">
						   {{staff.displayName}}
						</md-option>
					</md-select>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-2 col-md-2"></div>
				<div class="col-sm-3 col-md-3">
					<label class="control-label col-sm-12">{{'label.input.availableroles' | translate }}</label>
					<select id="availableroles" ng-model="available" name="availableroles"
						class="form-control multiselectmin" multiple>
						<option ng-repeat="availablerole in availableRoles" value="{{availablerole.id}}">
							{{availablerole.name}}
						</option>
					</select>
				</div>
				<div class="col-sm-2 col-md-2">
					<button type="button" class="btn btn-sm btn-primary" data-ng-click="addRole()"><i
							class="fa fa-angle-double-right"></i></button>
					<br />
					<button type="button" class="btn btn-sm btn-primary" data-ng-click="removeRole()"><i
							class="fa fa-angle-double-left"></i></button>
				</div>
				<div class="col-sm-3 col-md-3">
					<label class="control-label col-sm-12">{{'label.input.selectedroles' | translate}}<span
							class="required">*</span></label>
					<select id="roles" name="roles" ng-model="selected" class="form-control multiselectmin" multiple>
						<option ng-repeat="availablerole in selectedRoles" value="{{availablerole.id}}" required
							late-validate>
							{{availablerole.name}}
						</option>
					</select>
					<form-validate valattributeform="createuserform" valattribute="roles" />
				</div>
			</div>

			<div class="col-md-12 center">
				<md-button id="cancel" href="#!/users" class="md-raised">{{'label.button.cancel' | translate}}</md-button>
				<md-button id="save" type="submit" class="md-raised md-primary"
					has-permission='CREATE_USER'>{{'label.button.save' | translate}}</md-button>
			</div>
		</fieldset>
	</form>
</div>