<div class="col-md-12" ng-controller="BulkImportDispersionsController" ng-init="refreshImportTable()">
    <ul class="breadcrumb">
        <li><a href="#!/socialbanking">{{'label.anchor.social.banking' | translate}}</a></li>
        <li class="active">{{'label.anchor.importdispersion' | translate}}</li>
    </ul>
    <api-validate></api-validate>

    <div style="margin-top:20px;" class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{'label.input.dispersiontemplate' | translate}}</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <form name="bulkMediaRequests" role="form">
                    <div class="form-group">
                        <div class="col-sm-4">
                            <md-button class='md-raised md-primary' ng-click="downloadTemplate()">
                                <i
                                    class="fa fa-cloud-download"></i>&nbsp;{{'label.button.downloadtemplate' | translate}}
                            </md-button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="form-group">
                <form class="form" role="form">
                    <fieldset>
                        <div class="form-group">
                            <div class="col-sm-9">
                                <choose-file layout="row" flex="80">
                                    <input id="fileInput"  type="file" accept=".xls,.xlsx" class="ng-hide"
                                        ngf-select="onFileSelect($files)">
                                    <md-input-container flex class="md-block">
                                        <input type="text" ng-model="fileName" disabled>
                                        <div class="hint">{{'label.input.selectexcelfile' | translate}}</div>
                                    </md-input-container>
                                    <div>
                                        <md-button id="uploadButton" class="md-fab md-mini">
                                            <md-icon class="material-icons">attach_file</md-icon>
                                        </md-button>
                                    </div>
                                </choose-file>
                            </div>
                            <div class="col-sm-3">
                                <md-button type="button" class="md-raised md-primary" ng-click="upload()">
                                    <i class="fa fa-cloud-upload"></i> {{'label.button.upload' | translate}}
                                </md-button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title col-sm-7">{{'label.heading.requests' | translate}}</h3>
            <md-button type="button" class="md-raised md-primary col-sm-1 pull-left" ng-click="refreshImportTable()">
                <i class="fa fa-repeat"></i> {{'label.button.refresh' | translate}}
            </md-button>
        </div>
        <div class="panel-body">
            <table class="table">
                <thead>
                    <tr class="graybg">
                        <th>{{'label.heading.name' | translate }}</th>
                        <th>{{'label.heading.importtime' | translate }}</th>
                        <th>{{'label.heading.endtime' | translate }}</th>
                        <th>{{'label.heading.completed' | translate }}</th>
                        <th>{{'label.heading.totalrecords' | translate }}</th>
                        <th>{{'label.heading.successcount' | translate }}</th>
                        <th>{{'label.heading.failurecount' | translate }}</th>
                        <th>{{'label.button.download' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="import in imports"
                        ng-class="{'bg-success': import.completed, 'bg-danger': !import.completed}">
                        <td>{{import.name}}</td>
                        <td>{{import.importTime | DateFormat}}</td>
                        <td>{{import.endTime | DateFormat}}</td>
                        <td>{{import.completed}}</td>
                        <td>{{import.totalRecords}}</td>
                        <td>{{import.successCount}}</td>
                        <td>{{import.failureCount}}</td>
                        <td ng-show='import.completed'><a href="{{hostUrl}}{{import.docUrl}}"
                                has-permission='READ_DOCUMENT'><i class="fa fa-cloud-download"></i></a></td>

                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="clearfix"></div>
</div>