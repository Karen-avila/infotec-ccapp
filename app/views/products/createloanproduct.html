<div class="content-container" ng-controller="CreateLoanProductController">
    <ul class="breadcrumb">
        <li><a href="#!/products">{{'label.anchor.products' | translate}}</a></li>
        <li><a href="#!/loanproducts">{{'label.anchor.loanproducts' | translate}}</a></li>
        <li class="active">{{'label.anchor.createloanproduct' | translate}}</li>
    </ul>
    <md-content flex="nogrow" style="margin: 40px auto">
        <md-card>
            <md-steppers md-dynamic-height md-disable-tabs-behavior="true" md-stretch-steppers="always" md-selected="selectedStep">
                <md-step label="{{'label.heading.details' | translate}}">
                    <md-step-body>
                        <form name="Details" novalidate="" class="form-horizontal">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.productname' | translate }}<span
                                                class="required">*</span>
                                            <i class="fa fa-question-circle "
                                                uib-tooltip="{{'label.tooltip.loanproduct.productname' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                    <div class="col-sm-3">
                                        <input type="text" id="name" class="form-control" name="name" ng-model="formData.name"
                                            required late-validate />
                                        <form-validate valattributeform="Details" valattribute="name" />
                                    </div>

                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.product.shortname' | translate }}<span
                                                class="required">*</span>
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loanproduct.shortname' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>

                                    <div class="col-sm-3">
                                        <input type="text" id="shortName" name="shortName" ng-model="formData.shortName"
                                            class="form-control" maxlength="12" required late-validate />
                                        <form-validate valattributeform="Details" valattribute="shortName" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.description' | translate }}
                                            <i class="fa fa-question-circle "
                                                uib-tooltip="{{'label.tooltip.loanproduct.description' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                    <div class="col-sm-9">
                                        <textarea rows="2" class="form-control" ng-model="formData.description"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.startdate' | translate }}
                                            <i class="fa fa-question-circle "
                                                uib-tooltip="{{'label.tooltip.loanproduct.startdate' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                    <div class="col-sm-3">
                                        <md-datepicker id="startDate" ng-model="date.first" min="minDate" max="'2030-06-22'"></md-datepicker>
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.closedate' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loanproduct.closedate' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                    <div class="col-sm-3">
                                        <md-datepicker id="closeDate" ng-model="date.second" min="minDate" max="'2030-06-22'"></md-datepicker>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label class="control-label">{{'label.input.fundsource' | translate }}
                                            <i class="fa fa-question-circle "
                                                uib-tooltip="{{'label.tooltip.loanproduct.fund' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                    <div class="col-sm-3">
                                        <md-select aria-label="fundId" id="fundId" ng-model="formData.fundId" ng-change="loanproduct.fundName = formValue(product.fundOptions,formData.fundId,'id','name')">
                                            <md-select-header>
                                                {{'label.selectfund' | translate}}
                                            </md-select-header>
                                            <md-option ng-repeat="fund in product.fundOptions" ng-value="fund.id">
                                                {{fund.name}}
                                            </md-option>
                                        </md-select>
                                    </div>

                                    <div class="col-sm-1">
                                        <div class="right">
                                                <md-checkbox aria-label="includeInBorrowerCycle" ng-model="formData.includeInBorrowerCycle" ng-true-value="true"
                                                ng-false-value="false"></md-checkbox>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">
                                        <label class="control-label left">{{'label.input.includeinborrowerloancounter' | translate }}
                                            <i class="fa fa-question-circle "
                                                uib-tooltip="{{'label.tooltip.loanproduct.includeborrower' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.currency' | translate}}">
                    <md-step-body>
                        <form name="Currency" novalidate="" class="form-horizontal">
                            <fieldset>
                                <api-validate></api-validate>
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.currency' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.loanproduct.currency' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="currencyCode" id="currencyCode" ng-model="formData.currencyCode" ng-change="loanproduct.currency.name = formValue(product.currencyOptions,formData.currencyCode,'code','name')">
                                            <md-select-header>
                                                {{'label.selectcurrency' | translate}}
                                            </md-select-header>
                                            <md-option ng-repeat="currency in product.currencyOptions" ng-value="currency.code">
                                                {{currency.code}} {{currency.name | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.decimalplaces' | translate
                                }}<span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.decimalplaces' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input type="number" id="digitsAfterDecimal" name="decimalplace" class="form-control"
                                            ng-model="formData.digitsAfterDecimal" required late-validate />
                                        <form-validate valattributeform="Currency" valattribute="decimalplace" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.currencyinmultiplesof' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.currencyinmultiplesof' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input type="number" id="inMultiplesOf" class="form-control" name="multiplesof"
                                            ng-model="formData.inMultiplesOf" required late-validate />
                                        <form-validate valattributeform="Currency" valattribute="multiplesof" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label
                                        class="control-label col-sm-3">{{'label.input.installmentinmultiplesof' | translate }}<span
                                            class="required">*</span>
                                            <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.installmentinmultiplesof' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                        </label>

                                    <div class="col-sm-3">
                                        <input type="number" id="installmentAmountInMultiplesOf" class="form-control"
                                            name="installmentAmountInMultiplesOf" ng-model="formData.installmentAmountInMultiplesOf"
                                            required late-validate number=true />
                                        <form-validate valattributeform="Currency" valattribute="installmentAmountInMultiplesOf" />
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.terms' | translate}}">
                    <md-step-body>
                        <form name="Terms" novalidate="" class="form-horizontal">
                            <fieldset>
                                <api-validate></api-validate>
                                <!--<h3>{{'label.heading.terms' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox aria-label="useBorrowerCycle" ng-model="formData.useBorrowerCycle"></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.useborrowerloancounter' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.useborrowerloancounter' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.principal' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.principal' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-2">
                                        <input id="minPrincipal" placeholder="{{'label.input.minimum' | translate}}" type="number"
                                            class="form-control" ng-model="formData.minPrincipal">
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="number" placeholder="{{'label.input.default' | translate}}" id="principal"
                                            name="principal" class="form-control" ng-model="formData.principal"
                                            required late-validate />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="number" placeholder="{{'label.input.maximum' | translate}}" id="maxPrincipal"
                                            class="form-control" ng-model="formData.maxPrincipal">
                                        <form-validate valattributeform="Terms" valattribute="principal" />
                                    </div>
                                </div>
                                <div class="form-group" ng-show="formData.useBorrowerCycle">
                                    <label class="control-label col-sm-3">{{'label.heading.principalCycleVariations' | translate}}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.loanproduct.principalcyclevariations' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-button  ng-click="addPrincipalVariation()"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate
                                    }}</md-button>
                                    </div>
                                    <div data-ng-show="pvFlag" class="col-md-9 col-sm-offset-2">
                                        <table class="table">
                                            <tr class="graybg">
                                                <th></th>
                                                <th class="center">{{'label.input.cyclenumber' | translate}}</th>
                                                <th class="center">{{'label.input.minimum' | translate}}</th>
                                                <th class="center">{{'label.input.default' | translate}}</th>
                                                <th class="center">{{'label.input.maximum' | translate}}</th>
                                                <th></th>
                                            </tr>
                                            <tr ng-repeat="borrowerCycleVariation in formData.principalVariationsForBorrowerCycle">
                                                <td class="col-sm-3">
                                                    <md-select aria-label="principalValueUsageCondition{{$index}}" id="principalValueUsageCondition{{$index}}" ng-model="borrowerCycleVariation.valueConditionType" 
                                                        ng-change="loanproduct.principalVariationsForBorrowerCycle[$index].code = formValue(product.valueConditionTypeOptions,borrowerCycleVariation.valueConditionType,'id','code')">
                                                        <md-option ng-repeat="valueConditionType in product.valueConditionTypeOptions" ng-value="valueConditionType.id">
                                                        {{valueConditionType.value}}
                                                        </md-option>
                                                    </md-select>

                                                </td>
                                                <td><input id="principalCycleNumber{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.borrowerCycleNumber" />
                                                </td>
                                                <td>
                                                    <input type="hidden" id="principalborrowerCycleId{{$index}}"
                                                        class="form-control" ng-model="borrowerCycleVariation.id" />
                                                    <input type="number" id="minPrincipalPerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.minValue" />
                                                </td>
                                                <td>
                                                    <input id="principalPerCycle{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.defaultValue"
                                                        name="principalPerCycle{{$index}}" />

                                                </td>
                                                <td><input type="number" id="maxPrincipalPerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.maxValue" /></td>
                                                <td><md-button ng-click="deletePrincipalVariation($index)"><i class="fa fa-remove "></i></md-button>

                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.numofrepayments' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.loanproduct.numofrepayments' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-2">
                                        <input id="minNumberOfRepayments" placeholder="{{'label.input.minimum' | translate}}"
                                            type="number" class="form-control" ng-model="formData.minNumberOfRepayments">
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="number" placeholder="{{'label.input.default' | translate}}"
                                            id="numberOfRepayments" name="numofrepayments" class="form-control"
                                            ng-model="formData.numberOfRepayments" required late-validate number=true />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="number" placeholder="{{'label.input.maximum' | translate}}"
                                            id="maxNumberOfRepayments" class="form-control"
                                            ng-model="formData.maxNumberOfRepayments">
                                        <form-validate valattributeform="Terms" valattribute="numofrepayments" />
                                    </div>
                                </div>

                                <div class="form-group" ng-show="formData.useBorrowerCycle">
                                    <label
                                        class="control-label col-sm-3">{{'label.heading.numerOfRepaymentCycleVariations' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.numerofrepaymentcyclevariations' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-button ng-click="addNumberOfRepaymentVariation()"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' |
                                    translate
                                    }}</md-button>
                                    </div>
                                    <div data-ng-show="rvFlag" class="col-md-9 col-sm-offset-2">
                                        <table class="table">
                                            <tr class="graybg">
                                                <th></th>
                                                <th class="center">{{'label.input.cyclenumber' | translate}}</th>
                                                <th class="center">{{'label.input.minimum' | translate}}</th>
                                                <th class="center">{{'label.input.default' | translate}}</th>
                                                <th class="center">{{'label.input.maximum' | translate}}</th>
                                                <th></th>
                                            </tr>
                                            <tr
                                                ng-repeat="borrowerCycleVariation in formData.numberOfRepaymentVariationsForBorrowerCycle">
                                                <td class="col-sm-3">
                                                    <md-select aria-label="repaymentValueUsageCondition{{$index}}" id="repaymentValueUsageCondition{{$index}}" ng-model="borrowerCycleVariation.valueConditionType" 
                                                        ng-change="loanproduct.numberOfRepaymentVariationsForBorrowerCycle[$index].code = formValue(product.valueConditionTypeOptions,borrowerCycleVariation.valueConditionType,'id','code')">
                                                        <md-option ng-repeat="valueConditionType in product.valueConditionTypeOptions" ng-value="valueConditionType.id">
                                                        {{valueConditionType.value | translate}}
                                                        </md-option>
                                                    </md-select>

                                                </td>
                                                <td><input id="repaymentCycleNumber{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.borrowerCycleNumber" />
                                                </td>
                                                <td>
                                                    <input type="hidden" id="repaymentborrowerCycleId{{$index}}"
                                                        class="form-control" ng-model="borrowerCycleVariation.id" />
                                                    <input type="number" id="minrepaymentPerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.minValue" />
                                                </td>
                                                <td>
                                                    <input id="repaymentPerCycle{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.defaultValue" />

                                                </td>
                                                <td><input type="number" id="maxrepaymentPerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.maxValue" /></td>
                                                <td><md-button ng-click="deleterepaymentVariation($index)"><i class="fa fa-remove "></i></md-button>

                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox aria-label="isLinkedToFloatingInterestRates" ng-model="formData.isLinkedToFloatingInterestRates"></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.islinedtofloatinginterestrates' | translate }}
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.islinedtofloatinginterestrates' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>
                                </div>

                                <div class="form-group" ng-show="formData.isLinkedToFloatingInterestRates">
                                    <label class="control-label col-sm-3">{{'label.input.floatinginterestrate' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.loanproduct.floatinginterestrate' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="floatingrateoptions" id="floatingrateoptions" name="floatingrateoptions" ng-model="formData.floatingRatesId" 
                                            ng-change="loanproduct.floatingRateName = formValue(floatingRateOptions,formData.floatingRatesId,'id','name')">
                                            <md-select-header>
                                                {{'label.selectfloatingrateoption' | translate}}
                                            </md-select-header>
                                            <md-option ng-repeat="floatingrateoption in floatingRateOptions" ng-value="floatingrateoption.id">
                                                {{floatingrateoption.name | translate}}
                                            </md-option>
                                        </md-select>
                                    
                                    </div>

                                    <div class="col-sm-3">
                                        <input id="differentialinterest" name="differentialinterest" class="form-control"
                                            type="number" ng-model="formData.interestRateDifferential"
                                            placeholder="{{'label.input.differentialrate' | translate}}" />
                                    </div>

                                    <div class="col-sm-3">
                                        <md-checkbox aria-label="isFloatingInterestRateCalculationAllowed" 
                                            ng-model="formData.isFloatingInterestRateCalculationAllowed"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.isfloatingcalculationallowed' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.isfloatingcalculationallowed' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                </div>

                                <div class="form-group" ng-show="formData.isLinkedToFloatingInterestRates">
                                    <label class="control-label col-sm-3">{{'label.input.floatinginterestrate' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.floatinginterestrate' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-2">
                                        <input id="minValue" name="minValue" class="form-control" type="number"
                                            ng-model="formData.minDifferentialLendingRate"
                                            placeholder="{{'label.input.minfloatinginterestrate' | translate}}" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input id="default" name="default" class="form-control" type="number"
                                            ng-model="formData.defaultDifferentialLendingRate"
                                            placeholder="{{'label.input.defaultfloatinginterestrate' | translate}}" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input id="maxValue" name="maxValue" class="form-control" type="number"
                                            ng-model="formData.maxDifferentialLendingRate"
                                            placeholder="{{'label.input.maxfloatinginterestrate' | translate}}" />
                                    </div>
                                </div>
                                <div class="form-group" ng-show="!formData.isLinkedToFloatingInterestRates">
                                    <label class="control-label col-sm-3">{{'label.input.nominalinterestrate' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.nominalinterestrate' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-2">
                                        <input id="minInterestRatePerPeriod" placeholder="{{'label.input.minimum' | translate}}"
                                            type="number" class="form-control" ng-model="formData.minInterestRatePerPeriod">
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="number" id="interestRatePerPeriod"
                                            placeholder="{{'label.input.default' | translate}}" name="interestRatePerPeriod"
                                            class="form-control" ng-model="formData.interestRatePerPeriod" required late-validate
                                            decimals />
                                    </div>
                                    <div class="col-sm-2">
                                        <input id="maxInterestRatePerPeriod" placeholder="{{'label.input.maximum' | translate}}"
                                            type="number" class="form-control" ng-model="formData.maxInterestRatePerPeriod">
                                    </div>
                                    <div class="col-sm-2">
                                        <md-select aria-label="interestRateFrequencyType" id="interestRateFrequencyType" ng-model="formData.interestRateFrequencyType" 
                                            ng-change="loanproduct.interestRateFrequencyOption.value = formValue(product.interestRateFrequencyTypeOptions,formData.interestRateFrequencyType)">
                                            <md-option ng-value="interestRateFrequencyType.id" ng-repeat="interestRateFrequencyType in product.interestRateFrequencyTypeOptions">
                                                {{interestRateFrequencyType.value | translate}}
                                            </md-option>
                                        </md-select>
                                    
                                        <form-validate valattributeform="Terms" valattribute="interestRatePerPeriod" />
                                    </div>
                                </div>
                                <div class="form-group" ng-show="formData.useBorrowerCycle">
                                    <label
                                        class="control-label col-sm-3">{{'label.heading.interestRateCycleVariations' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.interestratecyclevariations' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-button ng-click="addInterestRateVariation()"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate
                                    }}</md-button>
                                    </div>
                                    <div data-ng-show="irFlag" class="col-md-9 col-sm-offset-2">
                                        <table class="table">
                                            <tr class="graybg">
                                                <th></th>
                                                <th class="center">{{'label.input.cyclenumber' | translate}}</th>
                                                <th class="center">{{'label.input.minimum' | translate}}</th>
                                                <th class="center">{{'label.input.default' | translate}}</th>
                                                <th class="center">{{'label.input.maximum' | translate}}</th>
                                                <th></th>
                                            </tr>
                                            <tr
                                                ng-repeat="borrowerCycleVariation in formData.interestRateVariationsForBorrowerCycle">
                                                <td class="col-sm-3">
                                                    <md-select aria-label="interestRateValueUsageCondition{{$index}}" id="interestRateValueUsageCondition{{$index}}" ng-model="borrowerCycleVariation.valueConditionType" 
                                                        ng-change="loanproduct.interestRateVariationsForBorrowerCycle[$index].code = formValue(product.ValueConditionTypeOptions,borrowerCycleVariation.valueConditionType,'id','code')">
                                                        <md-option ng-value="valueConditionType.id" ng-repeat="valueConditionType in product.valueConditionTypeOptions">
                                                            {{valueConditionType.value | translate}}
                                                        </md-option>
                                                    </md-select>
                                                
                                                </td>
                                                <td><input id="interestRateCycleNumber{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.borrowerCycleNumber" />
                                                </td>
                                                <td>
                                                    <input type="hidden" id="interestRateborrowerCycleId{{$index}}"
                                                        class="input-small" ng-model="borrowerCycleVariation.id" />
                                                    <input type="number" id="mininterestRatePerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.minValue" />
                                                </td>
                                                <td>
                                                    <input id="interestRatePerCycle{{$index}}" type="number" class="form-control"
                                                        ng-model="borrowerCycleVariation.defaultValue"
                                                        name="principalPerCycle{{$index}}" />

                                                </td>
                                                <td><input type="number" id="maxInterestRatePerCycle{{$index}}" class="form-control"
                                                        ng-model="borrowerCycleVariation.maxValue" /></td>
                                                <td><md-button ng-click="deleteInterestRateVariation($index)"><i
                                                            class="fa fa-remove "></i></md-button>

                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.repaidevery' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.repaidevery' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-2">
                                        <input id="repaymentEvery" name="repaymentEvery" class="form-control" type="number"
                                            ng-model="formData.repaymentEvery" required late-validate number=true />
                                    </div>
                                    <div class="col-sm-2">
                                        <md-select aria-label="repaymentFrequencyType id="repaymentFrequencyType" ng-model="formData.repaymentFrequencyType" 
                                            ng-change="loanproduct.repaymentFrequencyOption.value = formValue(product.repaymentFrequencyTypeOptions,formData.repaymentFrequencyType)">
                                            <md-option ng-value="repaymentFrequencyType.id" ng-repeat="repaymentFrequencyType in product.repaymentFrequencyTypeOptions">
                                                {{repaymentFrequencyType.value | translate}}
                                            </md-option>
                                        </md-select>
                                    
                                        <form-validate valattributeform="Terms" valattribute="repaymentEvery" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{
                                'label.input.minimum.days.between.disbursal.and.first.repayment'
                                | translate }}
                                <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.minimum.days.between.disbursal.and.first.repayment' | translate}}"
                                tooltip-append-to-body="true"></i></label>

                                    <div class="col-sm-2">
                                        <input id="minimumDaysBetweenDisbursalAndFirstRepayment" class="form-control" type="number"
                                            ng-model="formData.minimumDaysBetweenDisbursalAndFirstRepayment" late-validate
                                            number=true>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.settings' | translate}}">
                    <md-step-body>                    
                        <form name="Settings" novalidate="" class="form-horizontal">
                            <fieldset>
                                <api-validate></api-validate>
                                <!--<h3>{{'label.heading.settings' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.amortization' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.amortization' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="amortizationType" id="amortizationType" ng-model="formData.amortizationType" 
                                            ng-change="loanproduct.amortizationOption.value = formValue(product.amortizationTypeOptions,formData.amortizationType)">
                                            <md-option ng-value="amortizationType.id" ng-repeat="amortizationType in product.amortizationTypeOptions">
                                                {{amortizationType.value | translate}}
                                            </md-option>
                                        </md-select>
                                        
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.interestmethod' | translate
                                }}<span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.interest' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="interestType id="interestType" ng-model="formData.interestType" 
                                            ng-change="loanproduct.interestOption.value = formValue(product.interestTypeOptions,formData.interestType)">
                                            <md-option ng-value="interestType.id" ng-repeat="interestType in product.interestTypeOptions">
                                                {{interestType.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                </div>
                                <div class="form-group">
                                    <label
                                        class="control-label col-sm-3">{{'label.input.interestcalculationperiod' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.interestcalculationperiod' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="interestCalculationPeriodType" id="interestCalculationPeriodType" ng-model="formData.interestCalculationPeriodType" 
                                            ng-change="loanproduct.interestCalculationPeriodOption.value = formValue(product.interestCalculationPeriodTypeOptions,formData.interestCalculationPeriodType)">
                                            <md-option ng-value="interestCalculationPeriodType.id" ng-repeat=" interestCalculationPeriodType in product.interestCalculationPeriodTypeOptions">
                                                {{interestCalculationPeriodType.value | translate}}
                                            </md-option>
                                        </md-select>
                                        
                                    </div>
                                    <div class="col-sm-1 right" ng-show="formData.interestCalculationPeriodType == 1">
                                        <md-checkbox aria-label="allowPartialPeriodInterestCalcualtion" 
                                            ng-model="formData.allowPartialPeriodInterestCalcualtion"></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-2"
                                        ng-show="formData.interestCalculationPeriodType == 1">{{
                                        'label.input.allowpartialperiodinterestcalcualtion' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.allowpartialperiodinterestcalcualtion' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-1 right">
                                        <md-checkbox ng-model="formData.isEqualAmortization" ng-true-value="true"
                                            aria-label="isEqualAmortization" ng-false-value="false"></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-2">{{'label.input.isequalamortization' | translate }}
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.input.isequalamortization' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.repaymentstrategy' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.repaymentstrategy' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="transactionProcessingStrategyId" id="transactionProcessingStrategyId" ng-model="formData.transactionProcessingStrategyId" 
                                            ng-change="loanproduct.transactionProcessingStrategy.name = formValue(product.transactionProcessingStrategyOptions,formData.transactionProcessingStrategyId,'id','name')">
                                            <md-option ng-value="transactionProcessingStrategy.id" ng-repeat="transactionProcessingStrategy in product.transactionProcessingStrategyOptions">
                                                {{transactionProcessingStrategy.name | translate}}
                                            </md-option>
                                        </md-select>
                                    
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.freeperiods' | translate }}
                                        <i class="fa fa-question-circle " uib-tooltip="{{'label.tooltip.moratorium' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="graceOnPrincipalPayment" class="form-control" name="graceOnPrincipalPayment"
                                            placeholder="{{'label.input.onprincipalpayment' | translate}}" type="number"
                                            ng-model="formData.graceOnPrincipalPayment" late-validate number=true>
                                        <form-validate valattributeform="Settings" valattribute="graceOnPrincipalPayment" />
                                    </div>
                                    <div class="col-sm-3">
                                        <input id="graceOnInterestPayment"
                                            placeholder="{{'label.input.oninterestpayment' | translate}}" type="number"
                                            name="graceOnInterestPayment" class="form-control"
                                            ng-model="formData.graceOnInterestPayment" late-validate number=true>
                                        <form-validate valattributeform="Settings" valattribute="graceOnInterestPayment" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <!--
                                    <label class="control-label col-sm-3">{{'label.input.interestfreeperiod' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.interestfreeperiod' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="graceOnInterestCharged" type="number" name="graceOnInterestCharged"
                                            class="form-control" ng-model="formData.graceOnInterestCharged" late-validate
                                            number=true>
                                        <form-validate valattributeform="Settings" valattribute="graceOnInterestCharged" />
                                    </div> -->
                                    <label
                                        class="control-label col-sm-3">{{'label.input.arearstolerance' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.arearstolerance' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="inArrearsTolerance" type="number" name="inArrearsTolerance" class="form-control"
                                            ng-model="formData.inArrearsTolerance" late-validate number=true>
                                        <form-validate valattributeform="Settings" valattribute="inArrearsTolerance" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.daysinyears' | translate }}<span
                                            class="required">*</span>
                                        <i class="fa fa-question-circle " uib-tooltip="{{'label.tooltip.daysinyear' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="daysInYearType" id="daysInYearType" ng-model="formData.daysInYearType" 
                                            ng-change="loanproduct.daysInYearOption.value = formValue(product.daysInYearTypeOptions,formData.daysInYearType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.daysInYearTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.daysinmonth' |
                                translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle " uib-tooltip="{{'label.tooltip.daysinmonth' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="daysInMonthType" id="daysInMonthType" ng-model="formData.daysInMonthType" 
                                            ng-change="loanproduct.daysInMonthOption.value = formValue(product.daysInMonthTypeOptions,formData.daysInMonthType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.daysInMonthTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="formData.canDefineInstallmentAmount" aria-label="canDefineInstallmentAmount"></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-6">{{'label.input.candefineinstallmentamount' | translate }}
                                        <i class="fa fa-question-circle " uib-tooltip="{{'label.tooltip.input.candefineinstallmentamount' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-9">{{'label.input.no.of.overdue.days.to.move.loan.into.arrears'
                                | translate }}
                                        <i class="fa fa-question-circle " uib-tooltip="{{'label.tooltip.numberofdays' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="graceOnArrearsAgeing" class="form-control" name="graceOnArrearsAgeing"
                                            placeholder="{{'label.input.onduedate' | translate}}" type="numbe"
                                            ng-model="formData.graceOnArrearsAgeing" late-validate number=true>
                                        <form-validate valattributeform="Settings" valattribute="graceOnArrearsAgeing" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-9">{{'label.input.no.of.overdue.days.to.change.loan.into.npa'
                                | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.maxNumberofDays' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="overdueDaysForNPA" class="form-control" name="overdueDaysForNPA"
                                            placeholder="{{'label.input.overduedaysfornpa' | translate}}" type="numbe"
                                            ng-model="formData.overdueDaysForNPA" late-validate number=true>
                                        <form-validate valattributeform="Settings" valattribute="overdueDaysForNPA" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox id="accountMovesOutOfNPAOnlyOnArrearsCompletion" aria-label="accountMovesOutOfNPAOnlyOnArrearsCompletion"
                                            ng-model="formData.accountMovesOutOfNPAOnlyOnArrearsCompletion"></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-9">{{'label.input.loan.account.moves.out.of.npa.only.on.arrears.completion'
                                        | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                        uib-tooltip="{{'label.tooltip.loan.account.moves.out.of.npa.only.on.arrears.completion' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>        
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-9">{{'label.input.thresholdforlastinstallment' | translate}}
                                        <i class="fa fa-question-circle"
                                        uib-tooltip="{{'label.tooltip.linput.thresholdforlastinstallment' | translate}}"
                                        tooltip-append-to-body="true"></i>  
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="principalThresholdForLastInstallment" type="numbe"
                                            name="principalThresholdForLastInstallment" class="form-control"
                                            ng-model="formData.principalThresholdForLastInstallment" late-validate number=true>
                                        <form-validate valattributeform="Settings"
                                            valattribute="principalThresholdForLastInstallment" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="formData.allowVariableInstallments" aria-label="allowVariableInstallments"></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.isvariableinstallmentsallowed' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.loanproduct.variableinstallments' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                </div>

                                <div class="form-group" ng-show="formData.allowVariableInstallments">
                                    <label class="control-label col-sm-3">{{'label.input.variableinstallments' | translate }}
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="minimumgap" name="minimumgap" class="form-control" type="numbe"
                                            ng-model="formData.minimumGap" placeholder="{{'label.input.minimumgap' | translate}}"/>
                                    </div>

                                    <div class="col-sm-3">
                                        <input id="maximumgap" name="maximumgap" class="form-control" type="number"
                                            ng-model="formData.maximumGap" placeholder="{{'label.input.maximumgap' | translate}}"/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox name="canUseForTopup" ng-model="formData.canUseForTopup" aria-label="canUseForTopup"></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-9">{{'label.input.canUseForTopup' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.loanproduct.canUseForTopup' | translate}}"
                                            tooltip-append-to-body="true"></i>                        
                                    </label>
                                </div>

                                <h3>{{'label.heading.interestRecalculation' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="formData.isInterestRecalculationEnabled"></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-6">{{'label.input.recalculateinterest' | translate }}
                                        <i class="fa fa-question-circle"
                                        uib-tooltip="{{'label.tooltip.input.recalculateinterest' | translate}}"
                                        tooltip-append-to-body="true"></i> 
                                    </label>
                                </div>
                                <div class="form-group" data-ng-show="formData.isInterestRecalculationEnabled">
                                    <label class="control-label col-sm-3">{{'label.input.preclose.interest.calculation.strategy'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.precloseinterestcalculationstrategy' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="preClosureInterestCalculationStrategy" id="preClosureInterestCalculationStrategy" ng-model="formData.preClosureInterestCalculationStrategy" 
                                            ng-change="loanproduct.interestRecalculationData.preClosureInterestCalculationStrategyCode.code = formValue(product.preClosureInterestCalculationStrategyOptions,formData.preClosureInterestCalculationStrategy,'id','code')">
                                            <md-option ng-value="type.id" ng-repeat="type in product.preClosureInterestCalculationStrategyOptions">
                                                {{type.code | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.interest.recalculation.reschdule.strategy'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.advancepayments' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="rescheduleStrategyMethod" id="rescheduleStrategyMethod" ng-model="formData.rescheduleStrategyMethod" 
                                            ng-change="loanproduct.interestRecalculationData.rescheduleStrategyType.value = formValue(product.rescheduleStrategyTypeOptions,formData.rescheduleStrategyMethod)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.rescheduleStrategyTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                </div>

                                <div class="form-group" data-ng-show="formData.isInterestRecalculationEnabled">
                                    <label class="control-label col-sm-3">{{'label.input.interest.recalculation.compounding.method'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.interestrecalculation' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="interestRecalculationCompoundingMethod" id="interestRecalculationCompoundingMethod" ng-model="formData.interestRecalculationCompoundingMethod" 
                                            ng-change="loanproduct.interestRecalculationData.interestRecalculationCompoundingType.value = formValue(product.interestRecalculationCompoundingTypeOptions,formData.interestRecalculationCompoundingMethod)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestRecalculationCompoundingTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>
                                </div>

                                <div class="form-group"
                                    data-ng-show="formData.isInterestRecalculationEnabled && formData.interestRecalculationCompoundingMethod != 0">
                                    <label class="control-label col-sm-3">{{'label.input.frequency.for.compounding'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.frequencytocompounding' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="recalculationCompoundingFrequencyType" id="recalculationCompoundingFrequencyType" ng-model="formData.recalculationCompoundingFrequencyType" ng-change="loanproduct.interestRecalculationData.interestRecalculationFrequencyType.value = formValue(product.interestRecalculationFrequencyTypeOptions,formData.recalculationCompoundingFrequencyType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestRecalculationFrequencyTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>

                                    </div>

                                    <div>
                                        <div class="col-sm-3" data-ng-show="formData.recalculationCompoundingFrequencyType == 4">
                                        <md-select aria-label="recalculationCompoundingFrequencyNthDayType" id="recalculationCompoundingFrequencyNthDayType" ng-model="formData.recalculationCompoundingFrequencyNthDayType" 
                                            ng-change="loanproduct.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value = formValue(product.interestRecalculationNthDayTypeOptions,formData.recalculationCompoundingFrequencyNthDayType)">
                                            <md-option ng-value="recalculationCompoundingFrequencyNthDayType.id" ng-repeat="recalculationCompoundingFrequencyNthDayType in product.interestRecalculationNthDayTypeOptions">
                                                {{recalculationCompoundingFrequencyNthDayType.value | translate}}
                                            </md-option>
                                            <md-option ng-value="onDay">On day</md-option>
                                        </md-select>
                                            &nbsp;
                                        </div>
                                        <div class="col-sm-3"
                                            data-ng-show="(formData.recalculationCompoundingFrequencyType == 4 && formData.recalculationCompoundingFrequencyNthDayType != -2) || formData.recalculationCompoundingFrequencyType == 3">
                                            <md-select aria-label="recalculationCompoundingFrequencyDayOfWeekType" id="recalculationCompoundingFrequencyDayOfWeekType" ng-model="formData.recalculationCompoundingFrequencyDayOfWeekType" 
                                                ng-change="loanproduct.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value = formValue(product.interestRecalculationDayOfWeekTypeOptions,formData.recalculationCompoundingFrequencyDayOfWeekType)">
                                                <md-option ng-value="recalculationCompoundingFrequencyDayOfWeekType.id" ng-repeat="recalculationCompoundingFrequencyDayOfWeekType in product.interestRecalculationDayOfWeekTypeOptions">
                                                    {{recalculationCompoundingFrequencyDayOfWeekType.value | translate}}
                                                </md-option>
                                                <md-option ng-value="DAY">DAY</md-option>
                                            </md-select>
                                        &nbsp;
                                        </div>
                                        <div class="col-sm-3"
                                            data-ng-show="formData.recalculationCompoundingFrequencyType == 4 && formData.recalculationCompoundingFrequencyNthDayType == -2">
                                            <md-select aria-label="recalculationCompoundingFrequencyOnDayType" id="recalculationCompoundingFrequencyOnDayType" ng-model="formData.recalculationCompoundingFrequencyOnDayType" 
                                                ng-change="loanproduct.interestRecalculationData.recalculationCompoundingFrequencyOnDay.value = formValue(interestRecalculationOnDayTypeOptions,formData.recalculationCompoundingFrequencyOnDayType)">
                                                <md-option ng-value="recalculationCompoundingFrequencyOnDayType" ng-repeat="recalculationCompoundingFrequencyOnDayType in interestRecalculationOnDayTypeOptions">
                                                    {{recalculationCompoundingFrequencyOnDayType}}
                                                </md-option>
                                            </md-select>

                                        &nbsp;
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" data-ng-show="formData.isInterestRecalculationEnabled && formData.interestRecalculationCompoundingMethod != 0
                    && formData.recalculationCompoundingFrequencyType != 1">
                                    <label class="control-label col-sm-3">{{'label.input.frequenc.interval.for.compounding'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.frequencycompoundinginterval' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="recalculationCompoundingFrequencyInterval" type="number" class="form-control"
                                            ng-model="formData.recalculationCompoundingFrequencyInterval">
                                    </div>
                                </div>
                                <div class="form-group" data-ng-show="formData.isInterestRecalculationEnabled">
                                    <label class="control-label col-sm-3">{{'label.input.frequency.for.recalculte.outstanding.principal'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.frequencytorecalculate' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <md-select aria-label="recalculationRestFrequencyType" id="recalculationRestFrequencyType" ng-model="formData.recalculationRestFrequencyType" 
                                            ng-change="loanproduct.interestRecalculationData.recalculationRestFrequencyType.value = formValue(product.interestRecalculationFrequencyTypeOptions,formData.recalculationRestFrequencyType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestRecalculationFrequencyTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <div>
                                        <div class="col-sm-3" data-ng-show="formData.recalculationRestFrequencyType == 4">
                                            <md-select aria-label="recalculationRestFrequencyNthDayType" id="recalculationRestFrequencyNthDayType" ng-model="formData.recalculationRestFrequencyNthDayType" 
                                                ng-change="loanproduct.interestRecalculationData.recalculationRestFrequencyNthDay.value = formValue(product.interestRecalculationNthDayTypeOptions,formData.recalculationRestFrequencyNthDayType)">
                                                <md-option ng-value="recalculationRestFrequencyNthDayType.id" ng-repeat="recalculationRestFrequencyNthDayType in product.interestRecalculationNthDayTypeOptions">
                                                    {{recalculationRestFrequencyNthDayType.value | translate}}
                                                </md-option>
                                            </md-select>
                                            &nbsp;
                                        </div>
                                        <div class="col-sm-3"
                                            data-ng-show="(formData.recalculationRestFrequencyType == 4 && formData.recalculationRestFrequencyNthDayType != -2) || formData.recalculationRestFrequencyType == 3">
                                            <md-select id="recalculationRestFrequencyDayOfWeekType" ng-model="formData.recalculationRestFrequencyDayOfWeekType" ng-change="loanproduct.interestRecalculationData.recalculationRestFrequencyWeekday.value = formValue(product.interestRecalculationDayOfWeekTypeOptions,formData.recalculationRestFrequencyDayOfWeekType)">
                                                <md-option ng-value="recalculationRestFrequencyDayOfWeekType.id" ng-repeat="recalculationRestFrequencyDayOfWeekType in product.interestRecalculationDayOfWeekTypeOptions">
                                                    {{recalculationRestFrequencyDayOfWeekType.value | translate}}
                                                </md-option>
                                            </md-select>
                                        &nbsp;
                                        </div>
                                        <div class="col-sm-3"
                                            data-ng-show="formData.recalculationRestFrequencyType == 4 && formData.recalculationRestFrequencyNthDayType == -2">
                                            <md-select id="recalculationRestFrequencyOnDayType" ng-model="formData.recalculationRestFrequencyOnDayType" ng-change="loanproduct.interestRecalculationData.recalculationRestFrequencyOnDay.value = formData.recalculationRestFrequencyOnDayType">
                                                <md-option ng-value="recalculationRestFrequencyOnDayType" ng-repeat="recalculationRestFrequencyOnDayType in interestRecalculationOnDayTypeOptions">
                                                    {{recalculationRestFrequencyOnDayType.value | translate}}
                                                </md-option>
                                            </md-select>
                                            &nbsp;
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group"
                                    data-ng-show="formData.isInterestRecalculationEnabled && formData.recalculationRestFrequencyType != 1">
                                    <label class="control-label col-sm-3">{{'label.input.frequenc.interval.for.recalculte.outstanding.principal'
                                | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.frequencyInterval' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="recalculationRestFrequencyInterval" type="number" class="form-control"
                                            ng-model="formData.recalculationRestFrequencyInterval">
                                    </div>
                                </div>

                                <div class="form-group" data-ng-show="formData.isInterestRecalculationEnabled">
                                    <div class="col-sm-3 right">
                                        <md-checkbox id="isArrearsBasedOnOriginalSchedule"
                                            ng-model="formData.isArrearsBasedOnOriginalSchedule"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-6">{{'label.input.arrearsbasedonoriginalschedule'
                                        | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.arrearsbasedonoriginalschedule' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>
                                </div>
                                <h3>{{'label.heading.gauranteeRequirements' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="formData.holdGuaranteeFunds" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.holdguaranteefunds' | translate }}
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.input.holdguaranteefunds' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>
                                </div>
                                <div class="form-group" data-ng-show="formData.holdGuaranteeFunds">
                                    <label class="control-label col-sm-3">{{'label.input.mandatory.guarantee'
                                        | translate }}<span class="required">*</span>
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.mandatory.guarantee' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="mandatoryGuarantee" type="number" class="form-control"
                                            ng-model="formData.mandatoryGuarantee" />
                                    </div>
                                </div>
                                <div class="form-group" data-ng-show="formData.holdGuaranteeFunds">
                                    <label class="control-label col-sm-3">{{'label.input.minimum.guarantee.from.own.funds'
                                        | translate }}
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.minimum.guarantee.from.own.funds' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input id="minimumGuaranteeFromOwnFunds" type="number" class="form-control"
                                            ng-model="formData.minimumGuaranteeFromOwnFunds" />
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.minimum.guarantee.from.guarantor'
                                        | translate }}
                                        <i class="fa fa-question-circle "
                                        uib-tooltip="{{'label.tooltip.minimum.guarantee.from.guarantor' | translate}}"
                                        tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3"><input id="minimumGuaranteeFromGuarantor" type="number" class="form-control"
                                            ng-model="formData.minimumGuaranteeFromGuarantor" />
                                    </div>
                                </div>
                                <h3>{{'label.heading.tranchedetails' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="formData.multiDisburseLoan" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.multidisburseloan' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.isMultiDisburseLoan' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                </div>
                                <div class="form-group" ng-show="formData.multiDisburseLoan">
                                    <label class="control-label col-sm-3">{{'label.input.maxtranchecount' | translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.maxtranchecount' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input type="number" class="form-control" id="maxTrancheCount" name="maxTrancheCount"
                                            ng-model="formData.maxTrancheCount" />
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.outstandingloanbalance' |
                                translate }}
                                        <i class="fa fa-question-circle "
                                            uib-tooltip="{{'label.tooltip.maxAllowedOutstandingBalance' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div class="col-sm-3">
                                        <input type="number" class="form-control" id="outstandingLoanBalance"
                                            name="outstandingLoanBalance" ng-model="formData.outstandingLoanBalance" />
                                    </div>
                                </div>
                                <h3>{{'label.heading.configurableAttributes' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="allowAttributeConfiguration"
                                            ng-change="setAttributeValues()" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-6">{{'label.input.isConfigLoanAttributes' | translate
                                    }}</label>
                                </div>
                                <div class="form-group" ng-show="allowAttributeConfiguration">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="amortization" ></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-3">{{'label.input.amortization' | translate }}</label>
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="interestMethod" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-3">{{'label.input.interestmethod' | translate }}</label>
                                </div>
                                <div class="form-group" ng-show="allowAttributeConfiguration">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="transactionProcessingStrategy" ></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-3">{{'label.input.repaymentstrategy' | translate }}</label>
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="interestCalcPeriod" ></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-3">{{'label.input.interestcalculationperiod' | translate }}</label>
                                </div>
                                <div class="form-group" ng-show="allowAttributeConfiguration">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="arrearsTolerance" ></md-checkbox>
                                    </div>
                                    <label
                                        class="control-label left col-sm-3">{{'label.input.arearstolerance' | translate }}</label>
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="repaymentFrequency" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-3">{{'label.input.repaidevery' | translate }}</label>
                                </div>
                                <div class="form-group" ng-show="allowAttributeConfiguration">
                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="graceOnPrincipalAndInterest" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-3">{{'label.input.grace' | translate }}</label>

                                    <div class="col-sm-3 right">
                                        <md-checkbox ng-model="graceOnArrearsAging" ></md-checkbox>
                                    </div>
                                    <label class="control-label left col-sm-3">{{'label.input.no.of.overdue.days.to.move.loan.into.arrears' |
                                translate
                                }}</label>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.charges' | translate}}">
                    <md-step-body>
                        <form name="Charges" novalidate="" class=" form-horizontal " ng-submit="goNext(Charges)">
                            <fieldset>
                                <api-validate></api-validate>
                                <h3>{{'label.heading.charges' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <md-select id="chargeId" ng-model="chargeId">
                                            <md-option ng-value="charge.id" ng-repeat="charge in product.chargeOptions">
                                                {{charge.name}}
                                            </md-option>
                                        </md-select>
                                    
                                    </div>
                                    <div class="col-sm-1">
                                        <md-button ng-click="chargeSelected(chargeId)"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}
                                        </md-button>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <table data-ng-show="chargeFlag" class="table width100">
                                        <tr class="graybg">
                                            <th>{{'label.heading.name' | translate}}</th>
                                            <th>{{'label.heading.type' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.collectedon' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.date' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.actions' | translate}}</th>
                                        </tr>
                                        <tr ng-repeat="charge in charges" ng-hide="charge.penalty">
                                            <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                            <td>{{'charge.type.' + charge.chargeCalculationType.value | translate}}</td>
                                            <td></td>
                                            <td>{{charge.amount | FormatNumber}}</td>
                                            <td></td>
                                            <td>{{charge.chargeTimeType.value | translate}}</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><md-button ng-click="deleteCharge($index)"><i class="fa fa-times-circle fa-2x"></i></md-button></td>
                                        </tr>
                                    </table>
                                </div>
                                <h3>{{'label.heading.overduepenalitycharge' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <md-select id="penalityId" ng-model="penalityId" ng-change="">
                                            <md-option ng-value="penality.id" ng-repeat="penality in overduecharges">
                                                {{penality.name}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <div class="col-sm-1">
                                        <md-button 
                                            ng-click="chargeSelected(penalityId)"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}
                                        </md-button>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <table data-ng-show="penalityFlag" class="table width100">
                                        <tr class="graybg">
                                            <th>{{'label.heading.name' | translate}}</th>
                                            <th>{{'label.heading.type' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.collectedon' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.date' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.actions' | translate}}</th>
                                        </tr>
                                        <tr ng-repeat="charge in charges" ng-show="charge.penalty">
                                            <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                            <td>{{'charge.type.' + charge.chargeCalculationType.value | translate}}</td>
                                            <td></td>
                                            <td>{{charge.amount | FormatNumber}}</td>
                                            <td></td>
                                            <td>{{charge.chargeTimeType.value | translate}}</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><md-button ng-click="deleteCharge($index)"><i class="fa fa-times-circle fa-2x"></i></md-button></td>
                                        </tr>
                                    </table>
                                </div>
                                <h3>{{'label.heading.taxesoninterest' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <md-select id="taxGroupId" ng-model="taxGroupId">
                                            <md-option ng-value="group.id" ng-repeat="group in taxGroups">
                                                {{group.name}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <div class="col-sm-1">
                                        <md-button 
                                            ng-click="taxGroupSelected(taxGroupId)"><i
                                            class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}
                                        </md-button>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <table class="table width100">
                                        <tr class="graybg">
                                            <th>{{'label.heading.name' | translate}}</th>
                                            <th>{{'label.heading.percentage' | translate}}</th>
                                            <th>{{'label.heading.startdate' | translate}}</th>
                                            <th>{{'label.heading.actions' | translate}}</th>
                                        </tr>
                                        <tr ng-repeat="component in taxComponents">
                                            <td>{{component.name}}</td>
                                            <td>{{component.percentage | FormatNumber}} %</td>
                                            <td>{{component.startDate | DateFormat}}</td>
                                            <td><md-button ng-click="deleteTaxComponent($index)"><i
                                                        class="fa fa-times-circle fa-2x"></i></md-button></td>
                                        </tr>
                                    </table>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.accounting' | translate}}">
                    <md-step-body>
                        <form name="Accounting" novalidate="" class=" form-horizontal " ng-submit="goNext(Accounting)">
                            <fieldset>
                                <api-validate></api-validate>
                                <!--<h3>{{'label.heading.accounting' | translate }}</h3>-->
                                <hr>
                                <md-radio-group ng-model="formData.accountingRule">
                                    <div class="radio-inline">
                                        <label>
                                            <md-radio-button class="md-primary"
                                                value="1">{{'label.input.accounting.none' | translate}}</md-radio-button>
                                        </label>
                                    </div>
                                    <div class="radio-inline">
                                        <label>
                                            <md-radio-button class="md-primary"
                                                value="2" >{{'label.input.cash' | translate}}</md-radio-button>
                                        </label>
                                    </div>
                                    <div class="radio-inline">
                                        <label>
                                            <md-radio-button class="md-primary" value="3">{{'label.input.periodicaccrual' |
                                    translate}}</md-radio-button>
                                        </label>
                                    </div>
                                    <div class="radio-inline">
                                        <label>
                                            <md-radio-button class="md-primary" value="4">{{'label.input.upfrontaccrual' |
                                    translate}}</md-radio-button>
                                        </label>
                                    </div>
                                </md-radio-group>
                                <hr>
                                <div class="col-md-12" ng-show="isAccountingEnabled()">
                                    <div class="form-group">
                                        <h4>{{"label.heading.assets" | translate}}</h4>
                                        <label class="control-label col-sm-2">{{'label.input.loanportfolio' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loanportfolio' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="loanPortfolioAccountId" ng-model="formData.loanPortfolioAccountId" ng-change="loanproduct.accountingMappings.loanPortfolioAccount.name = formValue(assetAccountOptions,formData.loanPortfolioAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.accounting.assets.ordinary.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.accounting.assets.ordinary.interest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="assetOrdinaryInterestAccountId" ng-model="formData.assetOrdinaryInterestAccountId" ng-change="loanproduct.accountingMappings.assetOrdinaryInterestAccount.name = formValue(assetAccountOptions,formData.assetOrdinaryInterestAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">{{'label.input.accounting.assets.npa.loan.portfolio' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.accounting.assets.npa.loan.portfolio' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="assetNPALoanPortfolioAccountId" ng-model="formData.assetNPALoanPortfolioAccountId" ng-change="loanproduct.accountingMappings.assetNPALoanPortfolioAccount.name = formValue(assetAccountOptions,formData.assetNPALoanPortfolioAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.accounting.assets.npa.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.accounting.assets.npa.interest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="assetNPAInterestAccountId" ng-model="formData.assetNPAInterestAccountId" ng-change="loanproduct.accountingMappings.assetNPAInterestAccount.name = formValue(assetAccountOptions,formData.assetNPAInterestAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">{{'label.input.accounting.assets.overdue.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.accounting.assets.overdue.interest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="assetOverdueInterestAccountId" ng-model="formData.assetOverdueInterestAccountId" ng-change="loanproduct.accountingMappings.assetOverdueInterestAccount.name = formValue(assetAccountOptions,formData.assetOverdueInterestAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-show="isAccrualAccountingEnabled()">
                                        <label class="control-label col-sm-2">{{'label.input.receivableinterest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.receivableinterest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="receivableInterestAccountId" ng-model="formData.receivableInterestAccountId" ng-change="loanproduct.accountingMappings.receivableInterestAccount.name = formValue(assetAccountOptions,formData.receivableInterestAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.receivablefees' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.receivablefees' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="receivableFeeAccountId" ng-model="formData.receivableFeeAccountId" ng-change="loanproduct.accountingMappings.receivableFeeAccount.name = formValue(assetAccountOptions,formData.receivableFeeAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-show="isAccrualAccountingEnabled()">
                                        <label class="control-label col-sm-2">{{'label.input.receivablepenalties' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.receivablepenalties' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="receivablePenaltyAccountId" ng-model="formData.receivablePenaltyAccountId" ng-change="loanproduct.accountingMappings.receivablePenaltyAccount.name = formValue(assetAccountOptions,formData.receivablePenaltyAccountId,'id','name')">
                                                <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                    {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.liabilities" | translate}}</h4>
                                        <label class="control-label col-sm-2">{{'label.input.fundsource'| translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.fundsource' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="fundSourceAccountId" ng-model="formData.fundSourceAccountId" ng-change="loanproduct.accountingMappings.fundSourceAccount.name = formValue(liabilityAccountOptions,formData.fundSourceAccountId,'id','name')">
                                                <md-option ng-value="liabilityAccount.id" ng-repeat="liabilityAccount in liabilityAccountOptions">
                                                    {{(liabilityAccount.glCode + " " + liabilityAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.overpaymentliability' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.overpaymentliability' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="overpaymentLiabilityAccountId" ng-model="formData.overpaymentLiabilityAccountId" ng-change="loanproduct.accountingMappings.overpaymentLiabilityAccount.name = formValue(liabilityAccountOptions,formData.overpaymentLiabilityAccountId,'id','name')">
                                                <md-option ng-value="liabilityAccount.id" ng-repeat="liabilityAccount in liabilityAccountOptions">
                                                    {{(liabilityAccount.glCode + " " + liabilityAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.income" | translate}}</h4>
                                        <label class="control-label col-sm-2">{{'label.input.incomefrominterest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefrominterest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="interestOnLoanAccountId" ng-model="formData.interestOnLoanAccountId" ng-change="loanproduct.accountingMappings.interestOnLoanAccount.name = formValue(incomeAccountOptions,formData.interestOnLoanAccountId,'id','name')">
                                                <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                                    {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.incomefromfees' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefromfees' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="incomeFromFeeAccountId" ng-model="formData.incomeFromFeeAccountId" ng-change="loanproduct.accountingMappings.incomeFromFeeAccount.name = formValue(incomeAccountOptions,formData.incomeFromFeeAccountId,'id','name')">
                                                <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                                    {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">{{'label.input.incomefrompenalties' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefrompenalties' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="incomeFromPenaltyAccountId" ng-model="formData.incomeFromPenaltyAccountId" ng-change="loanproduct.accountingMappings.incomeFromPenaltyAccount.name = formValue(incomeAccountOptions,formData.incomeFromPenaltyAccountId,'id','name')">
                                                <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                                    {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.incomefromoverdue' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefromoverdue' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="incomeFromOverdueInterestAccountId" ng-model="formData.incomeFromOverdueInterestAccountId" ng-change="loanproduct.accountingMappings.incomeFromOverdueInterestAccount.name = formValue(incomeAccountOptions,formData.incomeFromOverdueInterestAccountId,'id','name')">
                                                <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                                    {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.expenses" | translate}}</h4>
                                        <label class="control-label col-sm-2">{{'label.input.loseswrittenoff' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.loseswrittenoff' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="writeOffAccountId" ng-model="formData.writeOffAccountId" ng-change="loanproduct.accountingMappings.writeOffAccount.name = formValue(expenseAccountOptions,formData.writeOffAccountId,'id','name')">
                                                <md-option ng-value="expenseAccount.id" ng-repeat="expenseAccount in expenseAccountOptions">
                                                    {{(expenseAccount.glCode + " " + expenseAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <div class="col-sm-3 right">
                                            <md-checkbox ng-model="includeOrderAccounts" ></md-checkbox>
                                        </div>
                                        <label class="control-label left col-sm-6">{{'label.input.includeOrderAccounts' | translate }}</label>
                                        <hr>
                                        <h4 ng-show="includeOrderAccounts">{{'label.heading.debit.order' | translate}}</h4>
                                        <div ng-show="includeOrderAccounts">
                                            <label class="control-label col-sm-2">{{'label.input.accounting.debit.order.not.performed' | translate }}
                                                <i class="fa fa-question-circle"
                                                    uib-tooltip="{{'label.tooltip.debit.order.not.performed' | translate}}"
                                                    tooltip-append-to-body="true"></i>
                                            </label>
                                            <div class="col-sm-4">
                                                <md-select id="orderNotPerformedAccountId" ng-model="formData.orderNotPerformedAccountId" ng-change="loanproduct.accountingMappings.orderNotPerfomedAccount.name = formValue(debitOrderAccountOptions,formData.orderNotPerformedAccountId,'id','name')">
                                                    <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in debitOrderAccountOptions">
                                                        {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                    </md-option>
                                                </md-select>
                                            </div>
                                            <label class="control-label col-sm-2">{{'label.input.accounting.debit.order.performed' | translate }}
                                                <i class="fa fa-question-circle"
                                                    uib-tooltip="{{'label.tooltip.debit.order.performed' | translate}}"
                                                    tooltip-append-to-body="true"></i>
                                            </label>
                                            <div class="col-sm-4">
                                                <md-select id="orderPerformedAccountId" ng-model="formData.orderPerformedAccountId" ng-change="loanproduct.accountingMappings.orderPerfomedAccount.name = formValue(debitOrderAccountOptions,formData.orderPerformedAccountId,'id','name')">
                                                    <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in debitOrderAccountOptions">
                                                        {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                    </md-option>
                                                </md-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-show="includeOrderAccounts">
                                        <label class="control-label col-sm-2">{{'label.input.accounting.debit.order.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.debit.order.interest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="orderInterestAccountId" ng-model="formData.orderInterestAccountId" ng-change="loanproduct.accountingMappings.orderInterestAccount.name = formValue(debitOrderAccountOptions,formData.orderInterestAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in debitOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.accounting.debit.order.overdue.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.debit.order.interest.mora' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="orderOverdueInterestAccountId" ng-model="formData.orderOverdueInterestAccountId" ng-change="loanproduct.accountingMappings.orderOverdueInterestAccount.name = formValue(debitOrderAccountOptions,formData.orderOverdueInterestAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in debitOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group" ng-show="includeOrderAccounts">
                                        <h4>{{'label.heading.credit.order' | translate}}</h4>
                                    </div>
                                    <div class="form-group" ng-show="includeOrderAccounts">
                                        <label class="control-label col-sm-2">{{'label.input.accounting.credit.order.not.performed' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.credit.order.not.performed' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="creditOrderNotPerformedAccountId" ng-model="formData.creditOrderNotPerformedAccountId" ng-change="loanproduct.accountingMappings.creditOrderNotPerformedAccount.name = formValue(creditOrderAccountOptions,formData.creditOrderNotPerformedAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in creditOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.accounting.credit.order.commitments' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.credit.order.commitments' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="creditCommitmentsAccountId" ng-model="formData.creditCommitmentsAccountId" ng-change="loanproduct.accountingMappings.creditCommitmentsAccount.name = formValue(creditOrderAccountOptions,formData.creditCommitmentsAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in creditOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-show="includeOrderAccounts">
                                        <label class="control-label col-sm-2">{{'label.input.accounting.credit.order.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.credit.order.interest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="creditOrderInterestAccountId" ng-model="formData.creditOrderInterestAccountId" ng-change="loanproduct.accountingMappings.creditOrderInterestAccount.name = formValue(creditOrderAccountOptions,formData.creditOrderInterestAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in creditOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-2">{{'label.input.accounting.credit.order.overdue.interest' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.credit.order.interest.mora' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            <md-select id="creditOrderOverdueInterestAccountId" ng-model="formData.creditOrderOverdueInterestAccountId" ng-change="loanproduct.accountingMappings.creditOrderOverdueInterestAccount.name = formValue(creditOrderAccountOptions,formData.creditOrderOverdueInterestAccountId,'id','name')">
                                                <md-option ng-value="orderAccount.id" ng-repeat="orderAccount in creditOrderAccountOptions">
                                                    {{(orderAccount.glCode + " " + orderAccount.name)}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <h4>{{'label.heading.advancedaccountingrules' | translate}}[<a
                                            ng-click="showOrHide(showOrHideValue)">{{showOrHideValue}}</a>]
                                    </h4>
                    
                                    <div class="col-md-12" ng-show="showOrHideValue == 'hide'">
                                        <div class="col-md-8">{{'label.heading.configurefundsourcesforpaymentchannels' | translate}}
                                        </div>
                                        <div class="col-md-4">
                                            <md-button ng-click="addConfigureFundSource()"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate
                                    }}</md-button>
                                        </div>
                                        <table class="table" data-ng-show="frFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.paymenttype' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.fundsource' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="configureFundOption in configureFundOptions">
                                                <td class="width30">
                                                    <md-select id="configureFundOptions[{{$index}}].paymentTypeId" ng-model="configureFundOption.paymentTypeId" ng-change="loanproduct.paymentChannelToFundSourceMappings[$index].paymentType.name = formValue(configureFundOption.paymentTypeOptions,configureFundOption.paymentTypeId,'id','name')">
                                                        <md-option ng-value="paymentType.id" ng-repeat="paymentType in configureFundOption.paymentTypeOptions">
                                                            {{paymentType.name | translate}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-select id="configureFundOptions[{{$index}}].fundSourceAccountId" ng-model="configureFundOption.fundSourceAccountId" ng-change="loanproduct.paymentChannelToFundSourceMappings[$index].fundSourceAccount.name = formValue(configureFundOption.assetAccountOptions,configureFundOption.fundSourceAccountId,'id','name')">
                                                        <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in configureFundOption.assetAccountOptions">
                                                            {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-button ng-click="deleteFund($index)"><i class="fa fa-remove "></i></md-button>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="col-md-8">{{'label.heading.mapfeestoincomeaccounts' | translate}}</div>
                                        <div class="col-md-4">
                                            <md-button ng-click="mapFees()"><i
                                                    class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}</md-button>
                                        </div>
                                        <table class="table width100" data-ng-show="fiFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.fees' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.incomeaccount' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="specificMapping in specificIncomeAccountMapping">
                                                <td class="width30">
                                                    <md-select id="specificIncomeAccountMapping[{{$index}}].chargeId" ng-model="specificMapping.chargeId" ng-change="loanproduct.feeToIncomeAccountMappings[$index].charge.name = formValue(chargeOptions,specificMapping.chargeId,'id','name')">
                                                        <md-option ng-value="charge.id" ng-repeat="charge in chargeOptions">
                                                            {{charge.name}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-select id="specificIncomeAccountMapping[{{$index}}].incomeAccountId" ng-model="specificMapping.incomeAccountId" ng-change="loanproduct.feeToIncomeAccountMappings[$index].incomeAccount.name = formValue(incomeAndLiabilityAccountOptions,specificMapping.incomeAccountId,'id','name')">
                                                        <md-option ng-value="account.id" ng-repeat="account in incomeAndLiabilityAccountOptions">
                                                            {{(account.glCode + " " + account.name)}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-button ng-click="deleteFee($index)"><i class="fa fa-remove "></i></md-button>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="col-md-8">{{'label.heading.mappenaltiestospecificincomeaccounts' | translate}}
                                        </div>
                                        <div class="col-md-4">
                                            <md-button ng-click="mapPenalty()"><i
                                                    class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}</md-button>
                                        </div>
                                        <table class="table" data-ng-show="piFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.penalty' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.incomeaccount' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="penaltySpecificIncomeaccount in penaltySpecificIncomeaccounts">
                                                <td class="width30">
                                                    <md-select id="penaltySpecificIncomeaccounts[{{$index}}].chargeId" ng-model="penaltySpecificIncomeaccount.chargeId" ng-change="loanproduct.penaltyToIncomeAccountMappings[$index].charge.name = formValue(penaltyOptions,penaltySpecificIncomeaccount.chargeId,'id','name')">
                                                        <md-option ng-value="charge.id" ng-repeat="charge in penaltyOptions">
                                                            {{charge.name}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-select id="penaltySpecificIncomeaccounts[{{$index}}].incomeAccountId" ng-model="penaltySpecificIncomeaccount.incomeAccountId" ng-change="loanproduct.penaltyToIncomeAccountMappings[$index].incomeAccount.name = formValue(incomeAccountOptions,penaltySpecificIncomeaccount.incomeAccountId,'id','name')">
                                                        <md-option ng-value="account.id" ng-repeat="account in incomeAccountOptions">
                                                            {{(account.glCode + " " + account.name)}}
                                                        </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-button ng-click="deletePenalty($index)"><i class="fa fa-remove "></i></md-button>

                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step ng-if="isClicked" label="{{'label.heading.preview' | translate}}">
                    <md-step-body>
                        <form name="Preview" novalidate="" class="form-horizontal  ">
                            <fieldset>
                                <api-validate></api-validate>
                                <br>
                                <br>
                                <h3>{{loanproduct.name}}</h3>
                                <hr>
                                <table width="100%">
                                    <tr>
                                        <td>
                                            <a id="test" class="old-syle-anchor">&nbsp;</a>
                                        </td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4">
                                            <strong>{{'label.heading.details' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="toppadding" ng-show="loanproduct.description">
                                        <td>{{'label.heading.description' | translate}} :</td>
                                        <td colspan="3">{{loanproduct.description}}</td>
                                    </tr>
                                    <tr ng-show="loanproduct.shortName">
                                        <td>{{'label.heading.shortname' | translate}} :</td>
                                        <td colspan="3">{{loanproduct.shortName}}</td>
                                    </tr>
                                    <tr ng-show="loanproduct.fundName">
                                        <td>{{'label.heading.fundname' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.fundName}}</td>
                                    </tr>
                                    <tr ng-show="date.first">
                                        <td>{{'label.heading.startdate' | translate}}:</td>
                                        <td colspan="3">{{date.first | DateFormat}}</td>
                                    </tr>
                                    <tr ng-show="date.second">
                                        <td>{{'label.heading.closedate' | translate}}:</td>
                                        <td colspan="3">{{date.second | DateFormat}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.includeborrowercycle' | translate}} :</td>
                                        <td colspan="3">{{loanproduct.includeInBorrowerCycle | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.currency' | translate}}</strong></td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td>{{'label.heading.currency' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.currency.name | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.decimalplaces' | translate}} :</td>
                                        <td colspan="3">{{formData.digitsAfterDecimal}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.currencyinmultiplesof' | translate}}</td>
                                        <td colspan="3">{{formData.inMultiplesOf}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.installmentinmultiplesof' | translate}}</td>
                                        <td colspan="3">{{loanproduct.installmentAmountInMultiplesOf}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.terms' | translate}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.useborrowerloancounter' | translate}} :</td>
                                        <td colspan="3">{{loanproduct.useBorrowerCycle | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.principal' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.principal| FormatNumber}}&nbsp;(
                                            Min:{{loanproduct.minPrincipal| FormatNumber}}&nbsp;, Max
                                            :{{loanproduct.maxPrincipal| FormatNumber}} )
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.numofrepayments' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.numberOfRepayments}}&nbsp;(
                                            Min:{{loanproduct.minNumberOfRepayments}}&nbsp;,
                                            Max:{{loanproduct.maxNumberOfRepayments}})
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.repayevery' | translate}}:</td>
                                        <td colspan="3">
                                            {{loanproduct.repaymentEvery}}&nbsp;{{loanproduct.repaymentFrequencyOption.value | translate}}
                                        </td>
                                    </tr>
                                    <tr ng-show="!loanproduct.isLinkedToFloatingInterestRates">
                                        <td>{{'label.heading.nominalinterestrate' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.interestRatePerPeriod | FormatNumber}}&nbsp;(
                                            Min:{{loanproduct.minInterestRatePerPeriod | FormatNumber}}&nbsp;,
                                            Max:{{loanproduct.maxInterestRatePerPeriod | FormatNumber}})&nbsp;{{loanproduct.interestRateFrequencyOption.value | translate}}
                                        </td>
                                    </tr>
                                    <tr ng-show="loanproduct.isLinkedToFloatingInterestRates">
                                        <td>{{'label.heading.floatinglendingrate' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.floatingRateName}}&nbsp;
                                            {{'label.heading.floatinginterestratedifferential' | translate}}:{{loanproduct.interestRateDifferential}}
                                            &nbsp;
                                            {{'label.heading.isFloatingInterestRateCalculationAllowed' | translate}}:{{loanproduct.isFloatingInterestRateCalculationAllowed}}
                                        </td>
                                    </tr>

                                    <tr ng-show="loanproduct.isLinkedToFloatingInterestRates">
                                        <td>{{'label.heading.floatinginterestrate' | translate}}:</td>
                                        <td colspan="3">{{loanproduct.defaultDifferentialLendingRate}}&nbsp;
                                            (Min:{{loanproduct.minDifferentialLendingRate}}&nbsp;,
                                            Max:{{loanproduct.maxDifferentialLendingRate}})&nbsp;
                                        </td>
                                    </tr>

                                    <tr class="bottomborder" ng-show="loanproduct.useBorrowerCycle">
                                        <td colspan="4"><strong>{{'label.heading.principalCycleVariations' | translate}}:</strong>
                                        </td>
                                    </tr>
                                    <tr class="bottomborder graybg" ng-show="loanproduct.useBorrowerCycle">
                                        <td>{{'label.input.cyclenumber' | translate}}</td>
                                        <td>{{'label.input.minimum' | translate}}</td>
                                        <td>{{'label.input.default' | translate}}</td>
                                        <td>{{'label.input.maximum' | translate}}</td>
                                        <td></td>
                                    </tr>
                                    <tr ng-repeat="borrowerCycleVariation in loanproduct.principalVariationsForBorrowerCycle">
                                        <td>{{borrowerCycleVariation.valueConditionType.code | translate}}{{borrowerCycleVariation.borrowerCycleNumber}}
                                        </td>
                                        <td>{{borrowerCycleVariation.minValue}}</td>
                                        <td>{{borrowerCycleVariation.defaultValue}}</td>
                                        <td>{{borrowerCycleVariation.maxValue}}</td>
                                    </tr>
                                    <tr class="bottomborder" ng-show="loanproduct.useBorrowerCycle">
                                        <td colspan="4">
                                            <strong>{{'label.heading.numerOfRepaymentCycleVariations' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg" ng-show="loanproduct.useBorrowerCycle">
                                        <td>{{'label.input.cyclenumber' | translate}}</td>
                                        <td>{{'label.input.minimum' | translate}}</td>
                                        <td>{{'label.input.default' | translate}}</td>
                                        <td>{{'label.input.maximum' | translate}}</td>
                                        <td></td>
                                    </tr>
                                    <tr
                                        ng-repeat="borrowerCycleVariation in loanproduct.numberOfRepaymentVariationsForBorrowerCycle">
                                        <td>{{borrowerCycleVariation.valueConditionType.code | translate}}{{borrowerCycleVariation.borrowerCycleNumber}}
                                        </td>
                                        <td>{{borrowerCycleVariation.minValue}}</td>
                                        <td>{{borrowerCycleVariation.defaultValue}}</td>
                                        <td>{{borrowerCycleVariation.maxValue}}</td>
                                    </tr>
                                    <tr class="bottomborder" ng-show="loanproduct.useBorrowerCycle">
                                        <td colspan="4"><strong>{{'label.heading.interestRateCycleVariations' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="bottomborder graybg" ng-show="loanproduct.useBorrowerCycle">
                                        <td>{{'label.input.cyclenumber' | translate}}</td>
                                        <td>{{'label.input.minimum' | translate}}</td>
                                        <td>{{'label.input.default' | translate}}</td>
                                        <td>{{'label.input.maximum' | translate}}</td>
                                        <td></td>
                                    </tr>
                                    <tr ng-repeat="borrowerCycleVariation in loanproduct.interestRateVariationsForBorrowerCycle">
                                        <td>{{borrowerCycleVariation.valueConditionType.code | translate}}{{borrowerCycleVariation.borrowerCycleNumber}}
                                        </td>
                                        <td>{{borrowerCycleVariation.minValue}}</td>
                                        <td>{{borrowerCycleVariation.defaultValue}}</td>
                                        <td>{{borrowerCycleVariation.maxValue}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.minimum.days.between.disbursal.and.first.repayment' | translate}}</td>
                                        <td colspan="3">{{loanproduct.minimumDaysBetweenDisbursalAndFirstRepayment}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.settings' | translate}}</strong></td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td>{{'label.heading.amortization' | translate}}</td>
                                        <td colspan="3">{{loanproduct.amortizationOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestmethod' | translate}}</td>
                                        <td colspan="3">{{loanproduct.interestOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.isequalamortization' | translate }}</td>
                                        <td colspan="3">{{loanproduct.isEqualAmortization | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestcalculationperiod' | translate}}</td>
                                        <td colspan="3">{{loanproduct.interestCalculationPeriodOption.value | translate}}</td>
                                    </tr>
                                    <tr ng-show="formData.interestCalculationPeriodType == 1">
                                        <td>{{'label.heading.allowpartialperiodinterestcalcualtion' | translate}}</td>
                                        <td colspan="3">{{loanproduct.allowPartialPeriodInterestCalcualtion | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.arrearstolerance' | translate}}</td>
                                        <td colspan="3">{{loanproduct.inArrearsTolerance| FormatNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.repaymentstrategy' | translate}}</td>
                                        <td colspan="3">{{loanproduct.transactionProcessingStrategyName | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.grace' | translate}}</td>
                                        <td colspan="3">{{loanproduct.graceOnPrincipalPayment}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestfreeperiod' | translate}}</td>
                                        <td colspan="3">{{loanproduct.graceOnInterestCharged}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.graceOnArrearsAgeing' | translate}}</td>
                                        <td colspan="3">{{loanproduct.graceOnArrearsAgeing}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.overduedaysfornpa' | translate}}</td>
                                        <td colspan="3">{{loanproduct.overdueDaysForNPA}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.loan.account.moves.out.of.npa.only.on.arrears.completion' | translate}}
                                        </td>
                                        <td colspan="3">{{loanproduct.accountMovesOutOfNPAOnlyOnArrearsCompletion | YesOrNo}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.daysinyears' | translate}}</td>
                                        <td colspan="3">{{loanproduct.daysInYearOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.daysinmonth' | translate}}</td>
                                        <td colspan="3">{{loanproduct.daysInMonthOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.thresholdforlastinstallment' | translate}}</td>
                                        <td colspan="3">{{loanproduct.principalThresholdForLastInstallment}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.candefineinstallmentamount' | translate}}</td>
                                        <td colspan="3">{{loanproduct.canDefineInstallmentAmount | YesOrNo}}</td>
                                    </tr>

                                    <tr ng-show="loanproduct.allowVariableInstallments">
                                        <td>{{'label.input.variableinstallments' | translate}}</td>
                                        <td colspan="3">(Min:{{loanproduct.minimumGap}}&nbsp;, Max:{{loanproduct.maximumGap}})
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.canUseForTopup' | translate}}</td>
                                        <td colspan="3">{{loanproduct.canUseForTopup | YesOrNo}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.interestRecalculation' | translate}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.recalculateinterest' | translate}}</td>
                                        <td colspan="3">{{loanproduct.isInterestRecalculationEnabled | YesOrNo}}</td>
                                    </tr>

                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled">
                                        <td>{{'label.input.interest.recalculation.reschdule.strategy' | translate}}</td>
                                        <td colspan="3">{{loanproduct.interestRecalculationData.rescheduleStrategyType.value | translate}}</td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled">
                                        <td>{{'label.input.preclose.interest.calculation.strategy' | translate}}</td>
                                        <td colspan="3">
                                            {{loanproduct.interestRecalculationData.preClosureInterestCalculationStrategyCode.code | translate}}
                                        </td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled">
                                        <td>{{'label.input.interest.recalculation.compounding.method' | translate}}</td>
                                        <td colspan="3">
                                            {{loanproduct.interestRecalculationData.interestRecalculationCompoundingType.value | translate}}
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanproduct.isInterestRecalculationEnabled && formData.interestRecalculationCompoundingMethod != 0">
                                        <td>{{'label.input.frequency.for.compounding' | translate}}</td>
                                        <td colspan="3">
                                            {{loanproduct.interestRecalculationData.recalculationCompoundingFrequencyType.value}}
                                            <label data-ng-show="formData.recalculationCompoundingFrequencyType == 3 &&
                                    loanproduct.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null"> on
                                                {{ loanproduct.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}</label>
                                            <label data-ng-show="loanproduct.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                    loanproduct.interestRecalculationData.recalculationCompoundingFrequencyOnDay.value != null">on day
                                                {{ loanproduct.interestRecalculationData.recalculationCompoundingFrequencyOnDay.value}}</label>
                                            <label data-ng-show="formData.recalculationCompoundingFrequencyType == 4 &&
                                    loanproduct.interestRecalculationData.recalculationCompoundingFrequencyOnDay.value == null &&
                                    loanproduct.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">on
                                                {{ loanproduct.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value}}
                                                {{ loanproduct.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled && formData.interestRecalculationCompoundingMethod != 0
                    && formData.recalculationCompoundingFrequencyType != 1">
                                        <td>{{'label.input.frequency.interval.for.compounding' | translate}}</td>
                                        <td colspan="3">{{formData.recalculationCompoundingFrequencyInterval}}</td>
                                    </tr>


                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled">
                                        <td>{{'label.input.frequency.for.recalculte.outstanding.principal' | translate}}</td>
                                        <td colspan="3">
                                            {{loanproduct.interestRecalculationData.recalculationRestFrequencyType.value}}
                                            <label data-ng-show="formData.recalculationRestFrequencyType == 3 &&
                                    loanproduct.interestRecalculationData.recalculationRestFrequencyWeekday != null"> on
                                                {{ loanproduct.interestRecalculationData.recalculationRestFrequencyWeekday.value}}</label>
                                            <label data-ng-show="formData.recalculationRestFrequencyType == 4 &&
                                    loanproduct.interestRecalculationData.recalculationRestFrequencyOnDay.value != null">on day
                                                {{ loanproduct.interestRecalculationData.recalculationRestFrequencyOnDay.value}}</label>
                                            <label data-ng-show="formData.recalculationRestFrequencyType == 4 &&
                                    loanproduct.interestRecalculationData.recalculationRestFrequencyOnDay.value == null &&
                                    loanproduct.interestRecalculationData.recalculationRestFrequencyNthDay != null">on
                                                {{ loanproduct.interestRecalculationData.recalculationRestFrequencyNthDay.value}}
                                                {{ loanproduct.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                                            </label>
                                        </td>
                                    </tr>
                                    <tr
                                        data-ng-show="loanproduct.isInterestRecalculationEnabled && formData.recalculationRestFrequencyType != 1">
                                        <td>{{'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate}}
                                        </td>
                                        <td colspan="3">{{loanproduct.recalculationRestFrequencyInterval}}</td>
                                    </tr>

                                    <tr data-ng-show="loanproduct.isInterestRecalculationEnabled">
                                        <td>{{'label.input.arrearsbasedonoriginalschedule' | translate}}</td>
                                        <td colspan="3">{{loanproduct.isArrearsBasedOnOriginalSchedule | YesOrNo}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.gauranteeRequirements' | translate}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.input.holdguaranteefunds' | translate}}</td>
                                        <td colspan="3">{{loanproduct.holdGuaranteeFunds | YesOrNo}}</td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.holdGuaranteeFunds">
                                        <td>{{'label.input.mandatory.guarantee' | translate}}</td>
                                        <td colspan="3">{{loanproduct.mandatoryGuarantee}}</td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.holdGuaranteeFunds">
                                        <td>{{'label.input.minimum.guarantee.from.own.funds' | translate}}</td>
                                        <td colspan="3">{{loanproduct.minimumGuaranteeFromOwnFunds}}</td>
                                    </tr>
                                    <tr data-ng-show="loanproduct.holdGuaranteeFunds">
                                        <td>{{'label.input.minimum.guarantee.from.guarantor' | translate}}</td>
                                        <td colspan="3">{{loanproduct.minimumGuaranteeFromGuarantor}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.tranchedetails' | translate}}</strong></td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td>{{'label.input.multidisburseloan' | translate}}</td>
                                        <td colspan="3">{{loanproduct.multiDisburseLoan | translate}}</td>
                                    </tr>
                                    <tr ng-show="loanproduct.multiDisburseLoan">
                                        <td>{{'label.input.maxtranchecount' | translate}}</td>
                                        <td colspan="3">{{loanproduct.maxTrancheCount}}</td>
                                    </tr>
                                    <tr ng-show="loanproduct.multiDisburseLoan">
                                        <td>{{'label.input.outstandingloanbalance' | translate}}</td>
                                        <td colspan="3">{{loanproduct.outstandingLoanBalance}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.configurableAttributes' | translate}}</strong></td>
                                    </tr>
                                    <tr class="toppadding">
                                        <td>{{'label.input.isConfigLoanAttributes' | translate}}</td>
                                        <td colspan="3">{{allowAttributeConfiguration | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.amortization' | translate}}</td>
                                        <td colspan="3">{{amortization | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.interestmethod' | translate}}</td>
                                        <td colspan="3">{{interestMethod | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.repaymentstrategy' | translate}}</td>
                                        <td colspan="3">{{transactionProcessingStrategy | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.interestcalculationperiod' | translate}}</td>
                                        <td colspan="3">{{interestCalcPeriod | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.arearstolerance' | translate}}</td>
                                        <td colspan="3">{{arrearsTolerance | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.repaidevery' | translate}}</td>
                                        <td colspan="3">{{repaymentFrequency | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.grace' | translate}}</td>
                                        <td colspan="3">{{graceOnPrincipalAndInterest | translate}}</td>
                                    </tr>
                                    <tr ng-show="allowAttributeConfiguration">
                                        <td>{{'label.input.no.of.overdue.days.to.move.loan.into.arrears' | translate}}</td>
                                        <td colspan="3">{{graceOnArrearsAging | translate}}</td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.charges' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg">
                                        <td>{{'label.heading.name' | translate}}</td>
                                        <td>{{'label.heading.type' | translate}}</td>
                                        <td>{{'label.heading.amount' | translate}}</td>
                                        <td>{{'label.heading.collectedon' | translate}}</td>
                                    </tr>
                                    <tr ng-repeat="charge in charges" ng-hide="charge.penalty">
                                        <td>{{charge.name}}</td>
                                        <td>{{charge.chargeCalculationType.value | translate}}</td>
                                        <td>{{charge.amount| FormatNumber}}</td>
                                        <td>{{charge.chargeTimeType.value}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.overduepenalitycharge' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg">
                                        <td>{{'label.heading.name' | translate}}</td>
                                        <td>{{'label.heading.type' | translate}}</td>
                                        <td>{{'label.heading.amount' | translate}}</td>
                                        <td>{{'label.heading.collectedon' | translate}}</td>
                                    </tr>
                                    <tr ng-repeat="charge in charges" ng-show="charge.penalty">
                                        <td>{{charge.name}}</td>
                                        <td>{{charge.chargeCalculationType.value | translate}}</td>
                                        <td>{{charge.amount| FormatNumber}}</td>
                                        <td>{{charge.chargeTimeType.value}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>

                                    <tr class="bottomborder">
                                        <td><strong>{{'label.heading.accounting' | translate}}</strong></td>
                                        <td colspan="3">{{accountingOptions[formData.accountingRule - 1]}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <table width="100%" ng-show="formData.accountingRule != 1">
                                                <tr class="toppadding">
                                                    <td>{{'label.heading.fundsource' | translate}}:</td>
                                                    <td colspan="3" width="40%">
                                                        {{loanproduct.accountingMappings.fundSourceAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.loanportfolio' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.loanPortfolioAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr ng-show="form">
                                                    <td>{{'label.heading.receivableinterest' | translate}}:</td>
                                                    <td colspan="3">
                                                        {{loanproduct.accountingMappings.receivableInterestAccount.name}}</td>
                                                </tr>
                                                <tr ng-show="isAccrualAccountingEnabled">
                                                    <td>{{'label.heading.receivablefees' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.receivableFeeAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr ng-show="isAccrualAccountingEnabled">
                                                    <td>{{'label.heading.receivablepenalties' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.receivablePenaltyAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.transfersinsuspenpense' | translate}}:</td>
                                                    <td colspan="3">
                                                        {{loanproduct.accountingMappings.transfersInSuspenseAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.incomefrominterest' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.interestOnLoanAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.incomefromfees' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.incomeFromFeeAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.incomefrompenalties' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.incomeFromPenaltyAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.recoverypayments' | translate}}:</td>
                                                    <td colspan="3">
                                                        {{loanproduct.accountingMappings.incomeFromRecoveryAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.loseswrittenoff' | translate}}:</td>
                                                    <td colspan="3">{{loanproduct.accountingMappings.writeOffAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.overpaymentliability' | translate}}:</td>
                                                    <td colspan="3">
                                                        {{loanproduct.accountingMappings.overpaymentLiabilityAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3"><br /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <strong>{{'label.heading.advancedaccountingrules' | translate}}</strong>
                                                    </td>
                                                </tr>
                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.fundsourcesforpayment' | translate}}</td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.paymenttype' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.fundsource' | translate}}</td>
                                                </tr>
                                                <tr ng-repeat="paymentChannel in loanproduct.paymentChannelToFundSourceMappings">
                                                    <td>{{paymentChannel.paymentType.name}}</td>
                                                    <td colspan="3">{{paymentChannel.fundSourceAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4"></td>
                                                </tr>
                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.feestospecificincome' | translate}}</td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.fees' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.incomeaccount' | translate}}</td>
                                                </tr>
                                                <tr ng-repeat="feeToIncomeAccount in loanproduct.feeToIncomeAccountMappings">
                                                    <td>{{feeToIncomeAccount.charge.name}}</td>
                                                    <td colspan="3">{{feeToIncomeAccount.incomeAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4"></td>
                                                </tr>
                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.penaltiesspecifictoincomeacc' | translate}}
                                                    </td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.penalty' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.incomeaccount' | translate}}</td>
                                                </tr>
                                                <tr
                                                    ng-repeat="penaltyToIncomeAccount in loanproduct.penaltyToIncomeAccountMappings">
                                                    <td>{{penaltyToIncomeAccount.charge.name}}</td>
                                                    <td colspan="3">{{penaltyToIncomeAccount.incomeAccount.name}}</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <br>
                                <br>
                                <br>
                                <div class="col-md-12 center">
                                    <md-button id="cancel" type="reset" class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </md-button>
                                    <md-button id="save"
                                        has-permission='CREATE_LOANPRODUCT'>
                                        {{'label.button.createloanproduct' | translate}}
                                    </md-button>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
            </md-steppers>
        </md-card>
    </md-content>
</div>