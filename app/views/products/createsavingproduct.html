<div class="content-container" ng-controller="CreateSavingProductController">
    <ul class="breadcrumb">
        <li><a href="#!/products">{{'label.anchor.products' | translate}}</a></li>
        <li><a href="#!/savingproducts">{{'label.anchor.savingproducts' | translate}}</a></li>
        <li class="active">{{'label.anchor.createsavingproduct' | translate}}</li>
    </ul>
    <md-content flex="nogrow" style="margin: 40px auto">
        <md-card>
            <md-steppers md-dynamic-height md-disable-tabs-behavior="true" md-stretch-steppers="always" md-selected="selectedStep">
                <md-step label="{{'label.heading.details' | translate}}">
                    <md-step-body>
                        <form name="Details" novalidate="" ng-submit="goNext(Details)" class="form-horizontal form-extra">
                            <api-validate></api-validate>
                            <fieldset>
                                <!--<h3>{{'label.heading.details' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.productname' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.productname' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input ng-autofocus="true" id="name" class="form-control" name="name" type="text"
                                            ng-model="formData.name" required late-validate />
                                        <form-validate valattributeform="Details" valattribute="name" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.product.shortname' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.shortname' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-2">
                                        <input type="text" id="shortName" name="shortName" class="form-control"
                                            ng-model="formData.shortName" maxlength="12" required late-validate />
                                        <form-validate valattributeform="Details" valattribute="shortName" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.description' | translate }}
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.description' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-9">
                                        <textarea rows="2" id="description" name="description" class="form-control"
                                            ng-model="formData.description"></textarea>
                                        <form-validate valattributeform="Details" valattribute="description" />
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.currency' | translate}}">
                    <md-step-body>
                        <form name="Currency" novalidate="" ng-submit="goNext(Currency)" class="form-horizontal form-extra">
                            <api-validate></api-validate>
                            <fieldset>
                                <!--<h3>{{'label.heading.currency' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.currency' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.currency' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <md-select id="currencyCode" ng-model="formData.currencyCode" 
                                            placeholder="{{'label.selectone' | translate}}"
                                            ng-change="savingproduct.currency.name = formValue(product.currencyOptions,formData.currencyCode,'code','name')"
                                            >
                                            <md-option ng-repeat="currency in product.currencyOptions" ng-value="currency.code">
                                                {{currency.name | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <label
                                        class="control-label col-sm-3">{{'label.input.decimalplaces' | translate}}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.decimalplaces' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input type="number" id="digitsAfterDecimal" name="decimalplace" class="form-control"
                                            ng-model="formData.digitsAfterDecimal" required late-validate number=true />
                                        <form-validate valattributeform="Currency" valattribute="decimalplace" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.multiplesof' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.multiplesof' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input type="number" id="inMultiplesOf" class="form-control" name="multiplesof"
                                            ng-model="formData.inMultiplesOf" required late-validate number=true />
                                        <form-validate valattributeform="Currency" valattribute="multiplesof" />
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.terms' | translate}}">
                    <md-step-body>            
                        <form name="Terms" novalidate="" ng-submit="goNext(Terms)" class="form-horizontal form-extra">
                            <api-validate></api-validate>
                            <fieldset>
                                <!--<h3>{{'label.heading.terms' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.account.level' | translate}}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.account.level' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                            <md-select id="accountLevel" 
                                                ng-model="formData.accountLevel">
                                            <md-option ng-value="level" ng-repeat="level in accountLevels">
                                                {{'label.input.level' | translate}} {{level}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.nominalannualinterestrate' | translate}}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.nominalannualinterest' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="nominalAnnualInterestRate" name="nominalAnnualInterestRate" type="number"
                                            class="form-control" ng-model="formData.nominalAnnualInterestRate" required
                                            late-validate decimals />
                                        <form-validate valattributeform="Terms" valattribute="nominalAnnualInterestRate" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.interestcompoundingperiod' | translate}}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.interestcompoundingperiod' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                            <md-select id="interestCompoundingPeriodTypeOptions" 
                                            ng-model="formData.interestCompoundingPeriodType"
                                            ng-change="savingproduct.interestCompoundingPeriodOption.value = formValue(product.interestCompoundingPeriodTypeOptions,formData.interestCompoundingPeriodType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestCompoundingPeriodTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <label
                                        class="control-label col-sm-3">{{'label.input.interestpostingperiod' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.interestpostingperiod' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                            <md-select id="interestPostingPeriodTypeOptions"
                                            ng-model="formData.interestPostingPeriodType"
                                            ng-change="savingproduct.interestPostingPeriodOption.value = formValue(product.interestPostingPeriodTypeOptions,formData.interestPostingPeriodType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestPostingPeriodTypeOptions">
                                             {{type.value | translate}}
                                            </md-option>
                                            </md-select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.interestcalculatedusing' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.interestcalculatedusing' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <md-select id="interestCalculationType" 
                                            ng-model="formData.interestCalculationType"
                                            ng-change="savingproduct.interestCalculationOption.value = formValue(product.interestCalculationTypeOptions,formData.interestCalculationType)">
                                            <md-option ng-value="type.id" ng-repeat="type in product.interestCalculationTypeOptions">
                                                {{type.value | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <label
                                        class="control-label col-sm-3">{{'label.input.daysinyears' | translate }}
                                        <span class="required">*</span>
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.daysinyear' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <md-select id="interestCalculationDaysInYearType" 
                                        ng-model="formData.interestCalculationDaysInYearType"
                                        ng-change="savingproduct.interestCalculationDaysInYearOption.value = formValue(product.interestCalculationDaysInYearTypeOptions,formData.interestCalculationDaysInYearType)">
                                        <md-option ng-value="type.id" ng-repeat="type in product.interestCalculationDaysInYearTypeOptions">
                                            {{type.value | translate}}
                                        </md-option>
                                        </md-select>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.settings' | translate}}">
                    <md-step-body>
                        <form name="Settings" novalidate="" ng-submit="goNext(Settings)" class="form-horizontal form-extra">
                            <api-validate></api-validate>
                            <fieldset>
                                <!--<h3>{{'label.heading.settings' | translate }}</h3>-->
                                <hr>
                                <div class="form-group">
                                    <label class="control-label col-sm-3">{{'label.input.minimumopeningbalance' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.minimumopeningbalance' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-2">
                                        <input id="minRequiredOpeningBalance" type="number" name="minRequiredOpeningBalance"
                                            class="form-control" ng-model="formData.minRequiredOpeningBalance"
                                            late-validate>
                                        <form-validate valattributeform="Settings" valattribute="minRequiredOpeningBalance" />
                                    </div>
                                    <label class="control-label col-sm-3">{{'label.input.lockinPeriodFrequency' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.lockinPeriodFrequency' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-2">
                                        <input id="lockinPeriodFrequency" type="number" name="lockinPeriodFrequency"
                                            class="form-control" ng-model="formData.lockinPeriodFrequency" late-validate
                                            number=true>
                                        <form-validate valattributeform="Settings" valattribute="lockinPeriodFrequency" />
                                    </div>
                                    <div class="col-sm-2">
                                        <md-select id="lockinPeriodFrequencyType" 
                                        ng-model="formData.lockinPeriodFrequencyType"
                                        ng-change="savingproduct.lockinPeriodFrequencyOption.value = formValue(product.lockinPeriodFrequencyTypeOptions,formData.lockinPeriodFrequencyType)">
                                        <md-option ng-value="lockinPeriodFrequencyType.id"  ng-repeat="lockinPeriodFrequencyType in product.lockinPeriodFrequencyTypeOptions">
                                            {{lockinPeriodFrequencyType.value | translate}}
                                        </md-option>
                                        </md-select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                                <md-checkbox id="withdrawalFeeForTransfers" aria-label="withdrawalFeeForTransfers"
                                                ng-model="formData.withdrawalFeeForTransfers" ng-true-value="true"
                                                ng-false-value="false"></md-checkbox>    
                                    </div>
                                    <label class="control-label col-sm-3 left">{{'label.input.withdrawalfeefortransfers' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.withdrawalfeefortransfers' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <label class="control-label col-sm-3">{{'label.input.minbalanceforinterest' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.minbalanceforinterest' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="minBalanceForInterestCalculation" type="number" class="form-control" 
                                            ng-model="formData.minBalanceForInterestCalculation">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                            <md-checkbox id="enforceMinRequiredBalance" ng-model="formData.enforceMinRequiredBalance"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-3 left">{{'label.input.enforceMinRequiredBalance' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.enforceMinRequiredBalance' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <label class="control-label col-sm-3" ng-show="formData.enforceMinRequiredBalance">{{'label.input.minRequiredBalance' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.minRequiredBalance' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3" ng-show="formData.enforceMinRequiredBalance">
                                        <input id="minRequiredBalance" type="number" class="form-control" 
                                            ng-model="formData.minRequiredBalance" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                            <md-checkbox id="allowOverdraft" ng-model="formData.allowOverdraft" ng-true-value="true" ng-false-value="false"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-3 left">{{'label.input.allowoverdraft' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.allowoverdraft' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div ng-show="formData.allowOverdraft">
                                        <label class="control-label col-sm-3">{{'label.input.overdraftlimit' | translate}}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.overdraftlimit' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <input id="overdraftLimit" type="number" class="form-control"
                                                ng-model="formData.overdraftLimit">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" ng-show="formData.allowOverdraft">
                                    <label
                                        class="control-label col-sm-3">{{'label.input.nominalannualinterestrateoverdraft' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.nominalannualinterestrateoverdraft' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="nominalAnnualInterestRateOverdraft" type="number" class="form-control"
                                            ng-model="formData.nominalAnnualInterestRateOverdraft">
                                    </div>
                                    <label
                                        class="control-label col-sm-3">{{'label.input.minoverdraftforinterestcalculation' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.minoverdraftforinterestcalculation' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="minOverdraftForInterestCalculation" type="number" class="form-control"
                                            ng-model="formData.minOverdraftForInterestCalculation">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                            <md-checkbox id="withHoldTax" ng-model="formData.withHoldTax" ng-true-value="true" ng-false-value="false"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-3 left">{{'label.input.withholdtax' | translate }}
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.withholdtax' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div ng-show="formData.withHoldTax">
                                        <label class="control-label col-sm-3">{{'label.input.taxgroup' | translate }}
                                            <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.label.input.taxgroup' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="taxGroupId" 
                                            ng-model="formData.taxGroupId" 
                                            ng-change="savingproduct.taxGroup.name = formValue(product.taxGroupOptions,formData.taxGroupId,'id','name')">
                                                <md-option value="taxGroup.id" ng-repeat="taxGroup in product.taxGroupOptions">
                                                    {{taxGroup.name | translate}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-3 right">
                                            <md-checkbox id="isDormancyTrackingActive" ng-model="formData.isDormancyTrackingActive" ng-true-value="true" ng-false-value="false"></md-checkbox>
                                    </div>
                                    <label class="control-label col-sm-3 left">{{'label.input.isDormancyTrackingActive' | translate }}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.isDormancyTrackingActive' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>

                                    <div ng-show="formData.isDormancyTrackingActive">
                                        <label class="control-label col-sm-3">{{'label.input.daysToInactive' | translate}}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.daysToInactive' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <input id="daysToInactive" type="number" class="form-control"
                                                ng-model="formData.daysToInactive">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" ng-show="formData.isDormancyTrackingActive">
                                    <label class="control-label col-sm-3">{{'label.input.daysToDormancy' | translate}}
                                        <i class="fa fa-question-circle"
                                            uib-tooltip="{{'label.tooltip.daysToDormancy' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="daysToDormancy" type="number" class="form-control"
                                            ng-model="formData.daysToDormancy">
                                    </div>

                                    <label class="control-label col-sm-3">{{'label.input.daysToEscheat' | translate}}
                                        <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.daysToEscheat' | translate}}"
                                            tooltip-append-to-body="true"></i>
                                    </label>
                                    <div class="col-sm-3">
                                        <input id="daysToEscheat" type="number" class="form-control"
                                            ng-model="formData.daysToEscheat">
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.charges' | translate}}">
                    <md-step-body>
                        <form name="Charges" novalidate="" ng-submit="goNext(Charges)" class="form-horizontal form-extra">
                            <fieldset>
                                <api-validate></api-validate>
                                <h3>{{'label.heading.charges' | translate }}</h3>
                                <hr>
                                <div class="form-group">
                                    <div class="col-sm-3">                    
                                        <md-select id="chargeId" ng-model="chargeId">
                                            <md-option ng-value="charge.id" ng-repeat="charge in product.chargeOptions">
                                                {{charge.product.chargeOptions}}{{charge.name | translate}}
                                            </md-option>
                                        </md-select>
                                    </div>
                                    <div class="col-sm-1">
                                        <md-button ng-click="chargeSelected(chargeId)"><i
                                                class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate }}
                                        </md-button>
                                    </div>

                                </div>
                                <div class="form-group col-md-12">
                                    <table class="table">
                                        <tr class="graybg">
                                            <th>{{'label.heading.name' | translate}}</th>
                                            <th>{{'label.heading.type' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.collectedon' | translate}}</th>
                                            <th></th>
                                            <th>{{'label.heading.actions' | translate}}</th>
                                        </tr>
                                        <tr ng-repeat="charge in charges">
                                            <td>{{charge.name}}, {{charge.currency.displaySymbol}}</td>
                                            <td>{{'charge.type.' + charge.chargeCalculationType.value | translate}}</td>
                                            <td></td>
                                            <td>{{charge.amount| FormatNumber}}</td>
                                            <td></td>
                                            <td>{{charge.chargeTimeType.value | translate}}</td>
                                            <td></td>
                                            <td><md-button href="" ng-click="deleteCharge($index)"><i
                                                        class="fa fa-times-circle fa-2x"></i></md-button></td>
                                        </tr>
                                    </table>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step label="{{'label.heading.accounting' | translate}}">
                    <md-step-body>
                        <form name="Accounting" novalidate="" ng-submit="goNext(Accounting)" class="form-horizontal form-extra">
                            <api-validate></api-validate>
                            <fieldset>
                                <!--<h3>{{'label.heading.accounting' | translate }}</h3>-->
                                <hr>
                                <div class="radio-inline">
                                    <label>
                                        <input type="radio" ng-model="formData.accountingRule" value="1">{{'label.input.accounting.none'
                                        |translate}}
                                    </label>
                                </div>
                                <div class="radio-inline">
                                    <label>
                                        <input type="radio" ng-model="formData.accountingRule" value="2">{{'label.input.cash'
                                        |translate}}
                                    </label>
                                </div>
                                <hr>
                                <div class="col-md-12" ng-show="formData.accountingRule==2">
                                    <div class="form-group">
                                        <h4>{{"label.heading.assets" | translate}}</h4>
                                        <label class="control-label col-sm-3">{{'label.input.savingreference' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.savingreference' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="savingsReferenceAccountId" ng-model="formData.savingsReferenceAccountId"
                                            ng-change="savingproduct.accountingMappings.savingsReferenceAccount.name = formValue(assetAccountOptions,formData.savingsReferenceAccountId,'id','name')">    
                                            <md-option  value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                                {{(assetAccount.glCode + " " + assetAccount.name)}}
                                            </md-option>    
                                            </md-select>
                                        </div>
                                        
                                        <label
                                            class="control-label col-sm-2">{{'label.input.overdraftportfoliocontrol' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.overdraftprotfolio' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-4">
                                            
                                            
                                            <md-select id="overdraftPortfolioControlId" ng-model="formData.overdraftPortfolioControlId"
                                            ng-change="savingproduct.accountingMappings.overdraftPortfolioControl.name = formValue(assetAccountOptions,formData.overdraftPortfolioControlId,'id','name')">
                                            <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in assetAccountOptions">
                                            {{(assetAccount.glCode + " " + assetAccount.name)}}
                                            </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.liabilities" | translate}}</h4>
                                        <label class="control-label col-sm-3">{{'label.input.savingcontrol' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.savingcontrol' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="savingsControlAccountId" 
                                            ng-model="formData.savingsControlAccountId" 
                                            ng-change="savingproduct.accountingMappings.savingsControlAccount.name = formValue(liabilityAccountOptions,formData.savingsControlAccountId,'id','name')">
                                            <md-option ng-value="liabilityAccount.id" ng-repeat="liabilityAccount in liabilityAccountOptions">
                                                {{(liabilityAccount.glCode + " " + liabilityAccount.name)}}
                                            </md-option>
                                        </md-select>                                            
                                        </div>
                                        <label
                                            class="control-label col-sm-3">{{'label.input.savingstransfersinsuspenpense' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.savingsuspense' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="transfersInSuspenseAccountId"
                                                ng-model="formData.transfersInSuspenseAccountId"
                                                ng-change="savingproduct.accountingMappings.transfersInSuspenseAccount.name = formValue(liabilityAccountOptions,formData.transfersInSuspenseAccountId,'id','name')">
                                                <md-option ng-value="liabilityAccount.id" ng-repeat="liabilityAccount in liabilityAccountOptions ">
                                                    {{(liabilityAccount.glCode + " " + liabilityAccount.name)}}
                                                </md-option> 
                                            </md-select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-show="formData.isDormancyTrackingActive">
                                        <label class="control-label col-sm-3">{{'label.input.escheatLiability' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.escheatLiability' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <!--      
                                            <select id="escheatLiabilityId" ng-model="formData.escheatLiabilityId"
                                                chosen="liabilityAccountOptions"
                                                ng-options="liabilityAccount.id as liabilityAccount.name for liabilityAccount in liabilityAccountOptions"
                                                ng-change="savingproduct.accountingMappings.escheatLiabilityAccount.name = formValue(liabilityAccountOptions,formData.escheatLiabilityId,'id','name')"
                                                value="{{liabilityAccount.id}}">
                                            </select>
                                             -->
                                            <md-select id="escheatLiabilityId" 
                                            ng-model="formData.escheatLiabilityId"
                                            ng-change="savingproduct.accountingMappings.escheatLiabilityAccount.name = formValue(liabilityAccountOptions,formData.escheatLiabilityId,'id','name')">
                                            <md-option ng-value="liabilityAccount.id" ng-repeat="liabilityAccount in liabilityAccountOptions">
                                                {{(liabilityAccount.glCode + " " + liabilityAccount.name)}}
                                            </md-option>
                                            </md-select>                                            
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.expenses" | translate}}</h4>
                                        <label class="control-label col-sm-3">{{'label.input.interestonsavings' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.interestonsavings' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="interestOnSavingsAccountId" 
                                            ng-model="formData.interestOnSavingsAccountId" 
                                            ng-change="savingproduct.accountingMappings.interestOnSavingsAccount.name = formValue(expenseAccountOptions,formData.interestOnSavingsAccountId,'id','name')">
                                            <md-option ng-value="expenseAccount.id" ng-repeat="expenseAccount in expenseAccountOptions">
                                                {{(expenseAccount.glCode + " " + expenseAccount.name)}}
                                            </md-option>
                                        </md-select>
                                        </div>
                                        <label class="control-label col-sm-3">{{'label.input.writeOff' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.Writeoffoverdraft' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="writeOffAccountId" 
                                            ng-model="formData.writeOffAccountId"
                                            ng-change="savingproduct.accountingMappings.writeOffAccount.name = formValue(expenseAccountOptions,formData.writeOffAccountId,'id','name')">
                                            <md-option ng-value="expenseAccount.id" ng-repeat="expenseAccount in expenseAccountOptions">
                                                {{(expenseAccount.glCode + " " + expenseAccount.name)}}
                                            </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <h4>{{"label.heading.income" | translate}}</h4>
                                        <label class="control-label col-sm-3">{{'label.input.incomefromfees' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefromfees' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                           <md-select id="incomeFromFeeAccountId" 
                                            ng-model="formData.incomeFromFeeAccountId"
                                            ng-change="savingproduct.accountingMappings.incomeFromFeeAccount.name = formValue(incomeAccountOptions,formData.incomeFromFeeAccountId,'id','name')">
                                            <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                                {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                            </md-option>                                              
                                            </md-select>
                                        </div>
                                        <label class="control-label col-sm-3">{{'label.input.incomefrompenalties' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefrompenalties' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                         <md-select id="incomeFromPenaltyAccountId" 
                                         ng-model="formData.incomeFromPenaltyAccountId"
                                         ng-change="savingproduct.accountingMappings.incomeFromPenaltyAccount.name = formValue(incomeAccountOptions,formData.incomeFromPenaltyAccountId,'id','name')">
                                         <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                          {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                         </md-option>
                                         </md-select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-3">{{'label.input.interest.on.overdrafts' | translate }}
                                            <i class="fa fa-question-circle"
                                                uib-tooltip="{{'label.tooltip.incomefromoverdraftinterest' | translate}}"
                                                tooltip-append-to-body="true"></i>
                                        </label>
                                        <div class="col-sm-3">
                                            <md-select id="incomeFromInterestId"
                                             ng-model="formData.incomeFromInterestId"
                                             ng-change="savingproduct.accountingMappings.incomeFromInterest.name = formValue(incomeAccountOptions,formData.incomeFromInterestId,'id','name')">    
                                            <md-option ng-value="incomeAccount.id" ng-repeat="incomeAccount in incomeAccountOptions">
                                            {{(incomeAccount.glCode + " " + incomeAccount.name)}}
                                            </md-option>    
                                            </md-select>
                                        </div>
                                    </div>
                                    <hr>
                                    <h4>{{'label.heading.advancedaccountingrules' | translate}}[<a
                                            ng-click="showOrHide(showOrHideValue)">{{showOrHideValue}}</a>]
                                    </h4>

                                    <div class="col-md-12" ng-show="showOrHideValue == 'hide'">
                                        <div class="col-md-8">{{'label.heading.configurefundsourcesforpaymentchannels' |
                                            translate}}
                                        </div>
                                        <div class="col-md-4">
                                        <md-button ng-click="addConfigureFundSource()"><i
                                                    class="fa fa-plus"></i>&nbsp;{{'label.button.add' | translate}}</md-button>
                                        </div>
                                        <table class="table" data-ng-show="frFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.paymenttype' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.fundsource' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="configureFundOption in configureFundOptions">
                                                <td class="width30">
                                                    <md-select id="configureFundOptions[{{$index}}].paymentTypeId"
                                                    ng-model="configureFundOption.paymentTypeId" 
                                                    ng-change="savingproduct.paymentChannelToFundSourceMappings[$index].paymentType.name = formValue(configureFundOption.paymentTypeOptions,configureFundOption.paymentTypeId,'id','name')"> 
                                                      <md-option ng-value="paymentType.id" ng-repeat="paymentType in configureFundOption.paymentTypeOptions">
                                                          {{paymentType.name |translate}}
                                                      </md-option> 
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-select id="configureFundOptions[{{$index}}].fundSourceAccountId"
                                                        ng-model="configureFundOption.fundSourceAccountId"
                                                        ng-change="savingproduct.paymentChannelToFundSourceMappings[$index].fundSourceAccount.name = formValue(configureFundOption.assetAccountOptions,configureFundOption.fundSourceAccountId,'id','name')">
                                                        <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in configureFundOption.assetAccountOptions">
                                                            {{(assetAccount.glCode + " " + assetAccount.name)}}  
                                                        </md-option>     
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                <md-button ng-click="deleteFund($index)"><i class="fa fa-remove"></i></md-button>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="col-md-8">{{'label.heading.mapfeestoincomeaccounts' | translate}}</div>
                                        <div class="col-md-4">
                                            <md-button ng-click="mapFees()"><i
                                                    class="fa fa-plus"></i>&nbsp;&nbsp;{{'label.button.add' | translate }}</md-button>
                                        </div>
                                        <table class="table" class="table width100" data-ng-show="fiFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.fees' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.incomeaccount' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="specificIncomeaccount in specificIncomeaccounts">
                                                <td class="width30">
                                                    <md-select id="specificIncomeaccounts[{{$index}}].chargeId" 
                                                        ng-model="specificIncomeaccount.chargeId"
                                                        ng-change="savingproduct.feeToIncomeAccountMappings[$index].charge.name = formValue(specificIncomeaccount.chargeOptions,specificIncomeaccount.chargeId,'id','name')">
                                                    <md-option ng-value="charge.id" ng-repeat="charge in specificIncomeaccount.chargeOptions">
                                                        {{charge.name |translate}}
                                                    </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-select id="specificIncomeaccounts[{{$index}}].incomeAccountId"
                                                     ng-model="specificIncomeaccount.incomeAccountId"
                                                     ng-change="savingproduct.feeToIncomeAccountMappings[$index].incomeAccount.name = formValue(specificIncomeaccount.incomeAccountOptions,specificIncomeaccount.incomeAccountId,'id','name')">
                                                     <md-option ng-value="assetAccount.id" ng-repeat="assetAccount in specificIncomeaccount.incomeAccountOptions">
                                                        {{(assetAccount.glCode + " " + assetAccount.name)}}
                                                     </md-option>
                                                    </md-select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <md-button ng-click="deleteFee($index)"><i class="fa fa-remove"></i></md-button>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="col-md-8">{{'label.heading.mappenaltiestospecificincomeaccounts' | translate}}
                                        </div>
                                        <div class="col-md-4">
                                            <md-button ng-click="mapPenalty()"><i 
                                                class="fa fa-plus"></i>&nbsp;&nbsp;{{'label.button.add' | translate}}</md-button>
                                        </div>
                                        <table class="table" data-ng-show="piFlag">
                                            <tr class="graybg">
                                                <th class="width30">{{'label.heading.penalty' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.incomeaccount' | translate}}</th>
                                                <th></th>
                                                <th class="width30">{{'label.heading.actions' | translate}}</th>
                                            </tr>
                                            <tr ng-repeat="penaltySpecificIncomeaccount in penaltySpecificIncomeaccounts">
                                                <td class="width30">
                                                    <select id="penaltySpecificIncomeaccounts[{{$index}}].chargeId"
                                                        class="form-control" ng-model="penaltySpecificIncomeaccount.chargeId"
                                                        ng-options="charge.id as charge.name for charge in penaltySpecificIncomeaccount.penaltyOptions"
                                                        ng-change="savingproduct.penaltyToIncomeAccountMappings[$index].charge.name = formValue(penaltySpecificIncomeaccount.penaltyOptions,penaltySpecificIncomeaccount.chargeId,'id','name')"
                                                        value="{{charge.id}}">
                                                    </select>
                                                </td>
                                                <td></td>
                                                <td class="width30">
                                                    <select id="penaltySpecificIncomeaccounts[{{$index}}].incomeAccountId"
                                                        class="form-control" ng-model="penaltySpecificIncomeaccount.incomeAccountId"
                                                        ng-options="assetAccount.id as assetAccount.name for assetAccount in penaltySpecificIncomeaccount.incomeAccountOptions"
                                                        ng-change="savingproduct.penaltyToIncomeAccountMappings[$index].incomeAccount.name = formValue(penaltySpecificIncomeaccount.incomeAccountOptions,penaltySpecificIncomeaccount.incomeAccountId,'id','name')"
                                                        value="{{assetAccount.id}}">
                                                    </select>
                                                </td>
                                                <td></td>
                                                <td class="width30"><a ng-click="deletePenalty($index)"><i
                                                            class="fa fa-times-circle fa-2x"></i></a>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                                <md-button ng-hide="disabled" type="submit" class="md-primary md-raised" ng-click="goNextStep()">
                                    {{'label.button.next' | translate}} <i class="fa fa-arrow-right"></i>
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
                <md-step ng-if="isClicked" label="{{'label.heading.preview' | translate}}">
                    <md-step-body>
                        <form name="Preview" novalidate="" class="form-horizontal form-extra" ng-submit="submit()">
                            <fieldset>
                                <api-validate></api-validate>
                                <br>
                                <br>
                                <h3>{{savingproduct.name}}</h3>
                                <hr>
                                <table width="100%">
                                    <tr class="bottomborder">
                                        <td colspan="4">
                                            <strong>{{'label.heading.details' | translate}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.description' | translate}}</td>
                                        <td colspan="3">{{savingproduct.description}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.shortname' | translate}} :</td>
                                        <td colspan="3">{{savingproduct.shortName}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.items' | translate}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.currency' | translate}}</td>
                                        <td colspan="3">{{savingproduct.currency.name | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.decimalplaces' | translate}}</td>
                                        <td colspan="3">{{savingproduct.digitsAfterDecimal}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.currencyinmultiplesof' | translate}}</td>
                                        <td colspan="3">{{savingproduct.inMultiplesOf}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.nominalannualinterestrate' | translate}}</td>
                                        <td colspan="3">{{savingproduct.nominalAnnualInterestRate}} %</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestcompoundingperiod' | translate}}</td>
                                        <td colspan="3">{{savingproduct.interestCompoundingPeriodOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestpostingperiod' | translate}}</td>
                                        <td colspan="3">{{savingproduct.interestPostingPeriodOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.interestcalculatedusing' | translate}}</td>
                                        <td colspan="3">{{savingproduct.interestCalculationOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.daysinyears' | translate}}</td>
                                        <td colspan="3">{{savingproduct.interestCalculationDaysInYearOption.value | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.settings' | translate}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.minimumopeningbalance' | translate}}</td>
                                        <td colspan="3">{{savingproduct.minRequiredOpeningBalance| FormatNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.lockinPeriodFrequency' | translate}}</td>
                                        <td colspan="3">{{savingproduct.lockinPeriodFrequency}}
                                            {{savingproduct.lockinPeriodFrequencyOption.value | translate}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.withdrawalfeefortransfers' | translate}}</td>
                                        <td colspan="3">{{savingproduct.withdrawalFeeForTransfers | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.allowoverdraft' | translate}}</td>
                                        <td colspan="3">{{savingproduct.allowOverdraft | translate}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.allowOverdraft">
                                        <td>{{'label.heading.overdraftlimit' | translate}}</td>
                                        <td colspan="3">{{savingproduct.overdraftLimit | translate}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.allowOverdraft">
                                        <td>{{'label.heading.nominalannualinterestrateoverdraft' | translate}}</td>
                                        <td colspan="3">{{savingproduct.nominalAnnualInterestRateOverdraft}} %</td>
                                    </tr>
                                    <tr ng-show="savingproduct.allowOverdraft">
                                        <td>{{'label.heading.minoverdraftforinterestcalculation' | translate}}</td>
                                        <td colspan="3">{{savingproduct.minOverdraftForInterestCalculation}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.minbalanceforinterestcalculation' | translate}}</td>
                                        <td colspan="3">{{savingproduct.minBalanceForInterestCalculation| FormatNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.enforceMinRequiredBalance' | translate}}</td>
                                        <td colspan="3">{{savingproduct.enforceMinRequiredBalance | translate}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.minRequiredBalance' | translate}}</td>
                                        <td colspan="3">{{savingproduct.minRequiredBalance| FormatNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.withholdtax' | translate}}</td>
                                        <td colspan="3">{{savingproduct.withHoldTax | translate}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.withHoldTax">
                                        <td>{{'label.heading.withholdtaxgroup' | translate}}</td>
                                        <td colspan="3">{{savingproduct.taxGroup.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.isDormancyTrackingActive' | translate}}</td>
                                        <td colspan="3">{{savingproduct.isDormancyTrackingActive | translate}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.isDormancyTrackingActive">
                                        <td>{{'label.heading.daysToInactive' | translate}}</td>
                                        <td colspan="3">{{savingproduct.daysToInactive}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.isDormancyTrackingActive">
                                        <td>{{'label.heading.daysToDormancy' | translate}}</td>
                                        <td colspan="3">{{savingproduct.daysToDormancy}}</td>
                                    </tr>
                                    <tr ng-show="savingproduct.isDormancyTrackingActive">
                                        <td>{{'label.heading.daysToEscheat' | translate}}</td>
                                        <td colspan="3">{{savingproduct.daysToEscheat}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.charges' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg">
                                        <td>{{'label.heading.name' | translate}}</td>
                                        <td>{{'label.heading.type' | translate}}</td>
                                        <td>{{'label.heading.amount' | translate}}</td>
                                        <td>{{'label.heading.collectedon' | translate}}</td>
                                    </tr>
                                    <tr ng-repeat="charge in charges">
                                        <td>{{charge.name}}</td>
                                        <td>{{charge.chargeCalculationType.value}}</td>
                                        <td>{{charge.amount| FormatNumber}}</td>
                                        <td>{{charge.chargeTimeType.value}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br /></td>
                                    </tr>
                                    <tr class="bottomborder">
                                        <td><strong>{{'label.heading.accounting' | translate}}</strong></td>
                                        <td colspan="3"><span
                                                ng-hide="formData.accountingRule == 2">{{'label.none' | translate}}</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <table width="100%" ng-show="formData.accountingRule == 2">
                                                <tr>
                                                    <td>{{'label.heading.savingsreference' | translate}}({{'label.heading.assets' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.savingsReferenceAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.input.overdraftportfoliocontrol' |
                                                        translate}}({{'label.heading.assets' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.overdraftPortfolioControl.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.savingscontrol' | translate}}({{'label.heading.liabilities'
                                                        |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.savingsControlAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.transfersinsuspenpense' |
                                                        translate}}({{'label.heading.liabilities' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.transfersInSuspenseAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr ng-show="savingproduct.isDormancyTrackingActive">
                                                    <td>{{'label.heading.escheatLiability' |
                                                        translate}}({{'label.heading.liabilities' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.escheatLiabilityAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.interestonsavings' | translate}}({{'label.heading.expenses'
                                                        |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.interestOnSavingsAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.input.writeOff' | translate}}({{'label.heading.expenses' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">{{savingproduct.accountingMappings.writeOffAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.incomefromfee' | translate}}({{'label.heading.income' |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">{{savingproduct.accountingMappings.incomeFromFeeAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.heading.incomefrompenalties' | translate}}({{'label.heading.income'
                                                        |
                                                        translate}})
                                                    </td>
                                                    <td colspan="3">
                                                        {{savingproduct.accountingMappings.incomeFromPenaltyAccount.name}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>{{'label.input.interest.on.overdrafts' |
                                                        translate}}({{'label.heading.income' | translate}})
                                                    </td>
                                                    <td colspan="3">{{savingproduct.accountingMappings.incomeFromInterest.name}}
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td colspan="4"><br /></td>
                                                </tr>
                                                <tr class="bottomborder">
                                                    <td>
                                                        <strong>{{'label.heading.advancedaccountingrules' | translate}}</strong>
                                                    </td>
                                                </tr>

                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.configurefundsourcesforpaymentchannels' |
                                                        translate}}
                                                    </td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.paymenttype' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.fundsource' | translate}}</td>
                                                </tr>
                                                <tr ng-repeat="paymentChannel in savingproduct.paymentChannelToFundSourceMappings">
                                                    <td>{{paymentChannel.paymentType.name}}</td>
                                                    <td colspan="3">{{paymentChannel.fundSourceAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4"></td>
                                                </tr>
                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.feestospecificincome' | translate}}</td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.fees' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.incomeaccount' | translate}}</td>
                                                </tr>
                                                <tr ng-repeat="feeToIncomeAccount in savingproduct.feeToIncomeAccountMappings">
                                                    <td>{{feeToIncomeAccount.charge.name}}</td>
                                                    <td colspan="3">{{feeToIncomeAccount.incomeAccount.name}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4"></td>
                                                </tr>
                                                <tr class="toppadding bottomborder">
                                                    <td colspan="4">{{'label.heading.penaltiesspecifictoincomeacc' | translate}}
                                                    </td>
                                                </tr>
                                                <tr class="bottomborder graybg">
                                                    <td>{{'label.heading.penalty' | translate}}</td>
                                                    <td colspan="3">{{'label.heading.incomeaccount' | translate}}</td>
                                                </tr>
                                                <tr
                                                    ng-repeat="penaltyToIncomeAccount in savingproduct.penaltyToIncomeAccountMappings">
                                                    <td>{{penaltyToIncomeAccount.charge.name}}</td>
                                                    <td colspan="3">{{penaltyToIncomeAccount.incomeAccount.name}}</td>
                                                </tr>

                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <br>
                                <br>
                                <div class="col-md-offset-5 paddedtop">
                                    <button id="cancel" type="reset" class="btn btn-sm btn-default" ng-click="cancel()">
                                        {{'label.button.cancel' | translate}}
                                    </button>
                                    <button id="save" type="submit" class="btn btn-sm btn-primary" has-permission='CREATE_SAVINGSPRODUCT'>{{'label.button.createsavingproduct'
                                        | translate}}
                                    </button>
                                </div>
                            </fieldset>
                        </form>
                        <md-divider></md-divider>
                        <md-step-actions layout="row">
                            <div flex layout="row" layout-align="end top">
                                <md-button ng-hide="disabled" type="submit" class="md-raised" ng-click="moveToPreviousStep()">
                                    <i class="fa fa-arrow-left"></i> {{'label.button.previous' | translate}}
                                </md-button>
                            </div>
                        </md-step-actions>  
                    </md-step-body>
                </md-step>
            </md-steppers>
        </md-card>
    </md-content>
</div>