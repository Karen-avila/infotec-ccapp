<div class="content-container" ng-controller="TaskController">
    <ul class="breadcrumb">
        <li class="active">{{'label.anchor.tasks' | translate}}</li>
    </ul>
    <div class="card">
        <div class="content">
            <div class="toolbar">
                <h4>{{'label.heading.pendingtasks' | translate}}</h4>
            </div>
            <br>
            <div class="">
                <fieldset>
                    <api-validate></api-validate>

                    <!-- Banca Social-->
                    <uib-tabset tabset-name="taskTabset">
                        <!-- Promotion -->
                        <uib-tab heading="{{'label.heading.task.promotion' | translate}}"
                            has-permission='READ_CHECKER_TASK_PROMOTION'>
                            <md-tab-body>
                                <div class="blockoverlay" style="overflow-y: scroll">
                                    <div class="modal-body form-horizontal">
                                        <div class="form-group">
                                            <div class="col-sm-1">
                                                <label class="control-label"
                                                    for="externalId">{{'label.heading.cashmgmt.tellerCashiers.from' | translate}}</label>
                                            </div>
                                            <div class="col-md-3">
                                                <md-datepicker id="date.from" ng-model="date.from"
                                                    md-placeholder="{{'label.input.fromdate' | translate}}"
                                                    md-min-date="minDatePicker" md-max-date="maxDatePicker">
                                                </md-datepicker>
                                            </div>
                                            <div class="col-sm-1">
                                                <label class="control-label"
                                                    for="externalId">{{'label.heading.cashmgmt.tellerCashiers.to' | translate}}</label>
                                            </div>
                                            <div class="col-md-3">
                                                <md-datepicker id="date.todate" ng-model="date.to"
                                                    md-placeholder="{{'label.input.todate' | translate}}"
                                                    md-min-date="date.from" md-max-date="maxDatePicker">
                                                </md-datepicker>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-1">
                                                <label class="control-label"
                                                    for="externalId">{{'label.heading.status' | translate}}</label>
                                            </div>
                                            <div class="col-md-3">
                                                <md-select class="uppercase" ng-model="formData.clientStatus"
                                                    class="form-control"
                                                    placeholder="{{'label.selectstatus' | translate}}">
                                                    <md-option class="uppercase" value="0">{{'label.all' | translate}}
                                                    </md-option>
                                                    <md-option class="uppercase" value="310">
                                                        {{'clientStatusType.validated' | translate}}
                                                    </md-option>
                                                    <md-option class="uppercase" value="300">
                                                        {{'clientStatusType.invalid.plus.valid'| translate}}
                                                    </md-option>
                                                </md-select>
                                            </div>
                                            <div class="col-sm-1">
                                                <label class="control-label"
                                                    for="externalId">{{'label.heading.municipality' | translate}}</label>
                                            </div>
                                            <div class="col-md-3">
                                                <md-select class="uppercase" ng-model="formData.entity"
                                                    class="form-control"
                                                    placeholder="{{'label.selectentity' | translate}}">
                                                    <md-option class="uppercase" value="0">{{'label.all' | translate}}
                                                    </md-option>
                                                    <md-option value="ACAPULCO DE JUAREZ">ACAPULCO DE JUAREZ</md-option>
                                                    <md-option value="BENITO JUAREZ">BENITO JUAREZ</md-option>
                                                    <md-option value="CENTRO">CENTRO</md-option>
                                                    <md-option value="CULIACAN">CULIACAN</md-option>
                                                    <md-option value="ECATEPEC DE MORELOS">ECATEPEC DE MORELOS
                                                    </md-option>
                                                    <md-option value="GUADALAJARA">GUADALAJARA</md-option>
                                                    <md-option value="GUSTAVO A. MADERO">GUSTAVO A. MADERO</md-option>
                                                    <md-option value="LEON">LEON</md-option>
                                                    <md-option value="HERMOSILLO">HERMOSILLO</md-option>
                                                    <md-option value="IZTAPALAPA">IZTAPALAPA</md-option>
                                                    <md-option value="JUAREZ">JUAREZ</md-option>
                                                    <md-option value="LAZARO CARDENAS">LAZARO CARDENAS</md-option>
                                                    <md-option value="MERIDA">MERIDA</md-option>
                                                    <md-option value="MEXICALI">MEXICALI</md-option>
                                                    <md-option value="MONTERREY">MONTERREY</md-option>
                                                    <md-option value="NEZAHUALCOYOTL">NEZAHUALCOYOTL</md-option>
                                                    <md-option value="PUEBLA">PUEBLA</md-option>
                                                    <md-option value="TIJUANA">TIJUANA</md-option>
                                                    <md-option value="TUXTLA GUTIERREZ">TUXTLA GUTIERREZ</md-option>
                                                    <md-option value="VERACRUZ">VERACRUZ</md-option>
                                                </md-select>
                                            </div>
                                            <!-- <div class="col-sm-2">
                                                <label class="control-label"
                                                    for="externalId">{{'label.input.limit.records' | translate}}</label>
                                            </div>
                                            <div class="col-md-2">
                                                <md-select id="limit" ng-model="formData.limit">
                                                    <md-option value="0">{{'label.query.no.limit' | translate}}</md-option>
                                                    <md-option value="100">100</md-option>
                                                    <md-option value="200">200</md-option>
                                                    <md-option value="300">300</md-option>
                                                    <md-option value="400">400</md-option>
                                                </md-select>
                                            </div> -->
                                        </div>
                                        <span><a ng-click="searchSocialBank()" class="btn btn-sm btn-primary"><i
                                                    class="fa fa-search"></i>{{'label.button.advancesearch' | translate}}</a>
                                            <br /><br />
                                        </span>
                                    </div>
                                </div>
                                <script type="text/ng-template" id="deletechecker.html">
                                    <div class="modal-header silver">
                                        <h3 class="bolder">{{'label.heading.confirm.delete.value' | translate}}</h3>
                                    </div>
                                    <div class="modal-body">
                                        <api-validate></api-validate>
                                        <br>
                                        <md-button class="md-raised" ng-click="cancel()">{{'label.button.cancel' |
                                            translate}}
                                        </md-button>
                                        <md-button class="md-raised md-primary" ng-click="delete()">{{'label.button.confirm' |
                                            translate}}
                                        </md-button>
                                    </div>
                                </script>
                                <script type="text/ng-template" id="approvechecker.html">
                                    <div class="modal-header silver">
                                        <h3 class="bolder">{{'label.heading.approve' | translate}}</h3>
                                    </div>
                                    <div class="modal-body">
                                        <api-validate></api-validate>
                                        <br>
                                        <md-button class="md-raised" ng-click="cancel()">{{'label.button.cancel' |
                                            translate}}
                                        </md-button>
                                        <md-button class="md-raised md-primary" ng-click="approve()">{{'label.button.confirm' |
                                            translate}}
                                        </md-button>
                                    </div>
                                </script>
                                <script type="text/ng-template" id="rejectchecker.html">
                                    <div class="modal-header silver">
                                        <h3 class="bolder">{{'label.heading.reject' | translate}}</h3>
                                    </div>
                                    <div class="modal-body">
                                        <api-validate></api-validate>
                                        <br>
                                        <md-button class="md-raised" ng-click="cancel()">{{'label.button.cancel' |
                                            translate}}
                                        </md-button>
                                        <md-button class="md-raised md-primary" ng-click="Reject()">{{'label.button.confirm' |
                                            translate}}
                                        </md-button>
                                    </div>
                                </script>
                                <div ng-show="searchData">
                                    <table md-table class="table">
                                        <thead md-head md-order="query.order">
                                            <tr md-row class="graybg">
                                                <th md-column md-order-by="loanId">{{'label.heading.id' | translate}}
                                                </th>
                                                <th md-column md-order-by="orderDate">
                                                    {{'label.heading.applicationdate' | translate}}</th>
                                                <th md-column>{{'label.heading.status' | translate}}</th>
                                                <th md-column md-order-by="clientName">
                                                    {{'label.heading.client' | translate}}</th>
                                                <th md-column md-order-by="city">
                                                    {{'label.heading.municipality' | translate}}</th>
                                                <th md-column md-order-by="note">{{'label.heading.note' | translate}}
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody md-body>
                                            <tr md-row ng-click="routeToClient(data.clientId)"
                                                ng-repeat="data in searchedSocialBanks | orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit">
                                                <td md-cell>{{data.loanId}}</td>
                                                <td md-cell>{{data.submittedDate | DateFormat}}</td>
                                                <td md-cell>{{data.clientStatus.code | translate}}</td>
                                                <td md-cell>{{data.clientName}}</td>
                                                <td md-cell>{{data.city}}</td>
                                                <td md-cell>{{data.note}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="text-center">
                                    <md-table-pagination ng-show="searchedSocialBanks.length > query.limit"
                                        md-limit="query.limit" md-limit-options="[10, 25, 40, 60, 80, 100]"
                                        md-page-select="options.pageSelector" md-boundary-links="options.boundaryLinks"
                                        md-total="{{searchedSocialBanks.length}}" md-page="query.page"
                                        md-on-paginate="search" md-page-select></md-table-pagination>
                                </div>
                            </md-tab-body>
                        </uib-tab>
                        <!-- Crédito -->
                        <uib-tab heading="{{'label.heading.task.credit' | translate}}"
                            has-permission='READ_CHECKER_TASK_CREDIT'>
                            <md-tab-body>
                                <div class="blockoverlay" style="overflow-y: scroll">
                                    <!-- <div uib-collapse="isCollapsed" class="blockoverlay" style="overflow-y: scroll"> -->
                                    <div class="form-group">
                                        <md-datepicker id="date.from" ng-model="date.from"
                                            md-placeholder="{{'label.input.fromdate' | translate}}"
                                            md-min-date="minDatePicker" md-max-date="maxDatePicker">
                                        </md-datepicker>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <md-datepicker id="date.todate" ng-model="date.to"
                                                md-placeholder="{{'label.input.todate' | translate}}"
                                                md-min-date="date.from" md-max-date="maxDatePicker">
                                            </md-datepicker>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <md-select class="uppercase" ng-model="formData.status" class="form-control"
                                                placeholder="{{'label.selectstatus' | translate}}">
                                                <md-option class="uppercase" value="0">{{'label.all' | translate}}
                                                </md-option>
                                                <md-option class="uppercase" value="100">
                                                    {{ 'loanStatusType.pending.approval' | translate}}
                                                </md-option>
                                                <md-option class="uppercase" value="200">
                                                    {{ 'loanStatusType.approved' | translate}}
                                                </md-option>
                                                <md-option class="uppercase" value="300">
                                                    {{ 'loanStatusType.disbursed.and.active' | translate}}</md-option>
                                                <md-option class="uppercase" value="400">
                                                    {{ 'loanStatusType.rejected.by.applicant' | translate}}</md-option>
                                                <md-option class="uppercase" value="500">
                                                    {{ 'loanStatusType.rejected' | translate}}
                                                </md-option>
                                            </md-select>
                                        </div>
                                    </div>
                                    <span><a ng-click="searchCredit()" class="btn btn-sm btn-primary"><i
                                                class="fa fa-search"></i>{{'label.button.advancesearch' | translate}}</a>
                                        <br /><br />
                                    </span>
                                </div>
                                <script type="text/ng-template" id="deletechecker.html">
                                    <div class="modal-header silver">
                                        <h3 class="bolder">{{'label.heading.confirm.delete.value' | translate}}</h3>
                                    </div>
                                    <div class="modal-body">
                                        <api-validate></api-validate>
                                        <br>
                                        <md-button class="md-raised" ng-click="cancel()">{{'label.button.cancel' |
                                            translate}}
                                        </md-button>
                                        <md-button class="md-raised md-primary" ng-click="delete()">{{'label.button.confirm' |
                                            translate}}
                                        </md-button>
                                    </div>
                                </script>
                                <script type="text/ng-template" id="approvechecker.html">
                                    <div class="modal-header silver">
                                        <h3 class="bolder">{{'label.heading.approve' | translate}}</h3>
                                    </div>
                                    <div class="modal-body">
                                        <api-validate></api-validate>
                                        <br>
                                        <md-button class="md-raised" ng-click="cancel()">{{'label.button.cancel' |
                                            translate}}
                                        </md-button>
                                        <md-button class="md-raised md-primary" ng-click="approve()">{{'label.button.confirm' |
                                            translate}}
                                        </md-button>
                                    </div>
                                </script>
                                <div ng-show="searchedLoansFiltered.length > 0">
                                    <table md-table class="table">
                                        <thead md-head md-order="query.order">
                                            <tr md-row class="graybg">
                                                <th md-column md-order-by="loanId">{{'label.heading.id' | translate}}
                                                </th>
                                                <th md-column md-order-by="orderDate">
                                                    {{'label.heading.validationdate' | translate}}</th>
                                                <th md-column>{{'label.heading.status' | translate}}</th>
                                                <th md-column md-order-by="clientName">
                                                    {{'label.heading.client' | translate}}</th>
                                            </tr>
                                        </thead>
                                        <tbody md-body>
                                            <tr md-row ng-click="routeToClient(data.clientId)"
                                                ng-repeat="data in searchedLoansFiltered | orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit">
                                                <td md-cell>{{data.loanId}}</td>
                                                <td md-cell>{{data.validationdate | DateFormat}}</td>
                                                <td md-cell>{{data.loanStatus.code | translate}}</td>
                                                <td md-cell>{{data.clientName}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="text-center">
                                    <md-table-pagination ng-show="searchedLoansFiltered.length > query.limit"
                                        md-limit="query.limit" md-limit-options="[10, 25, 40, 60, 80, 100]"
                                        md-page-select="options.pageSelector" md-boundary-links="options.boundaryLinks"
                                        md-total="{{searchedLoansFiltered.length}}" md-page="query.page"
                                        md-on-paginate="search" md-page-select></md-table-pagination>
                                </div>
                            </md-tab-body>
                        </uib-tab>
                        <!-- Checker -->
                        <uib-tab heading="{{'label.heading.massivereverse' | translate}}"
                            has-permission='READ_CHECKER_TASK_INBOX'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="form-inline">
                                                    <div class="form-group">
                                                        <span class="input-append grpinputicons">
                                                            <input ng-autofocus="true" autocomplete="off"
                                                                typeahead-on-select="viewUser($item)"
                                                                placeholder="{{'label.input.searchbyuser' | translate}}"
                                                                type="text" ng-model="user"
                                                                uib-typeahead="users.username as users.username for users in checkerTemplate.appUsers | filter:$viewValue | limitTo:8"
                                                                class="form-control">
                                                            <button type="button" ng-click="isCollapsed = !isCollapsed"
                                                                class="btn control btn-sm btn-default"><i
                                                                    class="fa fa-chevron-down"></i></button>
                                                            <button type="button" ng-click="search()"
                                                                class="btn btn-sm btn-primary btn-sm control"><i
                                                                    class="fa fa-search"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="form-group">
                                                        <span>
                                                            <!-- <button type="button" class="btn btn-sm btn-sm btn-success"
                                                                data-ng-click="approveOrRejectChecker('approve')"><i
                                                                    class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.approve' | translate}}</button>
                                                            <button type="button" class="btn btn-sm btn-sm btn-danger"
                                                                data-ng-click="deleteChecker()"><i
                                                                    class="fa fa-trash-o"></i>&nbsp;&nbsp;{{'label.button.delete' | translate}}</button> -->
                                                            <button type="button" class="btn btn-sm btn-sm btn-warning"
                                                                data-ng-click="approveOrRejectChecker('reject')"><i
                                                                    class="fa fa-times"></i>&nbsp;&nbsp;{{'label.button.reject' | translate}}</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <div uib-collapse="isCollapsed" class="blockoverlay" style="overflow-y: scroll">
                                <div class="form-group">
                                    <input type="text" placeholder="{{'label.input.fromdate' | translate}}"
                                        datepicker-pop="dd MMMM yyyy" ng-model="date.from" is-open="opened"
                                        min="minDate" max="'2030-06-22'" date-disabled="disabled(date, mode)"
                                        class="form-control" />
                                </div>
                                <div class="form-group">
                                    <div>
                                        <input type="text" placeholder="{{'label.input.todate' | translate}}"
                                            datepicker-pop="dd MMMM yyyy" ng-model="date.to" is-open="opened1"
                                            min="minDate" max="'2030-06-22'" date-disabled="disabled(date, mode)"
                                            class="form-control" />
                                    </div>
                                </div>
                               
                             
                                <div class="form-group">
                                    <md-select class="uppercase" ng-model="formData.entity"
                                    class="form-control"
                                    placeholder="{{'label.selectentity' | translate}}">
                                    <md-option class="uppercase" value="0">{{'label.all' | translate}}
                                    </md-option>
                                    <md-option value="ACAPULCO DE JUAREZ">ACAPULCO DE JUAREZ</md-option>
                                    <md-option value="BENITO JUAREZ">BENITO JUAREZ</md-option>
                                    <md-option value="CENTRO">CENTRO</md-option>
                                    <md-option value="CULIACAN">CULIACAN</md-option>
                                    <md-option value="ECATEPEC DE MORELOS">ECATEPEC DE MORELOS
                                    </md-option>
                                    <md-option value="GUADALAJARA">GUADALAJARA</md-option>
                                    <md-option value="GUSTAVO A. MADERO">GUSTAVO A. MADERO</md-option>
                                    <md-option value="LEON">LEON</md-option>
                                    <md-option value="HERMOSILLO">HERMOSILLO</md-option>
                                    <md-option value="IZTAPALAPA">IZTAPALAPA</md-option>
                                    <md-option value="JUAREZ">JUAREZ</md-option>
                                    <md-option value="LAZARO CARDENAS">LAZARO CARDENAS</md-option>
                                    <md-option value="MERIDA">MERIDA</md-option>
                                    <md-option value="MEXICALI">MEXICALI</md-option>
                                    <md-option value="MONTERREY">MONTERREY</md-option>
                                    <md-option value="NEZAHUALCOYOTL">NEZAHUALCOYOTL</md-option>
                                    <md-option value="PUEBLA">PUEBLA</md-option>
                                    <md-option value="TIJUANA">TIJUANA</md-option>
                                    <md-option value="TUXTLA GUTIERREZ">TUXTLA GUTIERREZ</md-option>
                                    <md-option value="VERACRUZ">VERACRUZ</md-option>
                                </md-select>
                                </div>
                                <span><a ng-click="search()" class="btn btn-sm btn-primary"><i
                                            class="fa fa-search"></i>{{'label.button.advancesearch' | translate}}</a>
                                    <br /><br />
                                </span>
                            </div>
                            <script type="text/ng-template" id="deletechecker.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.delete' | translate}}</h3>
                                </div>
                                <div class="modal-body">
                                    <api-validate></api-validate>
                                    <br>
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="delete()">{{'label.button.confirm' |
                                        translate}}
                                    </button>
                                </div>
                            </script>
                            <script type="text/ng-template" id="approvechecker.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.approve' | translate}}</h3>
                                </div>
                                <div class="modal-body">
                                    <api-validate></api-validate>
                                    <br>
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="approve()">{{'label.button.confirm' |
                                        translate}}
                                    </button>
                                </div>
                            </script>
                            <div ng-show="searchData">
                                <table class="table" style="margin-top: -20px;">
                                    <thead>
                                        <tr class="graybg">
                                            <th><input type="checkbox" ng-click="checkerInboxAllCheckBoxesClicked()"
                                                    ng-checked="checkerInboxAllCheckBoxesMet()" /></th>
                                            <th>{{'label.heading.id' | translate}}</th>
                                            <th>{{'label.heading.madeondate' | translate}}</th>
                                            <th>{{'label.heading.status' | translate}}</th>
                                            <th>{{'label.heading.user' | translate}}</th>
                                            <th>{{'label.heading.action' | translate}}</th>
                                            <th>{{'label.heading.entity' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="pointer-main"
                                            dir-paginate="data in searchData | itemsPerPage: itemsPerPage"
                                            pagination-id="inbox">
                                            <td><input type="checkbox" data-ng-model="checkData[data.id]" /></td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">{{data.id}}</td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">{{data.madeOnDate |
                                            DateFormat}}
                                            </td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">
                                                {{data.processingResult}}
                                            </td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">{{data.maker}}</td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">{{data.actionName}}
                                            </td>
                                            <td class="pointer" data-ng-click="routeTo(data.id)">{{data.entityName}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center">
                                <dir-pagination-controls pagination-id="inbox" boundary-links="true"
                                    template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                            </div>
                        </uib-tab>
                        <!-- CLIENT APPROVAL -->
                        <uib-tab heading="{{'label.heading.clientapproval' | translate}}"
                            has-permission='ACTIVATE_CLIENT_CHECKER'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input ng-autofocus="true" ng-model="filterText" type="text"
                                                    class="input-sm form-control"
                                                    placeholder="{{'label.input.filterbyname' | translate}}">
                                            </th>
                                            <th>
                                                <button type="button" class="btn btn-sm btn-success"
                                                    data-ng-click="approveClient()" has-permission='ACTIVATE_CLIENT'><i
                                                        class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.approve' | translate}}
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <script type="text/ng-template" id="approveclient.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.enterclientsactivationdate' |
                                        translate}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                                </div>
                                <div class="modal-body modal-big">
                                    <api-validate></api-validate>
                                    <br>
                                    <input type="text" datepicker-pop="dd MMMM yyyy" ng-model="date.actDate"
                                           is-open="opened" min="restrictDate"
                                           max="restrictDate"/>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="approve(date.actDate)">
                                        {{'label.button.confirm' | translate}}
                                    </button>
                                </div>
                            </script>
                            <table class="table condensed-table">
                                <thead>
                                    <tr class="graybg">
                                        <th></th>
                                        <th>{{'label.heading.office' | translate}}</th>
                                        <th>{{'label.heading.name' | translate}}</th>
                                        <th>{{'label.heading.uniqueId' | translate}}</th>
                                        <th>{{'label.heading.accnum' | translate}}</th>
                                        <th>{{'label.heading.staff' | translate}}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="pointer-main"
                                        dir-paginate="client in pendingClientApproval | filter : {active: 'false', status: { value:'Pending'}} | filter:filterText | itemsPerPage: itemsPerPage"
                                        pagination-id="'_' + $index">
                                        <td><input type="checkbox" data-ng-model="approveData[client.id]" /></td>
                                        <td class="pointer" data-ng-click="routeToClient(client.id)"></td>
                                        {{client.officeName}}
                                        </td>
                                        <td class="pointer" data-ng-click="routeToClient(client.id)">
                                            {{client.displayName}}
                                        </td>
                                        <td class="pointer" data-ng-click="routeToClient(client.id)">
                                            {{client.uniqueId}}
                                        </td>
                                        <td class="pointer" data-ng-click="routeToClient(client.id)">
                                            {{client.accountNo}}
                                        </td>
                                        <td class="pointer" data-ng-click="routeToClient(client.id)">
                                            {{client.staffName}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="text-center">
                                <dir-pagination-controls pagination-id="'_' + $index" boundary-links="true"
                                    template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                            </div>
                        </uib-tab>
                        <!-- LOAN APPROVAL -->
                        <uib-tab heading="{{'label.heading.loanapproval' | translate}}"
                            has-permission='APPROVE_LOAN_CHECKER'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input ng-autofocus="true" ng-model="filterPendingToApproval"
                                                    type="text" class="input-sm form-control"
                                                    placeholder="{{'label.input.filterbyname' | translate}}">
                                            </th>
                                            <th>
                                                <button type="button" class="btn btn-sm btn-success"
                                                    data-ng-click="approveLoan()" has-permission='APPROVE_LOAN'><i
                                                        class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.approve'
                                                | translate}}
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>

                            <script type="text/ng-template" id="approveloan.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.confirm.approve' | translate}}</h3>
                                </div>
                                <div class="modal-body">
                                    <api-validate></api-validate>
                                    <br>
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' | translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="approve()">{{'label.heading.approve' | translate}}
                                    </button>
                                </div>
                            </script>

                            <div>
                                <table class="table condensed-table">
                                    <thead>
                                        <tr class="graybg">
                                            <th></th>
                                            <th>{{'label.heading.office' | translate}}</th>
                                            <th>{{'label.heading.grouporclient' | translate}}</th>
                                            <th>{{'label.heading.numofloancycle' | translate}}</th>
                                            <th>{{'label.heading.product' | translate}}</th>
                                            <th>{{'label.heading.loan' | translate}}</th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th>{{'label.heading.staff' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="record in pendingApproval | filter : {client : { name : filterPendingToApproval }} | itemsPerPage: itemsPerPage"
                                            class="{{record.individual ? '' : 'accordion-toggle'}}"
                                            data-toggle="collapse"
                                            data-target="#grp_a{{record.individual ? '' : record.client.id}}"
                                            pagination-id="pendingApproval.id">
                                            <td>
                                                <input type="checkbox" ng-model="loanTemplate[record.client.id]">
                                            </td>
                                            <td ng-if="record.individual">{{record.office.name}}</td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                {{record.office.name}}</td>
                                            <td ng-if="!record.individual" class="pointer"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                <i class="fa fa-users"></i>&nbsp;<a
                                                    href='#!/viewgroup/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td ng-if="record.individual" class="pointer">
                                                <i class="fa fa-user"></i>&nbsp;<a
                                                    href='#!/viewclient/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td class="pointer">{{record.client.loanCounter}}</td>
                                            <td class="pointer">{{record.loan.productName}} </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')"></td>
                                            <td ng-if="record.individual" class="pointer"><a
                                                    href='#!/viewloanaccount/{{record.loan.id}}'>{{record.loan.accountNo}}</a>
                                            </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                {{record.loan.amount | FormatNumber}} ({{record.loans.length}})</td>
                                            <td ng-if="record.individual">{{record.loan.amount | FormatNumber}}</td>
                                            <td class="pointer">{{record.client.staffName}}</td>
                                        </tr>
                                        <tr ng-repeat-end ng-if="!record.individual">
                                            <td colspan="7" ng-if="!record.individual" class="accordion-body collapse"
                                                id="grp_a{{record.client.id}}">
                                                <table class="table">
                                                    <thead>
                                                        <tr class="graybg">
                                                            <th></th>
                                                            <th>{{'label.heading.office' | translate}}</th>
                                                            <th colspan="2">
                                                                {{'label.heading.grouporclient' | translate}}</th>
                                                            <th>{{'label.heading.loan' | translate}}</th>
                                                            <th>{{'label.heading.amount' | translate}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="loan in record.loans">
                                                            <td colspan="2">{{record.office.name}}</td>
                                                            <td colspan="2" class="pointer">
                                                                <a
                                                                    href='#!/viewclient/{{loan.client.id}}'>{{loan.client.name}}</a>
                                                            </td>
                                                            <td class="pointer"><a
                                                                    href='#!/viewloanaccount/{{loan.id}}'>{{loan.accountNo}}</a>
                                                            </td>
                                                            <td class="pointer">{{loan.amount | FormatNumber}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="text-center">
                                    <dir-pagination-controls pagination-id="pendingApproval.id" boundary-links="true"
                                        template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                                </div>
                            </div>
                        </uib-tab>
                        <!-- LOAN APPROVAL TO AUTHORIZE -->
                        <uib-tab heading="{{'label.heading.loanautorize' | translate}}" has-permission='AUTHORIZE_LOAN'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input ng-autofocus="true" ng-model="filterPendingToAuthorize"
                                                    type="text" class="input-sm form-control"
                                                    placeholder="{{'label.input.filterbyname' | translate}}">
                                            </th>
                                            <th>
                                                <button type="button" class="btn btn-sm btn-success"
                                                    data-ng-click="authorizeLoan()" has-permission='AUTORIZE_LOAN'><i
                                                        class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.authorize'| translate}}
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>

                            <script type="text/ng-template" id="authorizeloan.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.confirm.authorize' | translate}}</h3>
                                </div>
                                <div class="modal-body form-horizontal">
                                    <api-validate></api-validate>
                                    <div class="form-group">
                                        <label class="control-label col-sm-4" for="password">{{'label.input.password' | translate }}</label>
                                        <div class="col-sm-5">
                                            <input type="password" id="password" ng-model="authorizeKey" class="form-control"/>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                                <div class="modal-footer silver">
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
                                    <button class="btn btn-sm btn-primary" ng-click="authorize()">{{'label.heading.authorize' | translate}}</button>
                                </div>
                            </script>

                            <div>
                                <table class="table condensed-table">
                                    <thead>
                                        <tr class="graybg">
                                            <th><input type="checkbox" ng-click="toggleAllPendingToAuthorize()"></th>
                                            <th>{{'label.heading.office' | translate}}</th>
                                            <th>{{'label.heading.grouporclient' | translate}}</th>
                                            <th>{{'label.heading.numofloancycle' | translate}}</th>
                                            <th>{{'label.heading.product' | translate}}</th>
                                            <th>{{'label.heading.loan' | translate}}</th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th>{{'label.heading.staff' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="record in pendingToAuthorize | filter : {client : { name : filterPendingToAuthorize }} | itemsPerPage: itemsPerPage"
                                            class="{{record.individual ? '' : 'accordion-toggle'}}"
                                            data-toggle="collapse"
                                            data-target="#grp_a{{record.individual ? '' : record.client.id}}"
                                            pagination-id="pendingToAuthorize.id">
                                            <td>
                                                <input type="checkbox" ng-model="loanTemplate[record.client.id]">
                                            </td>
                                            <td ng-if="record.individual">{{record.office.name}}</td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                {{record.office.name}}</td>
                                            <td ng-if="!record.individual" class="pointer"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                <i class="fa fa-users"></i>&nbsp;<a
                                                    href='#!/viewgroup/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td ng-if="record.individual" class="pointer">
                                                <i class="fa fa-user"></i>&nbsp;<a
                                                    href='#!/viewclient/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td class="pointer">{{record.client.loanCounter}}</td>
                                            <td class="pointer">{{record.loan.productName}} </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')"></td>
                                            <td ng-if="record.individual" class="pointer"><a
                                                    href='#!/viewloanaccount/{{record.loan.id}}'>{{record.loan.accountNo}}</a>
                                            </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'a')">
                                                {{record.loan.amount | FormatNumber}} ({{record.loans.length}})</td>
                                            <td ng-if="record.individual">{{record.loan.amount | FormatNumber}}</td>
                                            <td class="pointer">{{record.client.staffName}}</td>
                                        </tr>
                                        <tr ng-repeat-end ng-if="!record.individual">
                                            <td colspan="7" ng-if="!record.individual" class="accordion-body collapse"
                                                id="grp_a{{record.client.id}}">
                                                <table class="table">
                                                    <thead>
                                                        <tr class="graybg">
                                                            <th></th>
                                                            <th>{{'label.heading.office' | translate}}</th>
                                                            <th colspan="2">
                                                                {{'label.heading.grouporclient' | translate}}</th>
                                                            <th>{{'label.heading.loan' | translate}}</th>
                                                            <th>{{'label.heading.amount' | translate}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="loan in record.loans">
                                                            <td colspan="2">{{record.office.name}}</td>
                                                            <td colspan="2" class="pointer">
                                                                <a
                                                                    href='#!/viewclient/{{loan.client.id}}'>{{loan.client.name}}</a>
                                                            </td>
                                                            <td class="pointer"><a
                                                                    href='#!/viewloanaccount/{{loan.id}}'>{{loan.accountNo}}</a>
                                                            </td>
                                                            <td class="pointer">{{loan.amount | FormatNumber}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="text-center">
                                    <dir-pagination-controls pagination-id="pendingToAuthorize.id" boundary-links="true"
                                        template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                                </div>
                            </div>
                        </uib-tab>
                        <!-- LOAN DISBURSAL -->
                        <uib-tab heading="{{'label.heading.loandisbursal' | translate}}"
                            has-permission='DISBURSALUNDO_LOAN_CHECKER'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input ng-autofocus="true" ng-model="filterPendingToDisbursal"
                                                    type="text" class="input-sm form-control"
                                                    placeholder="{{'label.input.filterbyname' | translate}}">
                                            </th>
                                            <th>
                                                <button type="button" class="btn btn-sm btn-success"
                                                    data-ng-click="disburseLoan()" has-permission='APPROVE_LOAN'><i
                                                        class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.disburse'
                                                | translate}}
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <script type="text/ng-template" id="disburseloan.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.confirm.disburse' | translate}}</h3>
                                </div>
                                <div class="modal-body">
                                    <api-validate></api-validate>
                                    <br>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table">
                                                <tr>                            
                                                    <td><label>{{'label.input.disbursedondate' | translate }}: </label></td>
                                                    <td>
                                                        <input type="text" datepicker-pop="dd MMMM yyyy" ng-model="disbursedondate"
                                                        is-open="opened" min="restrictDate" max="restrictDate" class="form-control width170px"/>        
                                                    </td>
                                                </tr>
                                                <tr>                            
                                                    <td><label>{{'label.input.fundsource' | translate }}: </label></td>
                                                    <td>
                                                        <select id="fundId" ng-model="fundId"
                                                            class="form-control width170px"
                                                            ng-options="fund.id as fund.name for fund in funds" value="{{fund.id}}">
                                                            <option value="">{{'label.selectfund' | translate}}</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>                            
                                                    <td><label>{{'label.input.channel' | translate }}: </label></td>
                                                    <td>
                                                        <select id="channelId" ng-model="channelId"
                                                            class="form-control width170px"
                                                            ng-options="channel.id as channel.name for channel in channelOptions" value="{{channel.id}}">
                                                            <option value="">{{'label.selectachannel' | translate}}</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                            </table>                                           
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="disburse()">{{'label.heading.disburse' |
                                        translate}}
                                    </button>
                                </div>
                            </script>
                            <div>
                                <table class="table condensed-table">
                                    <thead>
                                        <tr class="graybg">
                                            <th></th>
                                            <th>{{'label.heading.office' | translate}}</th>
                                            <th>{{'label.heading.grouporclient' | translate}}</th>
                                            <th>{{'label.heading.numofloancycle' | translate}}</th>
                                            <th>{{'label.heading.product' | translate}}</th>
                                            <th>{{'label.heading.loan' | translate}}</th>
                                            <th>{{'label.heading.amount' | translate}}</th>
                                            <th>{{'label.heading.staff' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="record in pendingDisburse | filter : {client : { name : filterPendingToDisbursal }} | itemsPerPage: itemsPerPage"
                                            class="{{record.individual ? '' : 'accordion-toggle'}}"
                                            data-toggle="collapse"
                                            data-target="#grp_d{{record.individual ? '' : record.client.id}}"
                                            pagination-id="pendingDisburse.id">
                                            <td>
                                                <input type="checkbox"
                                                    ng-model="loanDisbursalTemplate[record.client.id]">
                                            </td>
                                            <td ng-if="record.individual">{{record.office.name}}</td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'd')">
                                                {{record.office.name}}</td>
                                            <td ng-if="!record.individual" class="pointer"
                                                data-ng-click="showGroupDetail(record.client.id, 'd')">
                                                <i class="fa fa-users"></i>&nbsp;<a
                                                    href='#!/viewgroup/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td ng-if="record.individual" class="pointer">
                                                <i class="fa fa-user"></i>&nbsp;<a
                                                    href='#!/viewclient/{{record.client.id}}'>{{record.client.name}}</a>
                                            </td>
                                            <td class="pointer">{{record.client.loanCounter}}</td>
                                            <td class="pointer">{{record.loan.productName}} </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'd')"></td>
                                            <td ng-if="record.individual" class="pointer"><a
                                                    href='#!/viewloanaccount/{{record.loan.id}}'>{{record.loan.accountNo}}</a>
                                            </td>
                                            <td ng-if="!record.individual"
                                                data-ng-click="showGroupDetail(record.client.id, 'd')">
                                                {{record.loan.amount | FormatNumber}} ({{record.loans.length}})</td>
                                            <td ng-if="record.individual">{{record.loan.amount | FormatNumber}}</td>
                                            <td class="pointer">{{record.client.staffName}}</td>
                                        </tr>
                                        <tr ng-repeat-end ng-if="!record.individual">
                                            <td colspan="7" ng-if="!record.individual" class="accordion-body collapse"
                                                id="grp_d{{record.client.id}}">
                                                <table class="table">
                                                    <thead>
                                                        <tr class="graybg">
                                                            <th></th>
                                                            <th>{{'label.heading.office' | translate}}</th>
                                                            <th colspan="2">
                                                                {{'label.heading.grouporclient' | translate}}</th>
                                                            <th>{{'label.heading.loan' | translate}}</th>
                                                            <th>{{'label.heading.amount' | translate}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="loan in record.loans">
                                                            <td></td>
                                                            <td>{{record.office.name}}</td>
                                                            <td colspan="2" class="pointer">
                                                                <a
                                                                    href='#!/viewclient/{{loan.client.id}}'>{{loan.client.name}}</a>
                                                            </td>
                                                            <td class="pointer"><a
                                                                    href='#!/viewloanaccount/{{loan.id}}'>{{loan.accountNo}}</a>
                                                            </td>
                                                            <td class="pointer">{{loan.amount | FormatNumber}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center">
                                <dir-pagination-controls pagination-id="pendingDisburse.id" boundary-links="true"
                                    template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                            </div>
                        </uib-tab>
                        <uib-tab heading="{{'label.heading.rescheduleloan' | translate}}"
                            has-permission='RESCHEDULE_LOAN'>
                            <div class="head-affix">
                                <table class="table condensed-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input ng-autofocus="true" ng-model="filterText2" type="text"
                                                    class="input-sm form-control"
                                                    placeholder="{{'label.input.filterbyname' | translate}}">
                                            </th>
                                            <th>
                                                <button type="button" class="btn btn-sm btn-success"
                                                    data-ng-click="approveBulkLoanReschedule()"
                                                    has-permission='APPROVE_LOANRESCHEDULE'><i class="fa fa-check"></i>&nbsp;&nbsp;{{'label.button.approve'
                                                | translate}}
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <script type="text/ng-template" id="loanreschedule.html">
                                <div class="modal-header silver">
                                    <h3 class="bolder">{{'label.heading.rescheduleloan' | translate}}</h3>
                                </div>
                                <div class="modal-body">
                                    <api-validate></api-validate>
                                    <br>
                                    <button class="btn btn-sm btn-default" ng-click="cancel()">{{'label.button.cancel' |
                                        translate}}
                                    </button>
                                    <button class="btn btn-sm btn-primary" ng-click="approveLoanReschedule()">
                                        {{'label.button.confirm' | translate}}
                                    </button>
                                </div>
                            </script>
                            <div>
                                <table class="table condensed-table">
                                    <thead>
                                        <tr class="graybg">
                                            <th><input type="checkbox"
                                                    ng-click="checkerInboxAllCheckBoxesClickedForBulkLoanRescheduleApproval()"
                                                    ng-checked="checkerInboxAllCheckBoxesMetForBulkLoanRescheduleApproval()" />
                                            </th>
                                            <th>{{'label.heading.client' | translate}}</th>
                                            <th>{{'label.heading.reschulerequest' | translate}}</th>
                                            <th>{{'label.heading.loanaccountnum' | translate}}</th>
                                            <th>{{'label.heading.reschedulefrom' | translate}}</th>
                                            <th>{{'label.heading.reschedulereason' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="loanReschedule in loanRescheduleData | filter:filterText2 | itemsPerPage: itemsPerPage"
                                            pagination-id="rescheduleLoan">
                                            <td><input type="checkbox"
                                                    data-ng-model="checkForBulkLoanRescheduleApprovalData[loanReschedule.id]" />
                                            </td>
                                            <td><a
                                                    href="#!/viewclient/{{loanReschedule.clientId}}">{{loanReschedule.clientName}}</a>
                                            </td>
                                            <td><a
                                                    href="#!/loans/{{loanReschedule.loanId}}/viewreschedulerequest/{{loanReschedule.id}}">{{loanReschedule.id}}</a>
                                            </td>
                                            <td><a
                                                    href="#!/viewloanaccount/{{loanReschedule.loanId}}">{{loanReschedule.loanAccountNumber}}</a>
                                            </td>
                                            <td><a>{{loanReschedule.rescheduleFromDate | DateFormat}}</a></td>
                                            <td><a>{{loanReschedule.rescheduleReasonCodeValue.name}}</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center">
                                <dir-pagination-controls pagination-id="rescheduleLoan" boundary-links="true"
                                    template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html" />
                            </div>
                        </uib-tab>
                    </uib-tabset>
                </fieldset>
            </div>
        </div>
    </div>
</div>
