<div class="content-container" ng-controller="CreateClientController">
   <ul class="breadcrumb">
      <li ng-if="!groupid"><a href="#!/clients">{{'label.anchor.clients' | translate}}</a></li>
      <li ng-if="groupid"><a href="#!/groups">{{'label.anchor.groups' | translate}}</a></li>
      <li ng-if="groupid"><a href="#!/viewgroup/{{groupid}}">{{'label.anchor.viewgroup' | translate}}</a></li>
      <li class="active">{{'label.anchor.createclient' | translate}}</li>
   </ul>

   <div class="card-content">
      <legend>{{'label.heading.createclient' | translate}}</legend>
      <form name="createclientform" class="form-horizontal form-extra" ng-submit="submit()">
         <api-validate></api-validate>
         <fieldset>
            <div class="form-group">
               <label class="control-label col-sm-3">
                  {{'label.input.office' | translate}} <span ng-show="forceOffice == null" class="required">*</span>
               </label>
               <div class="col-sm-3">
                  <md-select id="officeId" ng-model="formData.officeId" ng-change="changeOffice(formData.officeId)"
                     placeholder="{{'label.selectone' | translate}}">
                     <md-option ng-repeat="office in offices" ng-value="office.id">
                        {{office.name}}
                     </md-option>
                  </md-select>
               </div>
               <label class="control-label col-sm-3">{{'label.input.staff' | translate}}</label>
               <div class="col-sm-3">
                  <md-select id="staffId" ng-model="formData.staffId" placeholder="{{'label.selectone' | translate}}">
                     <md-option ng-repeat="staff in staffs" ng-value="staff.id">
                        {{staff.displayName}}
                     </md-option>
                  </md-select>
               </div>
            </div>

            <div class="form-group">
               <label class="control-label col-sm-3">{{'label.input.legalForm' | translate}}</label>
               <div class="col-sm-3">
                  <md-select id="legalFormId" ng-model="formData.legalFormId"
                     ng-change="displayPersonOrNonPersonOptions(formData.legalFormId)"
                     placeholder="{{'label.selectone' | translate}}">
                     <md-option ng-repeat="legalForm in clientLegalFormOptions" ng-value="legalForm.id">
                        {{legalForm.value | translate}}
                     </md-option>
                  </md-select>
               </div>
               <div class="col-sm-3"></div>
               <div data-ng-switch on="showNonPersonOptions" class="col-sm-3">
                  <md-checkbox ng-model="formData.isStaff">
                     {{'label.input.isStaff' | translate }}
                  </md-checkbox>
               </div>
            </div>

            <div data-ng-switch on="showNonPersonOptions">
               <div data-ng-switch-when="false">
                  <div class="form-group">
                     <label class="control-label col-sm-3" for="firstname">{{'label.input.firstname' | translate }}<span
                           class="required">*</span></label>
                     <div class="col-sm-3">
                        <input type="text" id="firstname" name="firstname" ng-model="formData.firstname"
                           class="form-control uppercase" required ng-pattern="/(^[A-z])[A-z.'-]*/" late-Validate
                           ng-blur="createCurpRfc()" maxlength="50" />
                        <span ng-show="createclientform.firstname.$invalid && createclientform.firstname.$dirty">
                           <small class="error required" ng-show="createclientform.firstname.$error.pattern">
                              {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                           </small>
                        </span>
                        <form-validate valattributeform="createclientform" valattribute="firstname" />
                     </div>
                     <label class="control-label col-sm-3"
                        for="middlename">{{'label.input.middlename' | translate}}</label>
                     <div class="col-sm-3">
                        <input type="text" id="middlename" name="middlename" ng-model="formData.middlename"
                           maxlength="50" class="form-control uppercase" ng-pattern="/(^[A-z])[A-z.'-]*/"
                           ng-blur="createCurpRfc()" />
                        <span ng-show="createclientform.middlename.$invalid && createclientform.middlename.$dirty">
                           <small class="error required" ng-show="createclientform.middlename.$error.pattern">
                              {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                           </small>
                        </span>
                     </div>
                  </div>

                  <div class="form-group">
                     <label class="control-label col-sm-3" for="lastname">{{'label.input.lastname' | translate}}
                        <span class="required">*</span>
                     </label>
                     <div class="col-sm-3">
                        <input type="text" id="lastname" name="lastname" ng-model="formData.lastname" maxlength="50"
                           class="form-control uppercase" ng-pattern="/(^[A-z])[A-z.'-]*/" required late-Validate
                           ng-blur="createCurpRfc()" />
                        <span ng-show="createclientform.lastname.$invalid && createclientform.lastname.$dirty">
                           <small class="error required" ng-show="createclientform.lastname.$error.pattern">
                              {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                           </small>
                        </span>
                        <form-validate valattributeform="createclientform" valattribute="lastname" />
                     </div>
                     <label class="control-label col-sm-3" for="lastname">{{'label.input.surname' | translate}}
                     </label>
                     <div class="col-sm-3">
                        <input type="text" id="surname" name="surname" ng-model="formData.surname"
                           class="form-control uppercase" ng-pattern="/(^[A-z])[A-z.'-]*/" late-Validate
                           ng-blur="createCurpRfc()" maxlength="50" />
                        <span ng-show="createclientform.surname.$invalid && createclientform.surname.$dirty">
                           <small class="error required" ng-show="createclientform.surname.$error.pattern">
                              {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                           </small>
                        </span>
                        <form-validate valattributeform="createclientform" valattribute="surname" />
                     </div>
                  </div>
               </div>

               <div data-ng-switch-when="true">
                  <div class="form-group">
                     <label class="control-label col-sm-3" for="fullname">{{'label.input.fullname' | translate}}<span
                           class="required">*</span></label>
                     <div class="col-sm-8">
                        <textarea type="text" id="fullname" ng-model="formData.fullname" rows="3"
                           class="form-control uppercase" ng-pattern="/(^[A-z])[A-z.'-]*/" required maxlength="250" />
                     </div>
                     <div class="col-sm-1">
                        <label class="control-label">{{formData.fullname.length}}</label> 
                     </div>
                  </div>
               </div>
            </div>

            <div class="form-group">
               <label class="control-label col-sm-3"
                  ng-hide="showNonPersonOptions">{{'label.input.dateofbirth' | translate}}<span
                     class="required">*</span></label>
               <label class="control-label col-sm-3"
                  ng-show="showNonPersonOptions">{{'label.input.incorporationdate' | translate}}<span
                     class="required">*</span></label>
               <div class="col-sm-3">
                  <md-datepicker id="dateofbirth" ng-model="first.dateOfBirth"
                     md-placeholder="{{'label.selecttodate' | translate}}" md-min-date="minDate"
                     md-max-date="restrictDate">
                  </md-datepicker>
               </div>
               <div data-ng-switch on="showNonPersonOptions">
                  <div data-ng-switch-when="false">
                     <label class="control-label col-sm-3">{{'label.input.birthplace' | translate}}<span
                           class="required">*</span></label>
                     <div class="col-sm-3">
                        <md-select id="birthplaceId" ng-model="formData.birthPlaceId" ng-blur="createCurpRfc()"
                           placeholder="{{'label.menu.birthplace' | translate}}" required>
                           <md-option ng-repeat="birthplace in birthPlaceOptions" ng-value="birthplace.id">
                              {{birthplace.name}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>
               </div>

               <script type="text/ng-template" id="duplicated.html">
                  <div class="modal-header silver">
                      <h3 class="bolder">{{'label.heading.duplicate' | translate}}</h3>
                  </div>
                  <div class="modal-body">
                      <api-validate></api-validate>
                      <div class="row">
                        <label class="control-label col-sm-3">{{'label.heading.status' | translate}}</label>
                        <label class="control-label col-sm-9">{{duplicateData.status}}</label>
                      </div>
                      <div class="row">
                        <label class="control-label col-sm-3">{{'label.heading.staff' | translate}}</label>
                        <label class="control-label col-sm-9">{{duplicateData.staffName}}</label>
                     </div>
                     <div class="row">
                        <label class="control-label col-sm-3">{{'label.heading.office' | translate}}</label>
                        <label class="control-label col-sm-9">{{duplicateData.officeName}}</label>
                     </div>
                     <button class="btn btn-sm btn-primary" ng-click="done()">{{'label.button.submit' |
                          translate}}
                      </button>
                  </div>
              </script>
            </div>

            <div class="form-group">
               <div data-ng-switch on="showNonPersonOptions">
                  <div data-ng-switch-when="false">
                     <label class="control-label col-sm-3">{{'label.input.gender' | translate}}<span
                           class="required">*</span></label>
                     <div class="col-sm-3">
                        <md-select id="genderId" ng-model="formData.genderId" ng-blur="createCurpRfc()" required
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="gender in genderOptions" ng-value="gender.id">
                              {{gender.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>
               </div>
               <label class="control-label col-sm-3" for="mobileNo">{{'label.input.mobilenumber' | translate}}<span
                     class="required">*</span></label>
               <div class="col-sm-3">
                  <input type="text" id="mobileNo" name="mobileNo" required ng-model="formData.mobileNo"
                     ng-pattern="\d{50}" class="form-control" maxlength="50" />
                  <span ng-show="createclientform.mobileNo.$invalid && createclientform.mobileNo.$dirty">
                     <small class="required" ng-show="createclientform.mobileNo.$error.pattern">
                        {{'label.mustbenumeric' | translate}}
                     </small>
                  </span>
               </div>

               <div data-ng-switch on="showNonPersonOptions">
                  <div data-ng-switch-when="true">
                     <label class="control-label col-sm-3">{{'label.input.incorpValidityTillDate' | translate}}</label>
                     <div class="col-sm-3">
                        <md-datepicker id="incorpValidityTillDate" ng-model="first.incorpValidityTillDate"
                           md-placeholder="{{'label.selecttodate' | translate}}" md-min-date="minDate"
                           md-max-date="'2030-06-22'">
                        </md-datepicker>
                     </div>
                  </div>
               </div>
            </div>

            <div class="form-group">
               <label class="control-label col-sm-3" for="rfc">{{'label.input.rfc' | translate}}
                  <span class="required">*</span></label>
               <div class="col-sm-3">
                  <input type="text" id="rfc" name="rfc" ng-model="formData.rfc" class="form-control uppercase"
                     ng-pattern="/(^[A-z])[A-z.'-]*/" maxlength="13" required late-Validate />
                  <span ng-show="createclientform.rfc.$invalid && createclientform.rfc.$dirty">
                     <small class="error required" ng-show="createclientform.rfc.$error.pattern">
                        {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                     </small>
                  </span>
                  <form-validate valattributeform="createclientform" valattribute="rfc" />
               </div>
               <div data-ng-switch on="showNonPersonOptions">
                  <div data-ng-switch-when="false">
                     <label class="control-label col-sm-3" for="uniqueId">{{'label.input.uniqueId' | translate}}
                        <span class="required">*</span></label>
                     <div class="col-sm-3">
                        <input type="text" id="uniqueId" name="uniqueId" ng-model="formData.uniqueId"
                           class="form-control uppercase" ng-pattern="/(^[A-z])[A-z.'-]*/" maxlength="18" required
                           late-Validate />
                        <span ng-show="createclientform.uniqueId.$invalid && createclientform.uniqueId.$dirty">
                           <small class="error required" ng-show="createclientform.uniqueId.$error.pattern">
                              {{'validation.msg.client.name.cannot.start.specialchar.ornumber' | translate}}
                           </small>
                        </span>
                     </div>
                  </div>
               </div>
            </div>

            <div class="form-group">
               <label class="control-label col-sm-3">{{'label.input.clienttype' | translate}}</label>
               <div class="col-sm-3">
                  <md-select id="clienttypeId" ng-model="formData.clientTypeId"
                     placeholder="{{'label.selectone' | translate}}">
                     <md-option ng-repeat="clienttype in clienttypeOptions" ng-value="clienttype.id">
                        {{clienttype.name | translate}}
                     </md-option>
                  </md-select>
               </div>
               <label class="control-label col-sm-3">{{'label.input.clientclassification' | translate}}</label>
               <div class="col-sm-3">
                  <md-select id="clientClassificationId" ng-model="formData.clientClassificationId"
                     placeholder="{{'label.selectone' | translate}}">
                     <md-option ng-repeat="clientClassification in clientClassificationOptions"
                        ng-value="clientClassification.id">
                        {{clientClassification.name | translate}}
                     </md-option>
                  </md-select>
               </div>
            </div>

            <div data-ng-switch on="showNonPersonOptions">
               <div data-ng-switch-when="true">
                  <div class="form-group">
                     <label class="control-label col-sm-3"
                        for="incorpNumber">{{'label.input.incorpNumber' | translate}}</label>
                     <div class="col-sm-3">
                        <input type="text" id="incorpNumber" ng-model="formData.clientNonPersonDetails.incorpNumber"
                           class="form-control" maxlength="50" />
                     </div>
                     <label class="control-label col-sm-3">{{'label.input.mainBusinessLine' | translate}}</label>
                     <div class="col-sm-3">
                        <md-select id="mainBusinessLineId" ng-model="formData.clientNonPersonDetails.mainBusinessLineId"
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="mainBusinessLine in clientNonPersonMainBusinessLineOptions"
                              ng-value="mainBusinessLine.id">
                              {{mainBusinessLine.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>
               </div>
            </div>

            <div data-ng-switch on="showNonPersonOptions">
               <div data-ng-switch-when="true">
                  <div class="form-group">
                     <label class="control-label col-sm-3">{{'label.input.constitution' | translate}}<span
                           class="required"></span></label>
                     <div class="col-sm-3">
                        <md-select id="constitutionId" name="constitution"
                           ng-model="formData.clientNonPersonDetails.constitutionId"
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="constitution in clientNonPersonConstitutionOptions"
                              ng-value="constitution.id">
                              {{constitution.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                     <div class="col-sm-2">
                     </div>
                  </div>
               </div>
            </div>

            <div data-ng-switch on="showNonPersonOptions">
               <div data-ng-switch-when="true">
                  <div class="form-group">
                     <label class="control-label col-sm-3" for="remarks">{{'label.input.remarks' | translate}}</label>
                     <div class="col-sm-8">
                        <textarea type="text" id="remarks" ng-model="formData.clientNonPersonDetails.remarks" rows="2"
                           class="form-control uppercase" maxlength="100" />
                        </div>
                  </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3" for="externalId">{{'label.input.externalid' | translate}}</label>
                <div class="col-sm-3">
                <input type="text" id="externalId" name="externalId" ng-model="formData.externalId" 
                    maxlength="50" class="form-control uppercase"/>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.submittedon' | translate}}</label>
                <div class="col-sm-3">
                  <md-datepicker id="submittedon" ng-model="first.submittedon" 
                     md-placeholder="{{'label.selecttodate' | translate}}"
                     md-min-date="'2000-01-01'" md-max-date="restrictDate">
                  </md-datepicker>
                </div>
            </div>

            <div class="form-group" has-permission="ACTIVATE_CLIENT">
               <div class="col-sm-3 col-sm-offset-3">
                  <md-checkbox ng-model="formData.active" ng-change="setChoice()">
                     {{'label.input.active' | translate }}
                  </md-checkbox> 
               </div>
               <div data-ng-switch on="choice">
                  <div data-ng-switch-when="1">
                     <label class="control-label col-sm-3">{{'label.input.activationdate' | translate}}<span class="required">*</span></label>
                     <div class="col-sm-3">
                        <md-datepicker id="activationDate" ng-model="first.date" 
                              md-placeholder="{{'label.selecttodate' | translate}}"
                              md-min-date="'2000-01-01'" md-max-date="restrictDate">
                        </md-datepicker>
                     </div>
                  </div>
               </div>
           </div>

            <div class="form-group" ng-show="showSavingOptions">
                <div class="col-sm-3 col-sm-offset-3">
                    <md-checkbox id="opensavingsproduct" ng-model="savings.opensavingsproduct">
                        {{'label.input.opensavingsproduct' | translate }}
                    </md-checkbox> 
                </div>
                <label class="control-label col-sm-3" ng-show="savings.opensavingsproduct">
                    {{'label.input.savingproduct' | translate}}
                </label>
                <div class="col-sm-3" ng-show="savings.opensavingsproduct">
                    <md-select id="savingsProductId" ng-model="formData.savingsProductId"
                        placeholder="{{'label.selectone' | translate}}">
                        <md-option ng-repeat="savingProduct in savingproducts" ng-value="savingProduct.id">
                            {{savingProduct.shortName}} {{savingProduct.name | translate}}
                        </md-option>
                    </md-select>
                </div>
            </div>

            <div class="form-group">
                <div class="form-group">
                   <div class="control-label col-sm-3">
                      <h3><strong>{{'label.heading.familymembers' | translate }}</strong>&nbsp;<a ng-click="addFamilyMember()"><i class="fa fa-plus" title="{{'label.button.addfamilymember' | translate}}"></i></a></h3>
                  </div>
                </div>

                <div ng-repeat="family in familyArray">
                    <div class="form-group">
                        <div class="control-label col-sm-3">
                            <label>{{'label.input.relationship' | translate }}<span class="required">*</span></label>
                        </div>
                        <div class="col-sm-3">
                            <md-select id="relationshipIdOption" ng-model="familyArray[$index].relationshipId" 
                                    placeholder="{{'label.selectone' | translate}}">
                                    <md-option ng-repeat="relationshipIdOption in relationshipIdOptions" ng-value="relationshipIdOption.id">
                                        {{relationshipIdOption.name | translate}}
                                    </md-option>
                            </md-select>
                        </div>
                        <div class = "col-sm-2">
                            <form-validate valattributeform="createclientform" valattribute="addressType"/>
                        </div>
                        <a ng-click="removeFamilyMember($index)" uib-tooltip="{{'label.remove.row' | translate}}"><i class="fa fa-times"></i></a>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="firstName">{{'label.input.firstname' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="text" id="firstName" name="firstName" ng-model="familyArray[$index].firstName"
                            maxlength="50" class="form-control uppercase">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="middleName">{{'label.input.middlename' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="text" id="middleName" name="middleName" ng-model="familyArray[$index].middleName"
                            maxlength="50" class="form-control uppercase">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="lastName">{{'label.input.lastname' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="text" id="lastName" name="lastName" ng-model="familyArray[$index].lastName"
                            maxlength="50" class="form-control uppercase">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="qualification">{{'label.input.qualification' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="text" id="qualification" name="qualification" ng-model="familyArray[$index].qualification"  class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="mobileNumber">{{'label.input.mobileNumber' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="text" id="mobileNumber" name="mobileNumber" ng-model="familyArray[$index].mobileNumber"
                            pattern="\d{50}" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3" for="age">{{'label.input.age' | translate }}</label>
                        <div class="col-sm-3">
                            <input type="number" min="0" max="120" id="age" name="age" ng-model="familyArray[$index].age" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-6 col-sm-offset-3">
                            <md-checkbox id="isDependent" ng-model="familyArray[$index].isDependent">
                                {{'label.input.isDependent' | translate }}
                            </md-checkbox> 
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="control-label col-sm-3">
                            <label>{{'label.input.gender' | translate }}</label>
                        </div>
                        <div class="col-sm-3">
                            <md-select id="genderIdOption" ng-model="familyArray[$index].genderId"
                                    placeholder="{{'label.selectone' | translate}}">
                                    <md-option ng-repeat="genderIdOption in genderIdOptions" ng-value="genderIdOption.id">
                                        {{genderIdOption.name | translate}}
                                    </md-option>
                            </md-select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="control-label col-sm-3">
                            <label>{{'label.input.profession' | translate}}</label>
                        </div>
                        <div class="col-sm-3">
                            <md-select id="professionIdOption" ng-model="familyArray[$index].professionId"  
                                placeholder="{{'label.selectone' | translate}}">
                                <md-option ng-repeat="professionIdOption in professionIdOptions" ng-value="professionIdOption.id">
                                    {{professionIdOption.name | translate}}
                                </md-option>
                            </md-select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="control-label col-sm-3">
                            <label>{{'label.input.maritalstatus' | translate}}</label>
                        </div>
                        <div class="col-sm-3">
                            <md-select id="maritalStatusId" ng-model="familyArray[$index].maritalStatusId" 
                                placeholder="{{'label.selectone' | translate}}">
                                <md-option ng-repeat="maritalStatusIdOption in maritalStatusIdOptions" ng-value="professionIdOption.id">
                                    {{professionIdOption.name | translate}}
                                </md-option>
                            </md-select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-3">{{'label.input.dateofbirth' | translate }}</label>
                        <div class="col-sm-3">
                            <md-datepicker ng-model="familyArray[$index].dateOfBirth" 
                                md-placeholder="{{'label.selecttodate' | translate}}"
                                md-max-date="restrictDate">
                            </md-datepicker>
                        </div>
                    </div>
                </div>
            </div>
           
            <div ng-show="enableAddress" class="form-group">
               <div class="form-group">
                  <div class="control-label col-sm-3">
                     <h3><strong>{{'label.input.address' | translate }}</strong>&nbsp;<a ng-click="addAddress()"><i class="fa fa-plus" title="{{'label.button.addAddress' | translate}}"></i></a></h3>
                  </div>
               </div>
               <div ng-repeat="addr in addressArray">
                  <div class="col-sm-8 col-md-8">
                  <div class="form-group" ng-show="postalCode">
                     <label class="control-label col-sm-3">{{'label.input.postal_code' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" pattern="\d{5}" name="postal_code" maxlength="5" oninput="this.value=this.value.replace(/[^0-9]/g,'');" ng-model="addressArray[$index].postalCode" class="form-control">
                     </div>
                  </div>
                  <div class="form-group">
                     <div class="control-label col-sm-3">
                        <label>{{'label.input.addressType' | translate }}<span class="required">*</span></label>
                     </div>
                     <div class="col-sm-6">
                        <md-select id="addressType" ng-model="addressArray[$index].addressTypeId" required
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="addressType in addressTypes" ng-value="addressType.id">
                               {{addressType.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                     <div class = "col-sm-2">
                        <form-validate valattributeform="createclientform" valattribute="addressType"/>
                     </div>
                     <a ng-click="removeAddress($index)" uib-tooltip="{{'label.remove.row' | translate}}"><i class="fa fa-times"></i></a>
                  </div>
                  <div class="form-group" ng-show="street">
                     <div class="control-label col-sm-3">
                        <label>{{'label.input.street' | translate }}<span class="required">*</span></label>
                     </div>
                     <div class="col-sm-6">
                        <input type="text" name="street" maxlength="100" ng-model="addressArray[$index].street"
                            class="form-control uppercase" required late-validate/>
                     </div>
                     <div class = "col-sm-3">
                        <form-validate valattributeform="createclientform" valattribute="street"/>
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine1">
                     <label class="control-label col-sm-3">{{'label.input.addressline1' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline1" ng-model="addressArray[$index].addressLine1" 
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine2">
                     <label class="control-label col-sm-3">{{'label.input.addressline2' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline2" ng-model="addressArray[$index].addressLine2"
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine3">
                     <label class="control-label col-sm-3">{{'label.input.addressline3' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline3" ng-model="addressArray[$index].addressLine3" 
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine4">
                     <label class="control-label col-sm-3">{{'label.input.addressline4' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline4" ng-model="addressArray[$index].addressLine4" 
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine5">
                     <label class="control-label col-sm-3">{{'label.input.addressline5' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline5" ng-model="addressArray[$index].addressLine5"
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="addressLine6">
                     <label class="control-label col-sm-3">{{'label.input.addressline6' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="addressline6" ng-model="addressArray[$index].addressLine6" 
                            maxlength="200" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="city">
                     <label class="control-label col-sm-3">{{'label.input.city' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="city" ng-model="addressArray[$index].city"
                            maxlength="100" class="form-control uppercase">
                     </div>
                  </div>
                  <div class="form-group" ng-show="countryId">
                     <div class="control-label col-sm-3">
                        <label>{{'label.input.country' | translate }}</label>
                     </div>
                     <div class="col-sm-6">
                        <md-select name="countryOptions" ng-model="addressArray[$index].countryId"
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="countryOption in countryOptions" ng-value="countryOption.id">
                               {{countryOption.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>

                  <div class="form-group" ng-show="stateProvinceId">
                     <div class="control-label col-sm-3">
                        <label>{{'label.input.state_province' | translate }}</label>
                     </div>
                     <div class="col-sm-6">
                        <md-select  ng-model="addressArray[$index].stateProvinceId" 
                           ng-change="filterMunicipality(addressArray[$index].stateProvinceId); changeState(stateOption.name)"
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="stateOption in stateOptions" ng-value="stateOption.id">
                               {{stateOption.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>
                  <div class="form-group" ng-show="municipality">
                     <div class="control-label col-sm-3">
                        <label>{{'label.input.municipality' | translate }}</label>
                     </div>
                     <div class="col-sm-6">
                        <md-select chosen="municipalityOptions" ng-model="addressArray[$index].municipality" 
                           placeholder="{{'label.selectone' | translate}}">
                           <md-option ng-repeat="municipalityOption in municipalityOptions" ng-value="municipalityOption.id">
                               {{municipalityOption.name | translate}}
                           </md-option>
                        </md-select>
                     </div>
                  </div>
                  <div class="form-group" ng-show="antiquity">
                     <label class="control-label col-sm-3">{{'label.input.antiquity' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="text" name="antiquity" maxlength="2" oninput="this.value=this.value.replace(/[^0-9]/g,'');" ng-model="addressArray[$index].antiquity"  class="form-control">
                     </div>
                  </div>
                  <div class="form-group" ng-show="latitude">
                     <label class="control-label col-sm-3">{{'label.input.latitude' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="number" name="latitude" ng-model="addressArray[$index].latitude"  class="form-control">
                     </div>
                  </div>
                  <div class="form-group" ng-show="longitude">
                     <label class="control-label col-sm-3">{{'label.input.longitude' | translate }}</label>
                     <div class="col-sm-6">
                        <input type="number" name="longitude" ng-model="addressArray[$index].longitude"  class="form-control">
                     </div>
                  </div>
                  <div class="form-group" ng-show="isActive">
                     <div class="col-sm-6 col-sm-offset-3">
                        <md-checkbox ng-model="addressArray[$index].isActive">
                            {{'label.input.active' | translate }}
                        </md-checkbox>
                     </div>
                  </div>
                  </div>
               </div>
            </div>

            <div ng-if="datatables" ng-repeat="datatable in datatables">
               <legend>{{datatable.registeredTableName}}</legend>
		         <div class="form-group" ng-repeat="columnHeader in datatable.columnHeaderData">
		            <label class="control-label col-sm-3">{{ columnHeader.columnName | prettifyDataTableColumn }}
		            <span ng-show="!columnHeader.isColumnNullable" class="required">*</span>
		            </label>
		            <div class="col-sm-3">
		                <input ng-show="fieldType(columnHeader.columnDisplayType) == 'TEXT'" type="text"
		                  ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]" class="form-control"/>
                        <md-datepicker ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                            ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'" 
                            md-placeholder="{{'label.selecttodate' | translate}}">
                        </md-datepicker>
		                <div ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'" class="form-inline">
		                  <div class="form-group">
                            <md-datepicker ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date" 
                                md-placeholder="{{'label.selecttodate' | translate}}">
                            </md-datepicker>
		                  </div>
		                  <div class="form-group">
		                     <input type="time" placeholder="HH:MM:SS"
		                        ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time" class="form-control"/>
		                  </div>
		                </div>
		               <div ng-show="fieldType(columnHeader.columnDisplayType) == 'BOOLEAN'">
		                  <label class="radio-inline">
		                  <input type="radio" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
		                     value="true"/>
		                  {{'label.input.true' | translate}}
		                  </label>
		                  <label class="radio-inline">
		                  <input type="radio" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
		                     value="false"/>
		                  {{'label.input.false' | translate}}
		                  </label>
		               </div>
		               <span data-ng-switch on="columnHeader.columnDisplayType">
		                  <md-select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
		                     data-ng-switch-when="CODELOOKUP"
		                     ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                             placeholder="{{'label.selectone' | translate}}">
                             <md-option ng-repeat="columnValue in columnHeader.columnValues" ng-value="columnValue.id">
                                 {{columnValue.value | translate}}
                             </md-option>
		                  </md-select>
		                  <md-select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
		                     data-ng-switch-when="CODEVALUE"
		                     ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                             placeholder="{{'label.selectone' | translate}}">
                             <md-option ng-repeat="columnValue in columnHeader.columnValues" ng-value="columnValue.id">
                                 {{columnValue.value | translate}}
                             </md-option>
		                  </md-select>
		               </span>
		            </div>
              </div>
            </div>

            <div flex layout="row" layout-align="center top">
                <md-button id="cancel" type="reset" class="md-raised"
                    href="{{cancel}}">{{'label.button.cancel' | translate}}</md-button>
                <md-button id="save" class="md-raised md-primary" ng-click="submit()" 
                    has-permission='CREATE_CLIENT' ng-hide="blockUI">{{'label.button.save' | translate }}
                </md-button>
                <md-button id="save" class="md-raised md-primary" ng-show="blockUI">{{'label.button.processing' | translate }}
                </md-button>
            </div>
         </fieldset>
      </form>
</div>