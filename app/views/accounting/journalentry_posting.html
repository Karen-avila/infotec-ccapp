<div class="content-container">
	<ul class="breadcrumb">
		<li><a href="#!/accounting">{{'label.anchor.accounting' | translate}}</a></li>
		<li class="active">{{'label.anchor.addjournalentry' | translate}}</li>
	</ul>
	<div class="card">
		<div class="content">
			<div class="toolbar">
				<h4>{{'label.heading.addjournalentry' | translate }}</h4>
			</div>
			<br />
			<form name="journalpostingform" novalidate="" class="form-horizontal form-extra"
				ng-controller="JournalEntryController">
				<api-validate></api-validate>
				<fieldset>
					<div class="form-group">
						<label class="control-label col-sm-3">{{'label.input.office' | translate }}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<md-select id="officeId" ng-model="formData.officeId"
								placeholder="{{'label.selectone' | translate}}">
								<md-option ng-repeat="office in offices" ng-value="office.id">
									{{office.name}}
								</md-option>
							</md-select>
						</div>

						<label class="control-label col-sm-3">{{'label.input.currency' | translate }}&nbsp;<span
								class="required">*</span></label>
						<div class="col-sm-3">
							<md-select id="currencyCode" name="currency" ng-model="formData.currencyCode"
								placeholder="{{'label.selectone' | translate}}">
								<md-option ng-repeat="currency in currencyOptions" ng-value="currency.code">
									{{currency.code}} {{currency.name | translate}}
								</md-option>
							</md-select>
							<form-validate valattributeform="journalpostingform" valattribute="currency" />
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-sm-3" >{{'label.input.affectedglentries' | translate }}<span
								class="required">*</span></label>

						<div class="col-sm-9">
							<div class="col-md-12">
								<h4><strong>{{'label.input.debit' | translate }}</strong>&nbsp;&nbsp;
									<md-button class="md-raised md-primary" ng-click="addDebitAccount()"><i
											class="fa fa-plus"></i></md-button>
								</h4>
							</div>
							<div ng-repeat="dbAccount in formData.dbAccounts"
								class="col-md-12 form-inline paddedbottom10">
								<div class="col-md-6">
									<md-autocomplete
						md-selected-item="selectedItem"
						md-search-text="searchText"
						md-selected-item-change="selectedItemChange(item)"
						md-items="item in querySearch(searchText)"
						md-item-text="getItemText(item)"
						md-min-length="4"
						md-escape-options="clear"
						placeholder="{{'label.select.account.debit' | translate}}"
						input-aria-labelledby="formData.select">
                      	<md-item-template>
							<span md-highlight-text="searchText" md-highlight-flags="^i">{{item.glCode}} {{item.name}}</span>
						</md-item-template>
						<md-not-found>
							"{{searchText}}" {{'error.msg.not.found' | translate}}
						</md-not-found>
					</md-autocomplete>
								</div>
								<div class="col-md-2">
								<label class="control-label">{{'label.input.amount' | translate }}<span
									class="required">*</span></label>
								</div>
								<div class="col-md-3">
									<input type="number" class="input-small form-control"
										ng-model="dbAccount.debitAmount">
								</div>
								<a ng-click="removeDebitAccount($index)">&nbsp;<i
										class="fa fa-times-circle fa-2x"></i></a>
							</div>
							<div class="col-md-12">
								<h4><strong>{{'label.input.credit' | translate }}</strong>&nbsp;&nbsp;
									<md-button class="md-raised md-primary" ng-click="addCrAccount()"><i
											class="fa fa-plus"></i></md-button>
								</h4>
							</div>
							<div ng-repeat="crAccount in formData.crAccounts "
								class="col-md-12 form-inline paddedbottom10">
								<div class="col-md-6">
									<md-autocomplete
						md-selected-item="selectedItem"
						md-search-text="searchText"
						md-selected-item-change="selectedItemChange(item)"
						md-items="item in querySearch(searchText)"
						md-item-text="getItemText(item)"
						md-min-length="4"
						md-escape-options="clear"
						placeholder="{{'label.select.account.credit' | translate}}"
						input-aria-labelledby="formData.select"">
						<md-item-template>
							<span md-highlight-text="searchText" md-highlight-flags="^i">{{item.glCode}} {{item.name}}</span>
						</md-item-template>
						<md-not-found>
							"{{searchText}}" {{'error.msg.not.found' | translate}}
						</md-not-found>
					                </md-autocomplete>
								</div>
								<div class="col-md-2">
									<label class="control-label">{{'label.input.amount' | translate }}<span
											class="required">*</span></label>
								</div>
								<div class="col-md-3">
									<input type="number" class="input-small form-control" ng-model="crAccount.crAmount">
								</div>
								<a ng-click="removeCrAccount($index)">&nbsp;<i class="fa fa-times-circle fa-2x"></i></a>
							</div>
						</div>
						
					</div>
					<div class="form-group">
						<label class="control-label col-sm-3"
							for="referenceNumber">{{'label.input.referencenumber' | translate }}</label>
						<div class="col-sm-3">
							<input type="text" id="referenceNumber" ng-model="formData.referenceNumber"
								class="form-control">
						</div>

						<label class="control-label col-sm-3">{{'label.input.transactiondate' | translate }}<span
								class="required">*</span></label>
						<div class="col-sm-3">
							<md-datepicker id="transactionDate" ng-model="first.date" min="'2000-01-01'"
								max="restrictDate"> </md-datepicker>
						</div>
					</div>

					<div class="form-group">
						<label class="control-label col-sm-3">{{'label.anchor.showpaymentdetails' | translate}}</label>
						<div class="col-sm-3">
							<md-button id="clickToShow" class="md-raised md-primary"
								ng-click="showPaymentDetails=!showPaymentDetails">
								<i ng-show="showPaymentDetails" class="fa fa-minus "></i>
								<i ng-show="!showPaymentDetails" class="fa fa-plus "></i>
							</md-button>
						</div>
					</div>
					<div uib-collapse="!showPaymentDetails">
						<div class="form-group">
							<label class="control-label col-sm-3 ng-binding"
								for="paymentTypeId">{{'label.input.paymenttype' | translate}}</label>
							<div class="col-sm-3">
								<md-select id="paymentTypeId" ng-model="formData.paymentTypeId"
									placeholder="{{'label.selectone' | translate}}">
									<md-option ng-repeat="paymentType in paymentTypes" ng-value="paymentType.id">
										{{'payment.type.' + paymentType.name | translate}}
									</md-option>
								</md-select>
							</div>

							<label class="control-label col-sm-3"
								for="accountNumber">{{'label.input.accnum' | translate}}</label>
							<div class="col-sm-3">
								<input id="accountNumber" type="text" ng-model="formData.accountNumber"
									class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label class="control-label col-sm-3"
								for="checkNumber">{{'label.input.checknumber' | translate}}</label>
							<div class="col-sm-3">
								<input id="checkNumber" type="text" ng-model="formData.checkNumber"
									class="form-control">
							</div>

							<label class="control-label col-sm-3"
								for="routingCode">{{'label.input.routingcode' | translate}}</label>
							<div class="col-sm-3">
								<input id="routingCode" type="text" ng-model="formData.routingCode"
									class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label class="control-label col-sm-3"
								for="receiptNumber">{{'label.input.receiptnumber' | translate}}</label>
							<div class="col-sm-3">
								<input id="receiptNumber" type="text" ng-model="formData.receiptNumber"
									class="form-control">
							</div>

							<label class="control-label col-sm-3"
								for="bankNumber">{{'label.input.banknumber' | translate}}</label>
							<div class="col-sm-3">
								<input id="bankNumber" type="text" ng-model="formData.bankNumber" class="form-control">
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-sm-3">{{'label.input.comments' | translate }}</label>

						<div class="col-sm-9">
							<textarea rows="9" ng-model="formData.comments" class="form-control"></textarea>
						</div>
					</div>
					<div class="col-md-12 center">
						<md-button id="cancel" href="#!/accounting" class="md-raised">
							{{'label.button.cancel' | translate }}</md-button>
						<md-button id="save" type="submit" class="md-raised md-primary" ng-click="submit()"
							has-permission='CREATE_JOURNALENTRY'>{{'label.button.save' | translate }}</md-button>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
</div>